<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>QuantLib: QuantLib::CPIVolatilitySurface Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">QuantLib
   &#160;<span id="projectnumber">1.3</span>
   </div>
   <div id="projectbrief">ql1-3</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_quant_lib_1_1_c_p_i_volatility_surface.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">QuantLib::CPIVolatilitySurface Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="QuantLib::CPIVolatilitySurface" --><!-- doxytag: inherits="QuantLib::VolatilityTermStructure" -->
<p>zero inflation (i.e. CPI/RPI/HICP/etc.) volatility structures  
 <a href="class_quant_lib_1_1_c_p_i_volatility_surface.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="cpivolatilitystructure_8hpp_source.html">cpivolatilitystructure.hpp</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for QuantLib::CPIVolatilitySurface:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_quant_lib_1_1_c_p_i_volatility_surface__inherit__graph.png" border="0" usemap="#_quant_lib_1_1_c_p_i_volatility_surface_inherit__map" alt="Inheritance graph"/></div>
<map name="_quant_lib_1_1_c_p_i_volatility_surface_inherit__map" id="_quant_lib_1_1_c_p_i_volatility_surface_inherit__map">
<area shape="rect" id="node13" href="class_quant_lib_1_1_constant_c_p_i_volatility.html" title="Constant surface, no K or T dependence." alt="" coords="132,1893,340,2117"/><area shape="rect" id="node2" href="class_quant_lib_1_1_volatility_term_structure.html" title="Volatility term structure." alt="" coords="129,899,343,1192"/><area shape="rect" id="node4" href="class_quant_lib_1_1_term_structure.html" title="Basic term&#45;structure functionality." alt="" coords="153,262,319,850"/><area shape="rect" id="node6" href="class_quant_lib_1_1_observer.html" title="Object that gets notified when a given observable changes." alt="" coords="5,15,139,204"/><area shape="rect" id="node8" href="class_quant_lib_1_1_observable.html" title="Object that notifies its changes to a set of observers." alt="" coords="163,15,309,204"/><area shape="rect" id="node10" href="class_quant_lib_1_1_extrapolator.html" title="base class for classes possibly allowing extrapolation" alt="" coords="333,6,491,213"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Collaboration diagram for QuantLib::CPIVolatilitySurface:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_quant_lib_1_1_c_p_i_volatility_surface__coll__graph.png" border="0" usemap="#_quant_lib_1_1_c_p_i_volatility_surface_coll__map" alt="Collaboration graph"/></div>
<map name="_quant_lib_1_1_c_p_i_volatility_surface_coll__map" id="_quant_lib_1_1_c_p_i_volatility_surface_coll__map">
<area shape="rect" id="node2" href="class_quant_lib_1_1_volatility_term_structure.html" title="Volatility term structure." alt="" coords="333,2787,546,3080"/><area shape="rect" id="node4" href="class_quant_lib_1_1_term_structure.html" title="Basic term&#45;structure functionality." alt="" coords="506,2131,672,2719"/><area shape="rect" id="node6" href="class_quant_lib_1_1_observer.html" title="Object that gets notified when a given observable changes." alt="" coords="1036,461,1169,651"/><area shape="rect" id="node12" title="STL class." alt="" coords="1141,157,1240,243"/><area shape="rect" id="node16" href="class_quant_lib_1_1_observable.html" title="Object that notifies its changes to a set of observers." alt="" coords="1141,1372,1288,1561"/><area shape="rect" id="node22" href="class_quant_lib_1_1_extrapolator.html" title="base class for classes possibly allowing extrapolation" alt="" coords="150,1363,308,1570"/><area shape="rect" id="node24" href="classbool.html" title="{bool\n||}" alt="" coords="50,717,96,803"/><area shape="rect" id="node26" href="class_quant_lib_1_1_day_counter.html" title="day counter class" alt="" coords="332,1346,484,1587"/><area shape="rect" id="node37" href="class_quant_lib_1_1_calendar.html" title="calendar class" alt="" coords="694,1303,868,1631"/><area shape="rect" id="node30" href="class_quant_lib_1_1_date.html" title="Concrete date class." alt="" coords="892,869,1065,2064"/><area shape="rect" id="node45" href="class_quant_lib_1_1_period.html" title="{QuantLib::Period\n|&#45; length_\l&#45; units_\l|+ Period()\l+ Period()\l+ Period()\l+ length()\l+ units()\l+ frequency()\l+ operator+=()\l+ operator&#45;=()\l+ operator/=()\l+ normalize()\l}" alt="" coords="674,2804,792,3063"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="class_quant_lib_1_1_c_p_i_volatility_surface-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a7c2421be99ba8dd24bc5a4facad8c62c">CPIVolatilitySurface</a> (<a class="el" href="namespace_quant_lib.html#a9adc2615d630d6006896b3402b09b03b">Natural</a> <a class="el" href="class_quant_lib_1_1_term_structure.html#af3f3aa53df413306cabf64ec163fe322">settlementDays</a>, const <a class="el" href="class_quant_lib_1_1_calendar.html">Calendar</a> &amp;, <a class="el" href="namespace_quant_lib.html#ac95a4b5bc8017f1eb4ad0b54a9af3881">BusinessDayConvention</a> bdc, const <a class="el" href="class_quant_lib_1_1_day_counter.html">DayCounter</a> &amp;dc, const <a class="el" href="class_quant_lib_1_1_period.html">Period</a> &amp;<a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a79d30b7495a650dcafe0804527e1860c">observationLag</a>, <a class="el" href="namespace_quant_lib.html#abfa020992bcf412e2bc99f56d4381b4a">Frequency</a> <a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a9192b39beabf3a25052706f5cf5d7f9d">frequency</a>, <a class="el" href="classbool.html">bool</a> <a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a6fb3038a2636c4d7caa891f5832032bc">indexIsInterpolated</a>)</td></tr>
<tr><td colspan="2"><div class="groupHeader">Volatility</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_quant_lib.html#ae3abfa256de5aa2b506ab6bda014e4dc">Volatility</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#aa79c04bff9725bd77c2bbb4858807b2d">volatility</a> (const <a class="el" href="class_quant_lib_1_1_date.html">Date</a> &amp;maturityDate, <a class="el" href="namespace_quant_lib.html#a919ba3567cc89fca373f8d6b8e80126b">Rate</a> strike, const <a class="el" href="class_quant_lib_1_1_period.html">Period</a> &amp;obsLag=<a class="el" href="class_quant_lib_1_1_period.html">Period</a>(-1, <a class="el" href="namespace_quant_lib.html#a6cdac5e2dae1e972076cc8e3302e4ad3ac2d73aad1a6496a6481563e7b5e62b36">Days</a>), <a class="el" href="classbool.html">bool</a> extrapolate=false) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the volatility for a given maturity date and strike rate.  <a href="#aa79c04bff9725bd77c2bbb4858807b2d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_quant_lib.html#ae3abfa256de5aa2b506ab6bda014e4dc">Volatility</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#acc858925f7b5f376e44c269213909c4c">volatility</a> (const <a class="el" href="class_quant_lib_1_1_period.html">Period</a> &amp;optionTenor, <a class="el" href="namespace_quant_lib.html#a919ba3567cc89fca373f8d6b8e80126b">Rate</a> strike, const <a class="el" href="class_quant_lib_1_1_period.html">Period</a> &amp;obsLag=<a class="el" href="class_quant_lib_1_1_period.html">Period</a>(-1, <a class="el" href="namespace_quant_lib.html#a6cdac5e2dae1e972076cc8e3302e4ad3ac2d73aad1a6496a6481563e7b5e62b36">Days</a>), <a class="el" href="classbool.html">bool</a> extrapolate=false) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">returns the volatility for a given option tenor and strike rate  <a href="#acc858925f7b5f376e44c269213909c4c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespace_quant_lib.html#ae3abfa256de5aa2b506ab6bda014e4dc">Volatility</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a411647a6e680e75f568a10bfeb2639c0">totalVariance</a> (const <a class="el" href="class_quant_lib_1_1_date.html">Date</a> &amp;exerciseDate, <a class="el" href="namespace_quant_lib.html#a919ba3567cc89fca373f8d6b8e80126b">Rate</a> strike, const <a class="el" href="class_quant_lib_1_1_period.html">Period</a> &amp;obsLag=<a class="el" href="class_quant_lib_1_1_period.html">Period</a>(-1, <a class="el" href="namespace_quant_lib.html#a6cdac5e2dae1e972076cc8e3302e4ad3ac2d73aad1a6496a6481563e7b5e62b36">Days</a>), <a class="el" href="classbool.html">bool</a> extrapolate=false) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespace_quant_lib.html#ae3abfa256de5aa2b506ab6bda014e4dc">Volatility</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a31a3520f78a24ff12c2133c56cb6cb05">totalVariance</a> (const <a class="el" href="class_quant_lib_1_1_period.html">Period</a> &amp;optionTenor, <a class="el" href="namespace_quant_lib.html#a919ba3567cc89fca373f8d6b8e80126b">Rate</a> strike, const <a class="el" href="class_quant_lib_1_1_period.html">Period</a> &amp;obsLag=<a class="el" href="class_quant_lib_1_1_period.html">Period</a>(-1, <a class="el" href="namespace_quant_lib.html#a6cdac5e2dae1e972076cc8e3302e4ad3ac2d73aad1a6496a6481563e7b5e62b36">Days</a>), <a class="el" href="classbool.html">bool</a> extrapolate=false) const </td></tr>
<tr><td colspan="2"><div class="groupHeader">Inspectors</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_quant_lib_1_1_period.html">Period</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a79d30b7495a650dcafe0804527e1860c">observationLag</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespace_quant_lib.html#abfa020992bcf412e2bc99f56d4381b4a">Frequency</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a9192b39beabf3a25052706f5cf5d7f9d">frequency</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a6fb3038a2636c4d7caa891f5832032bc">indexIsInterpolated</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_quant_lib_1_1_date.html">Date</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a4d2947bb4dfc8876059b405b16acfb21">baseDate</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespace_quant_lib.html#a4f78b18a4dd1a979eb78b4e1e8ac1503">Time</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a8a682740f21c4992d9cabddbd61fbbbb">timeFromBase</a> (const <a class="el" href="class_quant_lib_1_1_date.html">Date</a> &amp;date, const <a class="el" href="class_quant_lib_1_1_period.html">Period</a> &amp;obsLag=<a class="el" href="class_quant_lib_1_1_period.html">Period</a>(-1, <a class="el" href="namespace_quant_lib.html#a6cdac5e2dae1e972076cc8e3302e4ad3ac2d73aad1a6496a6481563e7b5e62b36">Days</a>)) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">base date will be in the past because of observation lag  <a href="#a8a682740f21c4992d9cabddbd61fbbbb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespace_quant_lib.html#ae3abfa256de5aa2b506ab6bda014e4dc">Volatility</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a735227a7497f194b06f1e581e425471d">baseLevel</a> () const </td></tr>
<tr><td colspan="2"><div class="groupHeader">Limits</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a99ac79556adb48c8fd746068681e2419">minStrike</a> () const =0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">the minimum strike for which the term structure can return vols  <a href="#a99ac79556adb48c8fd746068681e2419"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a4af0b2232d14a7f16a3b07c4b9c81e31">maxStrike</a> () const =0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">the maximum strike for which the term structure can return vols  <a href="#a4af0b2232d14a7f16a3b07c4b9c81e31"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#aac93dfdbb57ef047f6adcf8e86c74e4c">checkRange</a> (const <a class="el" href="class_quant_lib_1_1_date.html">Date</a> &amp;, <a class="el" href="namespace_quant_lib.html#a919ba3567cc89fca373f8d6b8e80126b">Rate</a> strike, <a class="el" href="classbool.html">bool</a> extrapolate) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a3e98d9ead569f555c26351088b832e89">checkRange</a> (<a class="el" href="namespace_quant_lib.html#a4f78b18a4dd1a979eb78b4e1e8ac1503">Time</a>, <a class="el" href="namespace_quant_lib.html#a919ba3567cc89fca373f8d6b8e80126b">Rate</a> strike, <a class="el" href="classbool.html">bool</a> extrapolate) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespace_quant_lib.html#ae3abfa256de5aa2b506ab6bda014e4dc">Volatility</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a5befe35dc814920ed19b6ed4408cff14">volatilityImpl</a> (<a class="el" href="namespace_quant_lib.html#a4f78b18a4dd1a979eb78b4e1e8ac1503">Time</a> length, <a class="el" href="namespace_quant_lib.html#a919ba3567cc89fca373f8d6b8e80126b">Rate</a> strike) const =0</td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_quant_lib.html#ae3abfa256de5aa2b506ab6bda014e4dc">Volatility</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a89165dac8bf5277ab083562de2bfd207">baseLevel_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_quant_lib_1_1_period.html">Period</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a952d0adaf63e83c17244717e05e07fb0">observationLag_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_quant_lib.html#abfa020992bcf412e2bc99f56d4381b4a">Frequency</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a8e01cd481367c8c8600400c120906508">frequency_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#addc21489d99e39ff26ba561025447cff">indexIsInterpolated_</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>zero inflation (i.e. CPI/RPI/HICP/etc.) volatility structures </p>
<p>Abstract interface. <a class="el" href="struct_quant_lib_1_1_c_p_i.html">CPI</a> volatility is always with respect to some base date. Also deal with lagged observations of an index with a (usually different) availability lag. </p>

<p>Definition at line <a class="el" href="cpivolatilitystructure_8hpp_source.html#l00036">36</a> of file <a class="el" href="cpivolatilitystructure_8hpp_source.html">cpivolatilitystructure.hpp</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a7c2421be99ba8dd24bc5a4facad8c62c"></a><!-- doxytag: member="QuantLib::CPIVolatilitySurface::CPIVolatilitySurface" ref="a7c2421be99ba8dd24bc5a4facad8c62c" args="(Natural settlementDays, const Calendar &amp;, BusinessDayConvention bdc, const DayCounter &amp;dc, const Period &amp;observationLag, Frequency frequency, bool indexIsInterpolated)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a7c2421be99ba8dd24bc5a4facad8c62c">QuantLib::CPIVolatilitySurface::CPIVolatilitySurface</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a9adc2615d630d6006896b3402b09b03b">Natural</a>&#160;</td>
          <td class="paramname"><em>settlementDays</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_quant_lib_1_1_calendar.html">Calendar</a> &amp;&#160;</td>
          <td class="paramname"><em>cal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#ac95a4b5bc8017f1eb4ad0b54a9af3881">BusinessDayConvention</a>&#160;</td>
          <td class="paramname"><em>bdc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_quant_lib_1_1_day_counter.html">DayCounter</a> &amp;&#160;</td>
          <td class="paramname"><em>dc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_quant_lib_1_1_period.html">Period</a> &amp;&#160;</td>
          <td class="paramname"><em>observationLag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#abfa020992bcf412e2bc99f56d4381b4a">Frequency</a>&#160;</td>
          <td class="paramname"><em>frequency</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>indexIsInterpolated</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>calculates the reference date based on the global evaluation date. </p>

<p>Definition at line <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00025">25</a> of file <a class="el" href="cpivolatilitystructure_8cpp_source.html">cpivolatilitystructure.cpp</a>.</p>
<div class="fragment"><pre class="fragment">    : <a class="code" href="class_quant_lib_1_1_volatility_term_structure.html#ad93fad721c0b435a67c34fc0e9fe6dbf">VolatilityTermStructure</a>(<a class="code" href="class_quant_lib_1_1_term_structure.html#af3f3aa53df413306cabf64ec163fe322" title="the settlementDays used for reference date calculation">settlementDays</a>, cal, bdc, dc),
      <a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a89165dac8bf5277ab083562de2bfd207">baseLevel_</a>(Null&lt;Volatility&gt;()), <a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a952d0adaf63e83c17244717e05e07fb0">observationLag_</a>(<a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a79d30b7495a650dcafe0804527e1860c">observationLag</a>),
      <a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a8e01cd481367c8c8600400c120906508">frequency_</a>(<a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a9192b39beabf3a25052706f5cf5d7f9d">frequency</a>), <a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#addc21489d99e39ff26ba561025447cff">indexIsInterpolated_</a>(indexIsInterpolated)
    {}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a4d2947bb4dfc8876059b405b16acfb21"></a><!-- doxytag: member="QuantLib::CPIVolatilitySurface::baseDate" ref="a4d2947bb4dfc8876059b405b16acfb21" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_quant_lib_1_1_date.html">Date</a> <a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a4d2947bb4dfc8876059b405b16acfb21">QuantLib::CPIVolatilitySurface::baseDate</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00038">38</a> of file <a class="el" href="cpivolatilitystructure_8cpp_source.html">cpivolatilitystructure.cpp</a>.</p>

<p>References <a class="el" href="cpivolatilitystructure_8hpp_source.html#l00098">frequency()</a>, <a class="el" href="cpivolatilitystructure_8hpp_source.html#l00099">indexIsInterpolated()</a>, <a class="el" href="inflationtermstructure_8cpp_source.html#l00283">QuantLib::inflationPeriod()</a>, <a class="el" href="cpivolatilitystructure_8hpp_source.html#l00097">observationLag()</a>, and <a class="el" href="termstructure_8cpp_source.html#l00048">QuantLib::TermStructure::referenceDate()</a>.</p>

<p>Referenced by <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00052">checkRange()</a>, and <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00114">timeFromBase()</a>.</p>
<div class="fragment"><pre class="fragment">                                              {
        <span class="comment">// Depends on interpolation, or not, of observed index</span>
        <span class="comment">// and observation lag with which it was built.</span>
        <span class="comment">// We want this to work even if the index does not</span>
        <span class="comment">// have a term structure.</span>
        <span class="keywordflow">if</span> (<a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a6fb3038a2636c4d7caa891f5832032bc">indexIsInterpolated</a>()) {
            <span class="keywordflow">return</span> <a class="code" href="class_quant_lib_1_1_term_structure.html#a287fd5cf456bd584c4f5e747f7aac69a" title="the date at which discount = 1.0 and/or variance = 0.0">referenceDate</a>() - <a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a79d30b7495a650dcafe0804527e1860c">observationLag</a>();
        } <span class="keywordflow">else</span> {
            <span class="keywordflow">return</span> <a class="code" href="namespace_quant_lib.html#a375f5896d4cba24bbe748bf6911e140d" title="utility function giving the inflation period for a given date">inflationPeriod</a>(<a class="code" href="class_quant_lib_1_1_term_structure.html#a287fd5cf456bd584c4f5e747f7aac69a" title="the date at which discount = 1.0 and/or variance = 0.0">referenceDate</a>() - <a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a79d30b7495a650dcafe0804527e1860c">observationLag</a>(),
                                   <a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a9192b39beabf3a25052706f5cf5d7f9d">frequency</a>()).first;
        }
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a735227a7497f194b06f1e581e425471d"></a><!-- doxytag: member="QuantLib::CPIVolatilitySurface::baseLevel" ref="a735227a7497f194b06f1e581e425471d" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespace_quant_lib.html#ae3abfa256de5aa2b506ab6bda014e4dc">Volatility</a> <a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a735227a7497f194b06f1e581e425471d">QuantLib::CPIVolatilitySurface::baseLevel</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpivolatilitystructure_8hpp_source.html#l00107">107</a> of file <a class="el" href="cpivolatilitystructure_8hpp_source.html">cpivolatilitystructure.hpp</a>.</p>

<p>References <a class="el" href="cpivolatilitystructure_8hpp_source.html#l00132">baseLevel_</a>, and <a class="el" href="errors_8hpp_source.html#l00086">QL_REQUIRE</a>.</p>
<div class="fragment"><pre class="fragment">                                             {
            <a class="code" href="errors_8hpp.html#a7a9bcab8006882bc7d5302a0861ab1a6" title="throw an error if the given pre-condition is not verified">QL_REQUIRE</a>(<a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a89165dac8bf5277ab083562de2bfd207">baseLevel_</a> != Null&lt;Volatility&gt;(),
                       <span class="stringliteral">&quot;Base volatility, for baseDate(), not set.&quot;</span>);
            <span class="keywordflow">return</span> <a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a89165dac8bf5277ab083562de2bfd207">baseLevel_</a>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="aac93dfdbb57ef047f6adcf8e86c74e4c"></a><!-- doxytag: member="QuantLib::CPIVolatilitySurface::checkRange" ref="aac93dfdbb57ef047f6adcf8e86c74e4c" args="(const Date &amp;, Rate strike, bool extrapolate) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#aac93dfdbb57ef047f6adcf8e86c74e4c">QuantLib::CPIVolatilitySurface::checkRange</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_quant_lib_1_1_date.html">Date</a> &amp;&#160;</td>
          <td class="paramname"><em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a919ba3567cc89fca373f8d6b8e80126b">Rate</a>&#160;</td>
          <td class="paramname"><em>strike</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>extrapolate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00052">52</a> of file <a class="el" href="cpivolatilitystructure_8cpp_source.html">cpivolatilitystructure.cpp</a>.</p>

<p>References <a class="el" href="extrapolation_8hpp_source.html#l00046">QuantLib::Extrapolator::allowsExtrapolation()</a>, <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00038">baseDate()</a>, <a class="el" href="class_quant_lib_1_1_term_structure.html#ae9af756bbddc15962711f77f514f08fa">QuantLib::TermStructure::maxDate()</a>, <a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a4af0b2232d14a7f16a3b07c4b9c81e31">maxStrike()</a>, <a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a99ac79556adb48c8fd746068681e2419">minStrike()</a>, and <a class="el" href="errors_8hpp_source.html#l00086">QL_REQUIRE</a>.</p>

<p>Referenced by <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00080">volatility()</a>.</p>
<div class="fragment"><pre class="fragment">                                                                  {
        <a class="code" href="errors_8hpp.html#a7a9bcab8006882bc7d5302a0861ab1a6" title="throw an error if the given pre-condition is not verified">QL_REQUIRE</a>(<a class="code" href="namespaceanonymous__namespace_02marketmodel_8cpp_03.html#a06d0bee201af9d379ec8f9563ecf7f66">d</a> &gt;= <a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a4d2947bb4dfc8876059b405b16acfb21">baseDate</a>(),
                   <span class="stringliteral">&quot;date (&quot;</span> &lt;&lt; <a class="code" href="namespaceanonymous__namespace_02marketmodel_8cpp_03.html#a06d0bee201af9d379ec8f9563ecf7f66">d</a> &lt;&lt; <span class="stringliteral">&quot;) is before base date&quot;</span>);
        <a class="code" href="errors_8hpp.html#a7a9bcab8006882bc7d5302a0861ab1a6" title="throw an error if the given pre-condition is not verified">QL_REQUIRE</a>(extrapolate || <a class="code" href="class_quant_lib_1_1_extrapolator.html#af530558781fdd515cc312b6d66611414" title="tells whether extrapolation is enabled">allowsExtrapolation</a>() || <a class="code" href="namespaceanonymous__namespace_02marketmodel_8cpp_03.html#a06d0bee201af9d379ec8f9563ecf7f66">d</a> &lt;= <a class="code" href="class_quant_lib_1_1_term_structure.html#ae9af756bbddc15962711f77f514f08fa" title="the latest date for which the curve can return values">maxDate</a>(),
                   <span class="stringliteral">&quot;date (&quot;</span> &lt;&lt; <a class="code" href="namespaceanonymous__namespace_02marketmodel_8cpp_03.html#a06d0bee201af9d379ec8f9563ecf7f66">d</a> &lt;&lt; <span class="stringliteral">&quot;) is past max curve date (&quot;</span>
                   &lt;&lt; <a class="code" href="class_quant_lib_1_1_term_structure.html#ae9af756bbddc15962711f77f514f08fa" title="the latest date for which the curve can return values">maxDate</a>() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);
        <a class="code" href="errors_8hpp.html#a7a9bcab8006882bc7d5302a0861ab1a6" title="throw an error if the given pre-condition is not verified">QL_REQUIRE</a>(extrapolate || <a class="code" href="class_quant_lib_1_1_extrapolator.html#af530558781fdd515cc312b6d66611414" title="tells whether extrapolation is enabled">allowsExtrapolation</a>() ||
                   (strike &gt;= <a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a99ac79556adb48c8fd746068681e2419" title="the minimum strike for which the term structure can return vols">minStrike</a>() &amp;&amp; strike &lt;= <a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a4af0b2232d14a7f16a3b07c4b9c81e31" title="the maximum strike for which the term structure can return vols">maxStrike</a>()),
                   <span class="stringliteral">&quot;strike (&quot;</span> &lt;&lt; strike &lt;&lt; <span class="stringliteral">&quot;) is outside the curve domain [&quot;</span>
                   &lt;&lt; <a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a99ac79556adb48c8fd746068681e2419" title="the minimum strike for which the term structure can return vols">minStrike</a>() &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; <a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a4af0b2232d14a7f16a3b07c4b9c81e31" title="the maximum strike for which the term structure can return vols">maxStrike</a>()&lt;&lt; <span class="stringliteral">&quot;]] at date = &quot;</span> &lt;&lt; <a class="code" href="namespaceanonymous__namespace_02marketmodel_8cpp_03.html#a06d0bee201af9d379ec8f9563ecf7f66">d</a>);
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a3e98d9ead569f555c26351088b832e89"></a><!-- doxytag: member="QuantLib::CPIVolatilitySurface::checkRange" ref="a3e98d9ead569f555c26351088b832e89" args="(Time, Rate strike, bool extrapolate) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#aac93dfdbb57ef047f6adcf8e86c74e4c">QuantLib::CPIVolatilitySurface::checkRange</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a4f78b18a4dd1a979eb78b4e1e8ac1503">Time</a>&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a919ba3567cc89fca373f8d6b8e80126b">Rate</a>&#160;</td>
          <td class="paramname"><em>strike</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>extrapolate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00066">66</a> of file <a class="el" href="cpivolatilitystructure_8cpp_source.html">cpivolatilitystructure.cpp</a>.</p>

<p>References <a class="el" href="extrapolation_8hpp_source.html#l00046">QuantLib::Extrapolator::allowsExtrapolation()</a>, <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00038">baseDate()</a>, <a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a4af0b2232d14a7f16a3b07c4b9c81e31">maxStrike()</a>, <a class="el" href="termstructure_8hpp_source.html#l00126">QuantLib::TermStructure::maxTime()</a>, <a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a99ac79556adb48c8fd746068681e2419">minStrike()</a>, <a class="el" href="errors_8hpp_source.html#l00086">QL_REQUIRE</a>, and <a class="el" href="termstructure_8hpp_source.html#l00140">QuantLib::TermStructure::timeFromReference()</a>.</p>
<div class="fragment"><pre class="fragment">                                                                  {
        <a class="code" href="errors_8hpp.html#a7a9bcab8006882bc7d5302a0861ab1a6" title="throw an error if the given pre-condition is not verified">QL_REQUIRE</a>(t &gt;= <a class="code" href="class_quant_lib_1_1_term_structure.html#ad8a000f7713f39bf7a49de26291917d7" title="date/time conversion">timeFromReference</a>(<a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a4d2947bb4dfc8876059b405b16acfb21">baseDate</a>()),
                   <span class="stringliteral">&quot;time (&quot;</span> &lt;&lt; t &lt;&lt; <span class="stringliteral">&quot;) is before base date&quot;</span>);
        <a class="code" href="errors_8hpp.html#a7a9bcab8006882bc7d5302a0861ab1a6" title="throw an error if the given pre-condition is not verified">QL_REQUIRE</a>(extrapolate || <a class="code" href="class_quant_lib_1_1_extrapolator.html#af530558781fdd515cc312b6d66611414" title="tells whether extrapolation is enabled">allowsExtrapolation</a>() || t &lt;= <a class="code" href="class_quant_lib_1_1_term_structure.html#aff493f8e06fcc2d2c81569d3858d8539" title="the latest time for which the curve can return values">maxTime</a>(),
                   <span class="stringliteral">&quot;time (&quot;</span> &lt;&lt; t &lt;&lt; <span class="stringliteral">&quot;) is past max curve time (&quot;</span>
                   &lt;&lt; <a class="code" href="class_quant_lib_1_1_term_structure.html#aff493f8e06fcc2d2c81569d3858d8539" title="the latest time for which the curve can return values">maxTime</a>() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);
        <a class="code" href="errors_8hpp.html#a7a9bcab8006882bc7d5302a0861ab1a6" title="throw an error if the given pre-condition is not verified">QL_REQUIRE</a>(extrapolate || <a class="code" href="class_quant_lib_1_1_extrapolator.html#af530558781fdd515cc312b6d66611414" title="tells whether extrapolation is enabled">allowsExtrapolation</a>() ||
                   (strike &gt;= <a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a99ac79556adb48c8fd746068681e2419" title="the minimum strike for which the term structure can return vols">minStrike</a>() &amp;&amp; strike &lt;= <a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a4af0b2232d14a7f16a3b07c4b9c81e31" title="the maximum strike for which the term structure can return vols">maxStrike</a>()),
                   <span class="stringliteral">&quot;strike (&quot;</span> &lt;&lt; strike &lt;&lt; <span class="stringliteral">&quot;) is outside the curve domain [&quot;</span>
                   &lt;&lt; <a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a99ac79556adb48c8fd746068681e2419" title="the minimum strike for which the term structure can return vols">minStrike</a>() &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; <a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a4af0b2232d14a7f16a3b07c4b9c81e31" title="the maximum strike for which the term structure can return vols">maxStrike</a>()&lt;&lt; <span class="stringliteral">&quot;] at time = &quot;</span> &lt;&lt; t);
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a9192b39beabf3a25052706f5cf5d7f9d"></a><!-- doxytag: member="QuantLib::CPIVolatilitySurface::frequency" ref="a9192b39beabf3a25052706f5cf5d7f9d" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespace_quant_lib.html#abfa020992bcf412e2bc99f56d4381b4a">Frequency</a> <a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a9192b39beabf3a25052706f5cf5d7f9d">QuantLib::CPIVolatilitySurface::frequency</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpivolatilitystructure_8hpp_source.html#l00098">98</a> of file <a class="el" href="cpivolatilitystructure_8hpp_source.html">cpivolatilitystructure.hpp</a>.</p>

<p>References <a class="el" href="cpivolatilitystructure_8hpp_source.html#l00135">frequency_</a>.</p>

<p>Referenced by <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00038">baseDate()</a>, <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00114">timeFromBase()</a>, and <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00080">volatility()</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a8e01cd481367c8c8600400c120906508">frequency_</a>; }
</pre></div>
</div>
</div>
<a class="anchor" id="a6fb3038a2636c4d7caa891f5832032bc"></a><!-- doxytag: member="QuantLib::CPIVolatilitySurface::indexIsInterpolated" ref="a6fb3038a2636c4d7caa891f5832032bc" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classbool.html">bool</a> <a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a6fb3038a2636c4d7caa891f5832032bc">QuantLib::CPIVolatilitySurface::indexIsInterpolated</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpivolatilitystructure_8hpp_source.html#l00099">99</a> of file <a class="el" href="cpivolatilitystructure_8hpp_source.html">cpivolatilitystructure.hpp</a>.</p>

<p>References <a class="el" href="cpivolatilitystructure_8hpp_source.html#l00136">indexIsInterpolated_</a>.</p>

<p>Referenced by <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00038">baseDate()</a>, <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00114">timeFromBase()</a>, and <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00080">volatility()</a>.</p>
<div class="fragment"><pre class="fragment">                                                 {
            <span class="keywordflow">return</span> <a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#addc21489d99e39ff26ba561025447cff">indexIsInterpolated_</a>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a4af0b2232d14a7f16a3b07c4b9c81e31"></a><!-- doxytag: member="QuantLib::CPIVolatilitySurface::maxStrike" ref="a4af0b2232d14a7f16a3b07c4b9c81e31" args="() const =0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> <a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a4af0b2232d14a7f16a3b07c4b9c81e31">QuantLib::CPIVolatilitySurface::maxStrike</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>the maximum strike for which the term structure can return vols </p>

<p>Implements <a class="el" href="class_quant_lib_1_1_volatility_term_structure.html#a31f164f3562124b7de3ea6caf0af08a9">QuantLib::VolatilityTermStructure</a>.</p>

<p>Implemented in <a class="el" href="class_quant_lib_1_1_constant_c_p_i_volatility.html#afd3e3bdf5b3585759296e91618464e5c">QuantLib::ConstantCPIVolatility</a>.</p>

<p>Referenced by <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00052">checkRange()</a>.</p>

</div>
</div>
<a class="anchor" id="a99ac79556adb48c8fd746068681e2419"></a><!-- doxytag: member="QuantLib::CPIVolatilitySurface::minStrike" ref="a99ac79556adb48c8fd746068681e2419" args="() const =0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> <a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a99ac79556adb48c8fd746068681e2419">QuantLib::CPIVolatilitySurface::minStrike</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>the minimum strike for which the term structure can return vols </p>

<p>Implements <a class="el" href="class_quant_lib_1_1_volatility_term_structure.html#a71a5c8f0fb8d9d478126f79d975cb26f">QuantLib::VolatilityTermStructure</a>.</p>

<p>Implemented in <a class="el" href="class_quant_lib_1_1_constant_c_p_i_volatility.html#a94662599987085bc96c04323190f058d">QuantLib::ConstantCPIVolatility</a>.</p>

<p>Referenced by <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00052">checkRange()</a>.</p>

</div>
</div>
<a class="anchor" id="a79d30b7495a650dcafe0804527e1860c"></a><!-- doxytag: member="QuantLib::CPIVolatilitySurface::observationLag" ref="a79d30b7495a650dcafe0804527e1860c" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="class_quant_lib_1_1_period.html">Period</a> <a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a79d30b7495a650dcafe0804527e1860c">QuantLib::CPIVolatilitySurface::observationLag</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The term structure observes with a lag that is usually different from the availability lag of the index. An inflation rate is given, by default, for the maturity requested assuming this lag. </p>

<p>Definition at line <a class="el" href="cpivolatilitystructure_8hpp_source.html#l00097">97</a> of file <a class="el" href="cpivolatilitystructure_8hpp_source.html">cpivolatilitystructure.hpp</a>.</p>

<p>References <a class="el" href="cpivolatilitystructure_8hpp_source.html#l00134">observationLag_</a>.</p>

<p>Referenced by <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00038">baseDate()</a>, <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00114">timeFromBase()</a>, and <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00080">volatility()</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a952d0adaf63e83c17244717e05e07fb0">observationLag_</a>; }
</pre></div>
</div>
</div>
<a class="anchor" id="a8a682740f21c4992d9cabddbd61fbbbb"></a><!-- doxytag: member="QuantLib::CPIVolatilitySurface::timeFromBase" ref="a8a682740f21c4992d9cabddbd61fbbbb" args="(const Date &amp;date, const Period &amp;obsLag=Period(&#45;1, Days)) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_quant_lib.html#a4f78b18a4dd1a979eb78b4e1e8ac1503">Time</a> <a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a8a682740f21c4992d9cabddbd61fbbbb">QuantLib::CPIVolatilitySurface::timeFromBase</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_quant_lib_1_1_date.html">Date</a> &amp;&#160;</td>
          <td class="paramname"><em>date</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_quant_lib_1_1_period.html">Period</a> &amp;&#160;</td>
          <td class="paramname"><em>obsLag</em> = <code><a class="el" href="class_quant_lib_1_1_period.html">Period</a>(-1,<a class="el" href="namespace_quant_lib.html#a6cdac5e2dae1e972076cc8e3302e4ad3ac2d73aad1a6496a6481563e7b5e62b36">Days</a>)</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>base date will be in the past because of observation lag </p>
<p>needed for total variance calculations </p>

<p>Definition at line <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00114">114</a> of file <a class="el" href="cpivolatilitystructure_8cpp_source.html">cpivolatilitystructure.cpp</a>.</p>

<p>References <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00038">baseDate()</a>, <a class="el" href="termstructure_8hpp_source.html#l00122">QuantLib::TermStructure::dayCounter()</a>, <a class="el" href="timeunit_8hpp_source.html#l00037">QuantLib::Days</a>, <a class="el" href="cpivolatilitystructure_8hpp_source.html#l00098">frequency()</a>, <a class="el" href="cpivolatilitystructure_8hpp_source.html#l00099">indexIsInterpolated()</a>, <a class="el" href="inflationtermstructure_8cpp_source.html#l00283">QuantLib::inflationPeriod()</a>, <a class="el" href="cpivolatilitystructure_8hpp_source.html#l00097">observationLag()</a>, and <a class="el" href="daycounter_8hpp_source.html#l00126">QuantLib::DayCounter::yearFraction()</a>.</p>

<p>Referenced by <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00136">totalVariance()</a>.</p>
<div class="fragment"><pre class="fragment">                                                                        {
        Period useLag = obsLag;
        <span class="keywordflow">if</span> (obsLag==Period(-1,<a class="code" href="namespace_quant_lib.html#a6cdac5e2dae1e972076cc8e3302e4ad3ac2d73aad1a6496a6481563e7b5e62b36">Days</a>)) {
            useLag = <a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a79d30b7495a650dcafe0804527e1860c">observationLag</a>();
        }

        Date useDate;
        <span class="keywordflow">if</span> (<a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a6fb3038a2636c4d7caa891f5832032bc">indexIsInterpolated</a>()) {
            useDate = maturityDate - useLag;
        } <span class="keywordflow">else</span> {
            useDate = <a class="code" href="namespace_quant_lib.html#a375f5896d4cba24bbe748bf6911e140d" title="utility function giving the inflation period for a given date">inflationPeriod</a>(maturityDate - useLag,
                                      <a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a9192b39beabf3a25052706f5cf5d7f9d">frequency</a>()).first;
        }

        <span class="comment">// This assumes that the inflation term structure starts</span>
        <span class="comment">// as late as possible given the inflation index definition,</span>
        <span class="comment">// which is the usual case.</span>
        <span class="keywordflow">return</span> <a class="code" href="class_quant_lib_1_1_term_structure.html#ac2ae1a909ad5ae4fb28eec00c19d43ee" title="the day counter used for date/time conversion">dayCounter</a>().<a class="code" href="class_quant_lib_1_1_day_counter.html#aba442c829252ee786e1b4ea3d0f04bd9" title="Returns the period between two dates as a fraction of year.">yearFraction</a>(<a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a4d2947bb4dfc8876059b405b16acfb21">baseDate</a>(), useDate);
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a411647a6e680e75f568a10bfeb2639c0"></a><!-- doxytag: member="QuantLib::CPIVolatilitySurface::totalVariance" ref="a411647a6e680e75f568a10bfeb2639c0" args="(const Date &amp;exerciseDate, Rate strike, const Period &amp;obsLag=Period(&#45;1, Days), bool extrapolate=false) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_quant_lib.html#ae3abfa256de5aa2b506ab6bda014e4dc">Volatility</a> <a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a411647a6e680e75f568a10bfeb2639c0">QuantLib::CPIVolatilitySurface::totalVariance</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_quant_lib_1_1_date.html">Date</a> &amp;&#160;</td>
          <td class="paramname"><em>exerciseDate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a919ba3567cc89fca373f8d6b8e80126b">Rate</a>&#160;</td>
          <td class="paramname"><em>strike</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_quant_lib_1_1_period.html">Period</a> &amp;&#160;</td>
          <td class="paramname"><em>obsLag</em> = <code><a class="el" href="class_quant_lib_1_1_period.html">Period</a>(-1,<a class="el" href="namespace_quant_lib.html#a6cdac5e2dae1e972076cc8e3302e4ad3ac2d73aad1a6496a6481563e7b5e62b36">Days</a>)</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>extrapolate</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the total integrated variance for a given exercise date and strike rate.</p>
<p>Total integrated variance is useful because it scales out t for the optionlet pricing formulae. Note that it is called "total" because the surface does not know whether it represents Black, Bachelier or Displaced Diffusion variance. These are virtual so alternate connections between const vol and total var are possible. </p>

<p>Definition at line <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00136">136</a> of file <a class="el" href="cpivolatilitystructure_8cpp_source.html">cpivolatilitystructure.cpp</a>.</p>

<p>References <a class="el" href="quantlibbenchmark_8cpp_source.html#l00150">anonymous_namespace{quantlibbenchmark.cpp}::t</a>, <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00114">timeFromBase()</a>, and <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00080">volatility()</a>.</p>

<p>Referenced by <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00146">totalVariance()</a>.</p>
<div class="fragment"><pre class="fragment">                                                                           {
        <a class="code" href="namespace_quant_lib.html#ae3abfa256de5aa2b506ab6bda014e4dc" title="volatility">Volatility</a> vol = <a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#aa79c04bff9725bd77c2bbb4858807b2d" title="Returns the volatility for a given maturity date and strike rate.">volatility</a>(maturityDate, strike, obsLag, extrapolate);
        <a class="code" href="class_time.html">Time</a> <a class="code" href="namespaceanonymous__namespace_02quantlibbenchmark_8cpp_03.html#a7a969063fde0030bd36b46055e824c34">t</a> = <a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a8a682740f21c4992d9cabddbd61fbbbb" title="base date will be in the past because of observation lag">timeFromBase</a>(maturityDate, obsLag);
        <span class="keywordflow">return</span> vol*vol*<a class="code" href="namespaceanonymous__namespace_02quantlibbenchmark_8cpp_03.html#a7a969063fde0030bd36b46055e824c34">t</a>;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a31a3520f78a24ff12c2133c56cb6cb05"></a><!-- doxytag: member="QuantLib::CPIVolatilitySurface::totalVariance" ref="a31a3520f78a24ff12c2133c56cb6cb05" args="(const Period &amp;optionTenor, Rate strike, const Period &amp;obsLag=Period(&#45;1, Days), bool extrapolate=false) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_quant_lib.html#ae3abfa256de5aa2b506ab6bda014e4dc">Volatility</a> <a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a411647a6e680e75f568a10bfeb2639c0">QuantLib::CPIVolatilitySurface::totalVariance</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_quant_lib_1_1_period.html">Period</a> &amp;&#160;</td>
          <td class="paramname"><em>optionTenor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a919ba3567cc89fca373f8d6b8e80126b">Rate</a>&#160;</td>
          <td class="paramname"><em>strike</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_quant_lib_1_1_period.html">Period</a> &amp;&#160;</td>
          <td class="paramname"><em>obsLag</em> = <code><a class="el" href="class_quant_lib_1_1_period.html">Period</a>(-1,<a class="el" href="namespace_quant_lib.html#a6cdac5e2dae1e972076cc8e3302e4ad3ac2d73aad1a6496a6481563e7b5e62b36">Days</a>)</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>extrapolate</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>returns the total integrated variance for a given option tenor and strike rate. </p>

<p>Definition at line <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00146">146</a> of file <a class="el" href="cpivolatilitystructure_8cpp_source.html">cpivolatilitystructure.cpp</a>.</p>

<p>References <a class="el" href="voltermstructure_8hpp_source.html#l00093">QuantLib::VolatilityTermStructure::optionDateFromTenor()</a>, and <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00136">totalVariance()</a>.</p>
<div class="fragment"><pre class="fragment">                                                                      {
        Date maturityDate = <a class="code" href="class_quant_lib_1_1_volatility_term_structure.html#add8b7e8a1102270b9f7b5d5a6d75e323" title="period/date conversion">optionDateFromTenor</a>(tenor);
        <span class="keywordflow">return</span> <a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a411647a6e680e75f568a10bfeb2639c0">totalVariance</a>(maturityDate, strike, obsLag, extrap);
    }
</pre></div>
</div>
</div>
<a class="anchor" id="aa79c04bff9725bd77c2bbb4858807b2d"></a><!-- doxytag: member="QuantLib::CPIVolatilitySurface::volatility" ref="aa79c04bff9725bd77c2bbb4858807b2d" args="(const Date &amp;maturityDate, Rate strike, const Period &amp;obsLag=Period(&#45;1, Days), bool extrapolate=false) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_quant_lib.html#ae3abfa256de5aa2b506ab6bda014e4dc">Volatility</a> <a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#aa79c04bff9725bd77c2bbb4858807b2d">QuantLib::CPIVolatilitySurface::volatility</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_quant_lib_1_1_date.html">Date</a> &amp;&#160;</td>
          <td class="paramname"><em>maturityDate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a919ba3567cc89fca373f8d6b8e80126b">Rate</a>&#160;</td>
          <td class="paramname"><em>strike</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_quant_lib_1_1_period.html">Period</a> &amp;&#160;</td>
          <td class="paramname"><em>obsLag</em> = <code><a class="el" href="class_quant_lib_1_1_period.html">Period</a>(-1,<a class="el" href="namespace_quant_lib.html#a6cdac5e2dae1e972076cc8e3302e4ad3ac2d73aad1a6496a6481563e7b5e62b36">Days</a>)</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>extrapolate</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the volatility for a given maturity date and strike rate. </p>
<p>by default, inflation is observed with the lag of the term structure.</p>
<p>Because inflation is highly linked to dates (for interpolation, periods, etc) time-based overload of the methods are not provided. </p>

<p>Definition at line <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00080">80</a> of file <a class="el" href="cpivolatilitystructure_8cpp_source.html">cpivolatilitystructure.cpp</a>.</p>

<p>References <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00052">checkRange()</a>, <a class="el" href="timeunit_8hpp_source.html#l00037">QuantLib::Days</a>, <a class="el" href="cpivolatilitystructure_8hpp_source.html#l00098">frequency()</a>, <a class="el" href="cpivolatilitystructure_8hpp_source.html#l00099">indexIsInterpolated()</a>, <a class="el" href="inflationtermstructure_8cpp_source.html#l00283">QuantLib::inflationPeriod()</a>, <a class="el" href="cpivolatilitystructure_8hpp_source.html#l00097">observationLag()</a>, <a class="el" href="quantlibbenchmark_8cpp_source.html#l00150">anonymous_namespace{quantlibbenchmark.cpp}::t</a>, <a class="el" href="termstructure_8hpp_source.html#l00140">QuantLib::TermStructure::timeFromReference()</a>, and <a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a5befe35dc814920ed19b6ed4408cff14">volatilityImpl()</a>.</p>

<p>Referenced by <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00136">totalVariance()</a>, and <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00104">volatility()</a>.</p>
<div class="fragment"><pre class="fragment">                                                                        {

        Period useLag = obsLag;
        <span class="keywordflow">if</span> (obsLag==Period(-1,<a class="code" href="namespace_quant_lib.html#a6cdac5e2dae1e972076cc8e3302e4ad3ac2d73aad1a6496a6481563e7b5e62b36">Days</a>)) {
            useLag = <a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a79d30b7495a650dcafe0804527e1860c">observationLag</a>();
        }

        <span class="keywordflow">if</span> (<a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a6fb3038a2636c4d7caa891f5832032bc">indexIsInterpolated</a>()) {
            <a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#aac93dfdbb57ef047f6adcf8e86c74e4c">checkRange</a>(maturityDate-useLag, strike, extrapolate);
            <a class="code" href="class_time.html">Time</a> <a class="code" href="namespaceanonymous__namespace_02quantlibbenchmark_8cpp_03.html#a7a969063fde0030bd36b46055e824c34">t</a> = <a class="code" href="class_quant_lib_1_1_term_structure.html#ad8a000f7713f39bf7a49de26291917d7" title="date/time conversion">timeFromReference</a>(maturityDate-useLag);
            <span class="keywordflow">return</span> <a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a5befe35dc814920ed19b6ed4408cff14">volatilityImpl</a>(t,strike);
        } <span class="keywordflow">else</span> {
            std::pair&lt;Date,Date&gt; dd =
                <a class="code" href="namespace_quant_lib.html#a375f5896d4cba24bbe748bf6911e140d" title="utility function giving the inflation period for a given date">inflationPeriod</a>(maturityDate-useLag, <a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a9192b39beabf3a25052706f5cf5d7f9d">frequency</a>());
            <a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#aac93dfdbb57ef047f6adcf8e86c74e4c">checkRange</a>(dd.first, strike, extrapolate);
            <a class="code" href="class_time.html">Time</a> <a class="code" href="namespaceanonymous__namespace_02quantlibbenchmark_8cpp_03.html#a7a969063fde0030bd36b46055e824c34">t</a> = <a class="code" href="class_quant_lib_1_1_term_structure.html#ad8a000f7713f39bf7a49de26291917d7" title="date/time conversion">timeFromReference</a>(dd.first);
            <span class="keywordflow">return</span> <a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a5befe35dc814920ed19b6ed4408cff14">volatilityImpl</a>(t,strike);
        }
    }
</pre></div>
</div>
</div>
<a class="anchor" id="acc858925f7b5f376e44c269213909c4c"></a><!-- doxytag: member="QuantLib::CPIVolatilitySurface::volatility" ref="acc858925f7b5f376e44c269213909c4c" args="(const Period &amp;optionTenor, Rate strike, const Period &amp;obsLag=Period(&#45;1, Days), bool extrapolate=false) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_quant_lib.html#ae3abfa256de5aa2b506ab6bda014e4dc">Volatility</a> <a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#aa79c04bff9725bd77c2bbb4858807b2d">QuantLib::CPIVolatilitySurface::volatility</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_quant_lib_1_1_period.html">Period</a> &amp;&#160;</td>
          <td class="paramname"><em>optionTenor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a919ba3567cc89fca373f8d6b8e80126b">Rate</a>&#160;</td>
          <td class="paramname"><em>strike</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_quant_lib_1_1_period.html">Period</a> &amp;&#160;</td>
          <td class="paramname"><em>obsLag</em> = <code><a class="el" href="class_quant_lib_1_1_period.html">Period</a>(-1,<a class="el" href="namespace_quant_lib.html#a6cdac5e2dae1e972076cc8e3302e4ad3ac2d73aad1a6496a6481563e7b5e62b36">Days</a>)</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>extrapolate</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>returns the volatility for a given option tenor and strike rate </p>

<p>Definition at line <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00104">104</a> of file <a class="el" href="cpivolatilitystructure_8cpp_source.html">cpivolatilitystructure.cpp</a>.</p>

<p>References <a class="el" href="voltermstructure_8hpp_source.html#l00093">QuantLib::VolatilityTermStructure::optionDateFromTenor()</a>, and <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00080">volatility()</a>.</p>
<div class="fragment"><pre class="fragment">                                                                        {
        Date maturityDate = <a class="code" href="class_quant_lib_1_1_volatility_term_structure.html#add8b7e8a1102270b9f7b5d5a6d75e323" title="period/date conversion">optionDateFromTenor</a>(optionTenor);
        <span class="keywordflow">return</span> <a class="code" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#aa79c04bff9725bd77c2bbb4858807b2d" title="Returns the volatility for a given maturity date and strike rate.">volatility</a>(maturityDate, strike, obsLag, extrapolate);
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a5befe35dc814920ed19b6ed4408cff14"></a><!-- doxytag: member="QuantLib::CPIVolatilitySurface::volatilityImpl" ref="a5befe35dc814920ed19b6ed4408cff14" args="(Time length, Rate strike) const =0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespace_quant_lib.html#ae3abfa256de5aa2b506ab6bda014e4dc">Volatility</a> <a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a5befe35dc814920ed19b6ed4408cff14">QuantLib::CPIVolatilitySurface::volatilityImpl</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a4f78b18a4dd1a979eb78b4e1e8ac1503">Time</a>&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a919ba3567cc89fca373f8d6b8e80126b">Rate</a>&#160;</td>
          <td class="paramname"><em>strike</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [protected, pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Implements the actual volatility surface calculation in derived classes e.g. bilinear interpolation. N.B. does not derive the surface. </p>

<p>Implemented in <a class="el" href="class_quant_lib_1_1_constant_c_p_i_volatility.html#a2ab2c20f9073f1c863518c596ddc04ee">QuantLib::ConstantCPIVolatility</a>.</p>

<p>Referenced by <a class="el" href="cpivolatilitystructure_8cpp_source.html#l00080">volatility()</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a89165dac8bf5277ab083562de2bfd207"></a><!-- doxytag: member="QuantLib::CPIVolatilitySurface::baseLevel_" ref="a89165dac8bf5277ab083562de2bfd207" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_quant_lib.html#ae3abfa256de5aa2b506ab6bda014e4dc">Volatility</a> <a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a89165dac8bf5277ab083562de2bfd207">QuantLib::CPIVolatilitySurface::baseLevel_</a><code> [mutable, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpivolatilitystructure_8hpp_source.html#l00132">132</a> of file <a class="el" href="cpivolatilitystructure_8hpp_source.html">cpivolatilitystructure.hpp</a>.</p>

<p>Referenced by <a class="el" href="cpivolatilitystructure_8hpp_source.html#l00107">baseLevel()</a>.</p>

</div>
</div>
<a class="anchor" id="a8e01cd481367c8c8600400c120906508"></a><!-- doxytag: member="QuantLib::CPIVolatilitySurface::frequency_" ref="a8e01cd481367c8c8600400c120906508" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_quant_lib.html#abfa020992bcf412e2bc99f56d4381b4a">Frequency</a> <a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a8e01cd481367c8c8600400c120906508">QuantLib::CPIVolatilitySurface::frequency_</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpivolatilitystructure_8hpp_source.html#l00135">135</a> of file <a class="el" href="cpivolatilitystructure_8hpp_source.html">cpivolatilitystructure.hpp</a>.</p>

<p>Referenced by <a class="el" href="cpivolatilitystructure_8hpp_source.html#l00098">frequency()</a>.</p>

</div>
</div>
<a class="anchor" id="addc21489d99e39ff26ba561025447cff"></a><!-- doxytag: member="QuantLib::CPIVolatilitySurface::indexIsInterpolated_" ref="addc21489d99e39ff26ba561025447cff" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> <a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#addc21489d99e39ff26ba561025447cff">QuantLib::CPIVolatilitySurface::indexIsInterpolated_</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpivolatilitystructure_8hpp_source.html#l00136">136</a> of file <a class="el" href="cpivolatilitystructure_8hpp_source.html">cpivolatilitystructure.hpp</a>.</p>

<p>Referenced by <a class="el" href="cpivolatilitystructure_8hpp_source.html#l00099">indexIsInterpolated()</a>.</p>

</div>
</div>
<a class="anchor" id="a952d0adaf63e83c17244717e05e07fb0"></a><!-- doxytag: member="QuantLib::CPIVolatilitySurface::observationLag_" ref="a952d0adaf63e83c17244717e05e07fb0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_quant_lib_1_1_period.html">Period</a> <a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html#a952d0adaf63e83c17244717e05e07fb0">QuantLib::CPIVolatilitySurface::observationLag_</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpivolatilitystructure_8hpp_source.html#l00134">134</a> of file <a class="el" href="cpivolatilitystructure_8hpp_source.html">cpivolatilitystructure.hpp</a>.</p>

<p>Referenced by <a class="el" href="cpivolatilitystructure_8hpp_source.html#l00097">observationLag()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/deriversatile/QuantLib/QuantLibQt/ql/termstructures/volatility/inflation/<a class="el" href="cpivolatilitystructure_8hpp_source.html">cpivolatilitystructure.hpp</a></li>
<li>/home/deriversatile/QuantLib/QuantLibQt/ql/termstructures/volatility/inflation/<a class="el" href="cpivolatilitystructure_8cpp_source.html">cpivolatilitystructure.cpp</a></li>
</ul>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespace_quant_lib.html">QuantLib</a>      </li>
      <li class="navelem"><a class="el" href="class_quant_lib_1_1_c_p_i_volatility_surface.html">CPIVolatilitySurface</a>      </li>

    <li class="footer">Generated on Sat Aug 25 2012 13:51:15 for QuantLib by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
