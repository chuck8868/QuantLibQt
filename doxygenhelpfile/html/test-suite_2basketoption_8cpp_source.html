<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>QuantLib: /home/deriversatile/QuantLib/QuantLibQt/test-suite/basketoption.cpp Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">QuantLib
   &#160;<span id="projectnumber">1.3</span>
   </div>
   <div id="projectbrief">ql1-3</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('test-suite_2basketoption_8cpp.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">basketoption.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="test-suite_2basketoption_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* -*- mode: c++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- */</span>
<a name="l00002"></a>00002 
<a name="l00003"></a>00003 <span class="comment">/*</span>
<a name="l00004"></a>00004 <span class="comment"> Copyright (C) 2003, 2004, 2005, 2008 StatPro Italia srl</span>
<a name="l00005"></a>00005 <span class="comment"> Copyright (C) 2004 Ferdinando Ametrano</span>
<a name="l00006"></a>00006 <span class="comment"> Copyright (C) 2004 Neil Firth</span>
<a name="l00007"></a>00007 <span class="comment"></span>
<a name="l00008"></a>00008 <span class="comment"> This file is part of QuantLib, a free-software/open-source library</span>
<a name="l00009"></a>00009 <span class="comment"> for financial quantitative analysts and developers - http://quantlib.org/</span>
<a name="l00010"></a>00010 <span class="comment"></span>
<a name="l00011"></a>00011 <span class="comment"> QuantLib is free software: you can redistribute it and/or modify it</span>
<a name="l00012"></a>00012 <span class="comment"> under the terms of the QuantLib license.  You should have received a</span>
<a name="l00013"></a>00013 <span class="comment"> copy of the license along with this program; if not, please email</span>
<a name="l00014"></a>00014 <span class="comment"> &lt;quantlib-dev@lists.sf.net&gt;. The license is also available online at</span>
<a name="l00015"></a>00015 <span class="comment"> &lt;http://quantlib.org/license.shtml&gt;.</span>
<a name="l00016"></a>00016 <span class="comment"></span>
<a name="l00017"></a>00017 <span class="comment"> This program is distributed in the hope that it will be useful, but WITHOUT</span>
<a name="l00018"></a>00018 <span class="comment"> ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span>
<a name="l00019"></a>00019 <span class="comment"> FOR A PARTICULAR PURPOSE.  See the license for more details.</span>
<a name="l00020"></a>00020 <span class="comment">*/</span>
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 <span class="preprocessor">#include &quot;<a class="code" href="ql_2instruments_2basketoption_8hpp.html">basketoption.hpp</a>&quot;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;<a class="code" href="test-suite_2utilities_8hpp.html">utilities.hpp</a>&quot;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="actual360_8hpp.html" title="act/360 day counter">ql/time/daycounters/actual360.hpp</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="ql_2instruments_2basketoption_8hpp.html">ql/instruments/basketoption.hpp</a>&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="stulzengine_8hpp.html" title="2D European Basket formulae, due to Stulz (1982)">ql/pricingengines/basket/stulzengine.hpp</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="kirkengine_8hpp.html" title="kirk formulae, due to Kirk (1995)">ql/pricingengines/basket/kirkengine.hpp</a>&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;<a class="code" href="mceuropeanbasketengine_8hpp.html" title="European basket MC Engine.">ql/pricingengines/basket/mceuropeanbasketengine.hpp</a>&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;<a class="code" href="mcamericanbasketengine_8hpp.html" title="Least-square Monte Carlo engines.">ql/pricingengines/basket/mcamericanbasketengine.hpp</a>&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;<a class="code" href="blackscholesprocess_8hpp.html" title="Black-Scholes processes.">ql/processes/blackscholesprocess.hpp</a>&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;<a class="code" href="stochasticprocessarray_8hpp.html" title="Array of correlated 1-D stochastic processes.">ql/processes/stochasticprocessarray.hpp</a>&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;<a class="code" href="flatforward_8hpp.html" title="flat forward rate term structure">ql/termstructures/yield/flatforward.hpp</a>&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;<a class="code" href="blackconstantvol_8hpp.html" title="Black constant volatility, no time dependence, no strike dependence.">ql/termstructures/volatility/equityfx/blackconstantvol.hpp</a>&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;<a class="code" href="fd2dblackscholesvanillaengine_8hpp.html" title="Finite-Differences 2 dim Black Scholes vanilla option engine.">ql/pricingengines/basket/fd2dblackscholesvanillaengine.hpp</a>&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;<a class="code" href="dataformatters_8hpp.html" title="output manipulators">ql/utilities/dataformatters.hpp</a>&gt;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &lt;boost/progress.hpp&gt;</span>
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 <span class="keyword">using namespace </span>QuantLib;
<a name="l00039"></a>00039 <span class="keyword">using namespace </span>boost::unit_test_framework;
<a name="l00040"></a>00040 
<a name="l00041"></a><a class="code" href="test-suite_2basketoption_8cpp.html#a48e62a25d30b5d3af8ba1e50ef370b7d">00041</a> <span class="preprocessor">#define REPORT_FAILURE_2(greekName, basketType, payoff, exercise, \</span>
<a name="l00042"></a>00042 <span class="preprocessor">                         s1, s2, q1, q2, r, today, v1, v2, rho, \</span>
<a name="l00043"></a>00043 <span class="preprocessor">                         expected, calculated, error, tolerance) \</span>
<a name="l00044"></a>00044 <span class="preprocessor">    BOOST_ERROR( \</span>
<a name="l00045"></a>00045 <span class="preprocessor">        exerciseTypeToString(exercise) &lt;&lt; &quot; &quot; \</span>
<a name="l00046"></a>00046 <span class="preprocessor">        &lt;&lt; payoff-&gt;optionType() &lt;&lt; &quot; option on &quot; \</span>
<a name="l00047"></a>00047 <span class="preprocessor">        &lt;&lt; basketTypeToString(basketType) \</span>
<a name="l00048"></a>00048 <span class="preprocessor">        &lt;&lt; &quot; with &quot; &lt;&lt; payoffTypeToString(payoff) &lt;&lt; &quot; payoff:\n&quot; \</span>
<a name="l00049"></a>00049 <span class="preprocessor">        &lt;&lt; &quot;1st underlying value: &quot; &lt;&lt; s1 &lt;&lt; &quot;\n&quot; \</span>
<a name="l00050"></a>00050 <span class="preprocessor">        &lt;&lt; &quot;2nd underlying value: &quot; &lt;&lt; s2 &lt;&lt; &quot;\n&quot; \</span>
<a name="l00051"></a>00051 <span class="preprocessor">        &lt;&lt; &quot;              strike: &quot; &lt;&lt; payoff-&gt;strike() &lt;&lt; &quot;\n&quot; \</span>
<a name="l00052"></a>00052 <span class="preprocessor">        &lt;&lt; &quot;  1st dividend yield: &quot; &lt;&lt; io::rate(q1) &lt;&lt; &quot;\n&quot; \</span>
<a name="l00053"></a>00053 <span class="preprocessor">        &lt;&lt; &quot;  2nd dividend yield: &quot; &lt;&lt; io::rate(q2) &lt;&lt; &quot;\n&quot; \</span>
<a name="l00054"></a>00054 <span class="preprocessor">        &lt;&lt; &quot;      risk-free rate: &quot; &lt;&lt; io::rate(r) &lt;&lt; &quot;\n&quot; \</span>
<a name="l00055"></a>00055 <span class="preprocessor">        &lt;&lt; &quot;      reference date: &quot; &lt;&lt; today &lt;&lt; &quot;\n&quot; \</span>
<a name="l00056"></a>00056 <span class="preprocessor">        &lt;&lt; &quot;            maturity: &quot; &lt;&lt; exercise-&gt;lastDate() &lt;&lt; &quot;\n&quot; \</span>
<a name="l00057"></a>00057 <span class="preprocessor">        &lt;&lt; &quot;1st asset volatility: &quot; &lt;&lt; io::volatility(v1) &lt;&lt; &quot;\n&quot; \</span>
<a name="l00058"></a>00058 <span class="preprocessor">        &lt;&lt; &quot;2nd asset volatility: &quot; &lt;&lt; io::volatility(v2) &lt;&lt; &quot;\n&quot; \</span>
<a name="l00059"></a>00059 <span class="preprocessor">        &lt;&lt; &quot;         correlation: &quot; &lt;&lt; rho &lt;&lt; &quot;\n\n&quot; \</span>
<a name="l00060"></a>00060 <span class="preprocessor">        &lt;&lt; &quot;    expected   &quot; &lt;&lt; greekName &lt;&lt; &quot;: &quot; &lt;&lt; expected &lt;&lt; &quot;\n&quot; \</span>
<a name="l00061"></a>00061 <span class="preprocessor">        &lt;&lt; &quot;    calculated &quot; &lt;&lt; greekName &lt;&lt; &quot;: &quot; &lt;&lt; calculated &lt;&lt; &quot;\n&quot;\</span>
<a name="l00062"></a>00062 <span class="preprocessor">        &lt;&lt; &quot;    error:            &quot; &lt;&lt; error &lt;&lt; &quot;\n&quot; \</span>
<a name="l00063"></a>00063 <span class="preprocessor">        &lt;&lt; &quot;    tolerance:        &quot; &lt;&lt; tolerance);</span>
<a name="l00064"></a>00064 <span class="preprocessor"></span>
<a name="l00065"></a><a class="code" href="test-suite_2basketoption_8cpp.html#a9882a11ea70bc069cf54f748cf3d43de">00065</a> <span class="preprocessor">#define REPORT_FAILURE_3(greekName, basketType, payoff, exercise, \</span>
<a name="l00066"></a>00066 <span class="preprocessor">                         s1, s2, s3, r, today, v1, v2, v3, rho, \</span>
<a name="l00067"></a>00067 <span class="preprocessor">                         expected, calculated, error, tolerance) \</span>
<a name="l00068"></a>00068 <span class="preprocessor">    BOOST_ERROR( \</span>
<a name="l00069"></a>00069 <span class="preprocessor">        exerciseTypeToString(exercise) &lt;&lt; &quot; &quot; \</span>
<a name="l00070"></a>00070 <span class="preprocessor">        &lt;&lt; payoff-&gt;optionType() &lt;&lt; &quot; option on &quot; \</span>
<a name="l00071"></a>00071 <span class="preprocessor">        &lt;&lt; basketTypeToString(basketType) \</span>
<a name="l00072"></a>00072 <span class="preprocessor">        &lt;&lt; &quot; with &quot; &lt;&lt; payoffTypeToString(payoff) &lt;&lt; &quot; payoff:\n&quot; \</span>
<a name="l00073"></a>00073 <span class="preprocessor">        &lt;&lt; &quot;1st underlying value: &quot; &lt;&lt; s1 &lt;&lt; &quot;\n&quot; \</span>
<a name="l00074"></a>00074 <span class="preprocessor">        &lt;&lt; &quot;2nd underlying value: &quot; &lt;&lt; s2 &lt;&lt; &quot;\n&quot; \</span>
<a name="l00075"></a>00075 <span class="preprocessor">        &lt;&lt; &quot;3rd underlying value: &quot; &lt;&lt; s3 &lt;&lt; &quot;\n&quot; \</span>
<a name="l00076"></a>00076 <span class="preprocessor">        &lt;&lt; &quot;              strike: &quot; &lt;&lt; payoff-&gt;strike() &lt;&lt;&quot;\n&quot; \</span>
<a name="l00077"></a>00077 <span class="preprocessor">        &lt;&lt; &quot;      risk-free rate: &quot; &lt;&lt; io::rate(r) &lt;&lt; &quot;\n&quot; \</span>
<a name="l00078"></a>00078 <span class="preprocessor">        &lt;&lt; &quot;      reference date: &quot; &lt;&lt; today &lt;&lt; &quot;\n&quot; \</span>
<a name="l00079"></a>00079 <span class="preprocessor">        &lt;&lt; &quot;            maturity: &quot; &lt;&lt; exercise-&gt;lastDate() &lt;&lt; &quot;\n&quot; \</span>
<a name="l00080"></a>00080 <span class="preprocessor">        &lt;&lt; &quot;1st asset volatility: &quot; &lt;&lt; io::volatility(v1) &lt;&lt; &quot;\n&quot; \</span>
<a name="l00081"></a>00081 <span class="preprocessor">        &lt;&lt; &quot;2nd asset volatility: &quot; &lt;&lt; io::volatility(v2) &lt;&lt; &quot;\n&quot; \</span>
<a name="l00082"></a>00082 <span class="preprocessor">        &lt;&lt; &quot;3rd asset volatility: &quot; &lt;&lt; io::volatility(v3) &lt;&lt; &quot;\n&quot; \</span>
<a name="l00083"></a>00083 <span class="preprocessor">        &lt;&lt; &quot;         correlation: &quot; &lt;&lt; rho &lt;&lt; &quot;\n\n&quot; \</span>
<a name="l00084"></a>00084 <span class="preprocessor">        &lt;&lt; &quot;    expected   &quot; &lt;&lt; greekName &lt;&lt; &quot;: &quot; &lt;&lt; expected &lt;&lt; &quot;\n&quot; \</span>
<a name="l00085"></a>00085 <span class="preprocessor">        &lt;&lt; &quot;    calculated &quot; &lt;&lt; greekName &lt;&lt; &quot;: &quot; &lt;&lt; calculated &lt;&lt; &quot;\n&quot;\</span>
<a name="l00086"></a>00086 <span class="preprocessor">        &lt;&lt; &quot;    error:            &quot; &lt;&lt; error &lt;&lt; &quot;\n&quot; \</span>
<a name="l00087"></a>00087 <span class="preprocessor">        &lt;&lt; &quot;    tolerance:        &quot; &lt;&lt; tolerance);</span>
<a name="l00088"></a>00088 <span class="preprocessor"></span>
<a name="l00089"></a>00089 
<a name="l00090"></a><a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html">00090</a> <span class="keyword">namespace </span>{
<a name="l00091"></a>00091 
<a name="l00092"></a><a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04ea2e31e04ad3e4d01f2c488567c4251f76">00092</a>     <span class="keyword">enum</span> <a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04e">BasketType</a> { <a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eadc7ae8d9e7f369c3b721bbb4aab76c5e">MinBasket</a>, <a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eaf23fa1fce7ad8ddb6f0cf792f1c9b7de">MaxBasket</a>, <a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04ea2e31e04ad3e4d01f2c488567c4251f76">SpreadBasket</a> };
<a name="l00093"></a>00093 
<a name="l00094"></a><a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#a9faa90dd4f89a97a429d908cfe806304">00094</a>     std::string <a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#a9faa90dd4f89a97a429d908cfe806304">basketTypeToString</a>(<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04e">BasketType</a> basketType) {
<a name="l00095"></a>00095         <span class="keywordflow">switch</span> (basketType) {
<a name="l00096"></a>00096           <span class="keywordflow">case</span> <a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eadc7ae8d9e7f369c3b721bbb4aab76c5e">MinBasket</a>:
<a name="l00097"></a>00097             <span class="keywordflow">return</span> <span class="stringliteral">&quot;MinBasket&quot;</span>;
<a name="l00098"></a>00098           <span class="keywordflow">case</span> <a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eaf23fa1fce7ad8ddb6f0cf792f1c9b7de">MaxBasket</a>:
<a name="l00099"></a>00099             <span class="keywordflow">return</span> <span class="stringliteral">&quot;MaxBasket&quot;</span>;
<a name="l00100"></a>00100           <span class="keywordflow">case</span> <a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04ea2e31e04ad3e4d01f2c488567c4251f76">SpreadBasket</a>:
<a name="l00101"></a>00101             <span class="keywordflow">return</span> <span class="stringliteral">&quot;Spread&quot;</span>;
<a name="l00102"></a>00102         }
<a name="l00103"></a>00103         <a class="code" href="errors_8hpp.html#a8efe9cb3e67c8d0585e57b4d53c5d2fe" title="throw an error (possibly with file and line information)">QL_FAIL</a>(<span class="stringliteral">&quot;unknown basket option type&quot;</span>);
<a name="l00104"></a>00104     }
<a name="l00105"></a>00105 
<a name="l00106"></a><a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#a5bd9db29b92ca1ea60f16bd2e7e031bb">00106</a>     boost::shared_ptr&lt;BasketPayoff&gt; <a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#a5bd9db29b92ca1ea60f16bd2e7e031bb">basketTypeToPayoff</a>(
<a name="l00107"></a>00107                                          <a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04e">BasketType</a> basketType,
<a name="l00108"></a>00108                                          <span class="keyword">const</span> boost::shared_ptr&lt;Payoff&gt; &amp;p) {
<a name="l00109"></a>00109         <span class="keywordflow">switch</span> (basketType) {
<a name="l00110"></a>00110           <span class="keywordflow">case</span> <a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eadc7ae8d9e7f369c3b721bbb4aab76c5e">MinBasket</a>:
<a name="l00111"></a>00111             <span class="keywordflow">return</span> boost::shared_ptr&lt;BasketPayoff&gt;(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_min_basket_payoff.html">MinBasketPayoff</a>(p));
<a name="l00112"></a>00112           <span class="keywordflow">case</span> <a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eaf23fa1fce7ad8ddb6f0cf792f1c9b7de">MaxBasket</a>:
<a name="l00113"></a>00113             <span class="keywordflow">return</span> boost::shared_ptr&lt;BasketPayoff&gt;(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_max_basket_payoff.html">MaxBasketPayoff</a>(p));
<a name="l00114"></a>00114           <span class="keywordflow">case</span> <a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04ea2e31e04ad3e4d01f2c488567c4251f76">SpreadBasket</a>:
<a name="l00115"></a>00115             <span class="keywordflow">return</span> boost::shared_ptr&lt;BasketPayoff&gt;(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_spread_basket_payoff.html">SpreadBasketPayoff</a>(p));
<a name="l00116"></a>00116         }
<a name="l00117"></a>00117         <a class="code" href="errors_8hpp.html#a8efe9cb3e67c8d0585e57b4d53c5d2fe" title="throw an error (possibly with file and line information)">QL_FAIL</a>(<span class="stringliteral">&quot;unknown basket option type&quot;</span>);
<a name="l00118"></a>00118     }
<a name="l00119"></a>00119 
<a name="l00120"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_one_data.html">00120</a>     <span class="keyword">struct </span><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_one_data.html">BasketOptionOneData</a> {
<a name="l00121"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_one_data.html#a3bf38f3ea23d969813366a1cde4e55e7">00121</a>         <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845">Option::Type</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_one_data.html#a3bf38f3ea23d969813366a1cde4e55e7">type</a>;
<a name="l00122"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_one_data.html#a113e8762b89f8c069eb4b8d84f1d5045">00122</a>         <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_one_data.html#a113e8762b89f8c069eb4b8d84f1d5045">strike</a>;
<a name="l00123"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_one_data.html#aa09b5a9e44717ad0abe687f6a7190ece">00123</a>         <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_one_data.html#aa09b5a9e44717ad0abe687f6a7190ece">s</a>;        <span class="comment">// spot</span>
<a name="l00124"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_one_data.html#a8e9767e6082e4310f331658befce7523">00124</a>         <a class="code" href="namespace_quant_lib.html#a919ba3567cc89fca373f8d6b8e80126b" title="interest rates">Rate</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_one_data.html#a8e9767e6082e4310f331658befce7523">q</a>;        <span class="comment">// dividend</span>
<a name="l00125"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_one_data.html#ae59ee83b5b5cfd634c25b1d86075ea64">00125</a>         <a class="code" href="namespace_quant_lib.html#a919ba3567cc89fca373f8d6b8e80126b" title="interest rates">Rate</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_one_data.html#ae59ee83b5b5cfd634c25b1d86075ea64">r</a>;        <span class="comment">// risk-free rate</span>
<a name="l00126"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_one_data.html#aa7e386cd47f6561bd7a89ee86971a57e">00126</a>         <a class="code" href="class_time.html">Time</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_one_data.html#aa7e386cd47f6561bd7a89ee86971a57e">t</a>;        <span class="comment">// time to maturity</span>
<a name="l00127"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_one_data.html#ab84a06f7bac198bed6f876ef1c3e13f3">00127</a>         <a class="code" href="namespace_quant_lib.html#ae3abfa256de5aa2b506ab6bda014e4dc" title="volatility">Volatility</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_one_data.html#ab84a06f7bac198bed6f876ef1c3e13f3">v</a>;  <span class="comment">// volatility</span>
<a name="l00128"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_one_data.html#a9ab885afcf2105ed7cc761ccb112cc0c">00128</a>         <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_one_data.html#a9ab885afcf2105ed7cc761ccb112cc0c">result</a>;   <span class="comment">// expected result</span>
<a name="l00129"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_one_data.html#ab0939a5f0a993e19a7911f37ca86aac7">00129</a>         <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_one_data.html#ab0939a5f0a993e19a7911f37ca86aac7">tol</a>;      <span class="comment">// tolerance</span>
<a name="l00130"></a>00130     };
<a name="l00131"></a>00131 
<a name="l00132"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_two_data.html">00132</a>     <span class="keyword">struct </span><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_two_data.html">BasketOptionTwoData</a> {
<a name="l00133"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_two_data.html#a7b74f2cffa48010e6ba0d7d2ad2d082d">00133</a>         <a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04e">BasketType</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_two_data.html#a7b74f2cffa48010e6ba0d7d2ad2d082d">basketType</a>;
<a name="l00134"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_two_data.html#a07159e88ae04f0673aa38fee6b2d3126">00134</a>         <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845">Option::Type</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_two_data.html#a07159e88ae04f0673aa38fee6b2d3126">type</a>;
<a name="l00135"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_two_data.html#abaa3a054ff33f555b8d5124ecbe118a6">00135</a>         <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_two_data.html#abaa3a054ff33f555b8d5124ecbe118a6">strike</a>;
<a name="l00136"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_two_data.html#a7cffc6304ecb958e23d4850c06844368">00136</a>         <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_two_data.html#a7cffc6304ecb958e23d4850c06844368">s1</a>;
<a name="l00137"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_two_data.html#ab3e66f21408cbbb5b8f5f44c8e7c5f6c">00137</a>         <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_two_data.html#ab3e66f21408cbbb5b8f5f44c8e7c5f6c">s2</a>;
<a name="l00138"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_two_data.html#a49538944a6734d4a334e8544890bc241">00138</a>         <a class="code" href="namespace_quant_lib.html#a919ba3567cc89fca373f8d6b8e80126b" title="interest rates">Rate</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_two_data.html#a49538944a6734d4a334e8544890bc241">q1</a>;
<a name="l00139"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_two_data.html#a262d2d80e74acde585e96a9af464fe61">00139</a>         <a class="code" href="namespace_quant_lib.html#a919ba3567cc89fca373f8d6b8e80126b" title="interest rates">Rate</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_two_data.html#a262d2d80e74acde585e96a9af464fe61">q2</a>;
<a name="l00140"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_two_data.html#ac67ce1a63cb705c69850c106e7556c79">00140</a>         <a class="code" href="namespace_quant_lib.html#a919ba3567cc89fca373f8d6b8e80126b" title="interest rates">Rate</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_two_data.html#ac67ce1a63cb705c69850c106e7556c79">r</a>;
<a name="l00141"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_two_data.html#a9a641eab82bf2c85edbfa98a4b68ccb7">00141</a>         <a class="code" href="class_time.html">Time</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_two_data.html#a9a641eab82bf2c85edbfa98a4b68ccb7">t</a>; <span class="comment">// years</span>
<a name="l00142"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_two_data.html#a17c488bf78d334d757e4d4ee93d613b9">00142</a>         <a class="code" href="namespace_quant_lib.html#ae3abfa256de5aa2b506ab6bda014e4dc" title="volatility">Volatility</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_two_data.html#a17c488bf78d334d757e4d4ee93d613b9">v1</a>;
<a name="l00143"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_two_data.html#acb03c5da361ea688bc2450051f02c30b">00143</a>         <a class="code" href="namespace_quant_lib.html#ae3abfa256de5aa2b506ab6bda014e4dc" title="volatility">Volatility</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_two_data.html#acb03c5da361ea688bc2450051f02c30b">v2</a>;
<a name="l00144"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_two_data.html#afa1b0b458a24ede69cb8dd760d46bb76">00144</a>         <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_two_data.html#afa1b0b458a24ede69cb8dd760d46bb76">rho</a>;
<a name="l00145"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_two_data.html#a24d157c6e67c7d5f7f44f740a8660f2a">00145</a>         <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_two_data.html#a24d157c6e67c7d5f7f44f740a8660f2a">result</a>;
<a name="l00146"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_two_data.html#a2a7f04c302dad2d84b327969e083a767">00146</a>         <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_two_data.html#a2a7f04c302dad2d84b327969e083a767">tol</a>;
<a name="l00147"></a>00147     };
<a name="l00148"></a>00148 
<a name="l00149"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_three_data.html">00149</a>     <span class="keyword">struct </span><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_three_data.html">BasketOptionThreeData</a> {
<a name="l00150"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_three_data.html#ab2f4faab34f94407cc0a9524ea86ac21">00150</a>         <a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04e">BasketType</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_three_data.html#ab2f4faab34f94407cc0a9524ea86ac21">basketType</a>;
<a name="l00151"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_three_data.html#ae462e4223d886d61e12718fd7feb31f8">00151</a>         <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845">Option::Type</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_three_data.html#ae462e4223d886d61e12718fd7feb31f8">type</a>;
<a name="l00152"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_three_data.html#afc0c0c55b5ec4272b7ec5039ecd608a6">00152</a>         <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_three_data.html#afc0c0c55b5ec4272b7ec5039ecd608a6">strike</a>;
<a name="l00153"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_three_data.html#a15526ae06869c74f454fd637bce60b13">00153</a>         <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_three_data.html#a15526ae06869c74f454fd637bce60b13">s1</a>;
<a name="l00154"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_three_data.html#a723b97d98db76d895d3a8eb1cd05bd21">00154</a>         <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_three_data.html#a723b97d98db76d895d3a8eb1cd05bd21">s2</a>;
<a name="l00155"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_three_data.html#a1cd7ec20010392eeb9b6a62b6d650466">00155</a>         <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_three_data.html#a1cd7ec20010392eeb9b6a62b6d650466">s3</a>;
<a name="l00156"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_three_data.html#a3eb284cb9fd3d0e2e50af0dc3539872e">00156</a>         <a class="code" href="namespace_quant_lib.html#a919ba3567cc89fca373f8d6b8e80126b" title="interest rates">Rate</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_three_data.html#a3eb284cb9fd3d0e2e50af0dc3539872e">r</a>;
<a name="l00157"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_three_data.html#ad24cef734df15b44f57787194755b0c1">00157</a>         <a class="code" href="class_time.html">Time</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_three_data.html#ad24cef734df15b44f57787194755b0c1">t</a>; <span class="comment">// months</span>
<a name="l00158"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_three_data.html#ab17cf547ef9a494e407324e03bdcc558">00158</a>         <a class="code" href="namespace_quant_lib.html#ae3abfa256de5aa2b506ab6bda014e4dc" title="volatility">Volatility</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_three_data.html#ab17cf547ef9a494e407324e03bdcc558">v1</a>;
<a name="l00159"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_three_data.html#ac2e406b3f93b2f405a0e8cc56e4e1859">00159</a>         <a class="code" href="namespace_quant_lib.html#ae3abfa256de5aa2b506ab6bda014e4dc" title="volatility">Volatility</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_three_data.html#ac2e406b3f93b2f405a0e8cc56e4e1859">v2</a>;
<a name="l00160"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_three_data.html#a74c4b1285e7baf34890f747c3650dbc0">00160</a>         <a class="code" href="namespace_quant_lib.html#ae3abfa256de5aa2b506ab6bda014e4dc" title="volatility">Volatility</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_three_data.html#a74c4b1285e7baf34890f747c3650dbc0">v3</a>;
<a name="l00161"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_three_data.html#a68780e8562e2a50268c7eef8a070e533">00161</a>         <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_three_data.html#a68780e8562e2a50268c7eef8a070e533">rho</a>;
<a name="l00162"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_three_data.html#a5a0968dae3c4c280adf11955ab581847">00162</a>         <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_three_data.html#a5a0968dae3c4c280adf11955ab581847">euroValue</a>;
<a name="l00163"></a><a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_three_data.html#aed2b00d9a3c4a54c7dd83747b4c112c7">00163</a>         <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> <a class="code" href="structanonymous__namespace_02basketoption_8cpp_03_1_1_basket_option_three_data.html#aed2b00d9a3c4a54c7dd83747b4c112c7">amValue</a>;
<a name="l00164"></a>00164     };
<a name="l00165"></a>00165 
<a name="l00166"></a>00166 }
<a name="l00167"></a>00167 
<a name="l00168"></a>00168 
<a name="l00169"></a><a class="code" href="class_basket_option_test.html#aab0dc7bd0acadc2018a33b1eab64615b">00169</a> <span class="keywordtype">void</span> <a class="code" href="class_basket_option_test.html#aab0dc7bd0acadc2018a33b1eab64615b">BasketOptionTest::testEuroTwoValues</a>() {
<a name="l00170"></a>00170 
<a name="l00171"></a>00171     BOOST_MESSAGE(<span class="stringliteral">&quot;Testing two-asset European basket options...&quot;</span>);
<a name="l00172"></a>00172 
<a name="l00173"></a>00173     <span class="comment">/*</span>
<a name="l00174"></a>00174 <span class="comment">        Data from:</span>
<a name="l00175"></a>00175 <span class="comment">        Excel spreadsheet www.maths.ox.ac.uk/~firth/computing/excel.shtml</span>
<a name="l00176"></a>00176 <span class="comment">        and</span>
<a name="l00177"></a>00177 <span class="comment">        &quot;Option pricing formulas&quot;, E.G. Haug, McGraw-Hill 1998 pag 56-58</span>
<a name="l00178"></a>00178 <span class="comment">        European two asset max basket options</span>
<a name="l00179"></a>00179 <span class="comment">    */</span>
<a name="l00180"></a>00180     BasketOptionTwoData values[] = {
<a name="l00181"></a>00181         <span class="comment">//      basketType,   optionType, strike,    s1,    s2,   q1,   q2,    r,    t,   v1,   v2,  rho, result, tol</span>
<a name="l00182"></a>00182         <span class="comment">// data from http://www.maths.ox.ac.uk/~firth/computing/excel.shtml</span>
<a name="l00183"></a>00183         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eadc7ae8d9e7f369c3b721bbb4aab76c5e">MinBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>,  100.0, 100.0, 100.0, 0.00, 0.00, 0.05, 1.00, 0.30, 0.30, 0.90, 10.898, 1.0e-3},
<a name="l00184"></a>00184         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eadc7ae8d9e7f369c3b721bbb4aab76c5e">MinBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>,  100.0, 100.0, 100.0, 0.00, 0.00, 0.05, 1.00, 0.30, 0.30, 0.70,  8.483, 1.0e-3},
<a name="l00185"></a>00185         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eadc7ae8d9e7f369c3b721bbb4aab76c5e">MinBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>,  100.0, 100.0, 100.0, 0.00, 0.00, 0.05, 1.00, 0.30, 0.30, 0.50,  6.844, 1.0e-3},
<a name="l00186"></a>00186         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eadc7ae8d9e7f369c3b721bbb4aab76c5e">MinBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>,  100.0, 100.0, 100.0, 0.00, 0.00, 0.05, 1.00, 0.30, 0.30, 0.30,  5.531, 1.0e-3},
<a name="l00187"></a>00187         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eadc7ae8d9e7f369c3b721bbb4aab76c5e">MinBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>,  100.0, 100.0, 100.0, 0.00, 0.00, 0.05, 1.00, 0.30, 0.30, 0.10,  4.413, 1.0e-3},
<a name="l00188"></a>00188         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eadc7ae8d9e7f369c3b721bbb4aab76c5e">MinBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>,  100.0, 100.0, 100.0, 0.00, 0.00, 0.05, 1.00, 0.50, 0.70, 0.00,  4.981, 1.0e-3},
<a name="l00189"></a>00189         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eadc7ae8d9e7f369c3b721bbb4aab76c5e">MinBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>,  100.0, 100.0, 100.0, 0.00, 0.00, 0.05, 1.00, 0.50, 0.30, 0.00,  4.159, 1.0e-3},
<a name="l00190"></a>00190         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eadc7ae8d9e7f369c3b721bbb4aab76c5e">MinBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>,  100.0, 100.0, 100.0, 0.00, 0.00, 0.05, 1.00, 0.50, 0.10, 0.00,  2.597, 1.0e-3},
<a name="l00191"></a>00191         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eadc7ae8d9e7f369c3b721bbb4aab76c5e">MinBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>,  100.0, 100.0, 100.0, 0.00, 0.00, 0.05, 1.00, 0.50, 0.10, 0.50,  4.030, 1.0e-3},
<a name="l00192"></a>00192 
<a name="l00193"></a>00193         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eaf23fa1fce7ad8ddb6f0cf792f1c9b7de">MaxBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>,  100.0, 100.0, 100.0, 0.00, 0.00, 0.05, 1.00, 0.30, 0.30, 0.90, 17.565, 1.0e-3},
<a name="l00194"></a>00194         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eaf23fa1fce7ad8ddb6f0cf792f1c9b7de">MaxBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>,  100.0, 100.0, 100.0, 0.00, 0.00, 0.05, 1.00, 0.30, 0.30, 0.70, 19.980, 1.0e-3},
<a name="l00195"></a>00195         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eaf23fa1fce7ad8ddb6f0cf792f1c9b7de">MaxBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>,  100.0, 100.0, 100.0, 0.00, 0.00, 0.05, 1.00, 0.30, 0.30, 0.50, 21.619, 1.0e-3},
<a name="l00196"></a>00196         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eaf23fa1fce7ad8ddb6f0cf792f1c9b7de">MaxBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>,  100.0, 100.0, 100.0, 0.00, 0.00, 0.05, 1.00, 0.30, 0.30, 0.30, 22.932, 1.0e-3},
<a name="l00197"></a>00197         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eaf23fa1fce7ad8ddb6f0cf792f1c9b7de">MaxBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>,  100.0, 100.0, 100.0, 0.00, 0.00, 0.05, 1.00, 0.30, 0.30, 0.10, 24.049, 1.1e-3},
<a name="l00198"></a>00198         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eaf23fa1fce7ad8ddb6f0cf792f1c9b7de">MaxBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>,  100.0,  80.0, 100.0, 0.00, 0.00, 0.05, 1.00, 0.30, 0.30, 0.30, 16.508, 1.0e-3},
<a name="l00199"></a>00199         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eaf23fa1fce7ad8ddb6f0cf792f1c9b7de">MaxBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>,  100.0,  80.0,  80.0, 0.00, 0.00, 0.05, 1.00, 0.30, 0.30, 0.30,  8.049, 1.0e-3},
<a name="l00200"></a>00200         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eaf23fa1fce7ad8ddb6f0cf792f1c9b7de">MaxBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>,  100.0,  80.0, 120.0, 0.00, 0.00, 0.05, 1.00, 0.30, 0.30, 0.30, 30.141, 1.0e-3},
<a name="l00201"></a>00201         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eaf23fa1fce7ad8ddb6f0cf792f1c9b7de">MaxBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>,  100.0, 120.0, 120.0, 0.00, 0.00, 0.05, 1.00, 0.30, 0.30, 0.30, 42.889, 1.0e-3},
<a name="l00202"></a>00202 
<a name="l00203"></a>00203         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eadc7ae8d9e7f369c3b721bbb4aab76c5e">MinBasket</a>,  <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>,  100.0, 100.0, 100.0, 0.00, 0.00, 0.05, 1.00, 0.30, 0.30, 0.90, 11.369, 1.0e-3},
<a name="l00204"></a>00204         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eadc7ae8d9e7f369c3b721bbb4aab76c5e">MinBasket</a>,  <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>,  100.0, 100.0, 100.0, 0.00, 0.00, 0.05, 1.00, 0.30, 0.30, 0.70, 12.856, 1.0e-3},
<a name="l00205"></a>00205         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eadc7ae8d9e7f369c3b721bbb4aab76c5e">MinBasket</a>,  <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>,  100.0, 100.0, 100.0, 0.00, 0.00, 0.05, 1.00, 0.30, 0.30, 0.50, 13.890, 1.0e-3},
<a name="l00206"></a>00206         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eadc7ae8d9e7f369c3b721bbb4aab76c5e">MinBasket</a>,  <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>,  100.0, 100.0, 100.0, 0.00, 0.00, 0.05, 1.00, 0.30, 0.30, 0.30, 14.741, 1.0e-3},
<a name="l00207"></a>00207         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eadc7ae8d9e7f369c3b721bbb4aab76c5e">MinBasket</a>,  <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>,  100.0, 100.0, 100.0, 0.00, 0.00, 0.05, 1.00, 0.30, 0.30, 0.10, 15.485, 1.0e-3},
<a name="l00208"></a>00208 
<a name="l00209"></a>00209         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eadc7ae8d9e7f369c3b721bbb4aab76c5e">MinBasket</a>,  <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>,  100.0, 100.0, 100.0, 0.00, 0.00, 0.05, 0.50, 0.30, 0.30, 0.10, 11.893, 1.0e-3},
<a name="l00210"></a>00210         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eadc7ae8d9e7f369c3b721bbb4aab76c5e">MinBasket</a>,  <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>,  100.0, 100.0, 100.0, 0.00, 0.00, 0.05, 0.25, 0.30, 0.30, 0.10,  8.881, 1.0e-3},
<a name="l00211"></a>00211         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eadc7ae8d9e7f369c3b721bbb4aab76c5e">MinBasket</a>,  <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>,  100.0, 100.0, 100.0, 0.00, 0.00, 0.05, 2.00, 0.30, 0.30, 0.10, 19.268, 1.0e-3},
<a name="l00212"></a>00212 
<a name="l00213"></a>00213         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eaf23fa1fce7ad8ddb6f0cf792f1c9b7de">MaxBasket</a>,  <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>,  100.0, 100.0, 100.0, 0.00, 0.00, 0.05, 1.00, 0.30, 0.30, 0.90,  7.339, 1.0e-3},
<a name="l00214"></a>00214         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eaf23fa1fce7ad8ddb6f0cf792f1c9b7de">MaxBasket</a>,  <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>,  100.0, 100.0, 100.0, 0.00, 0.00, 0.05, 1.00, 0.30, 0.30, 0.70,  5.853, 1.0e-3},
<a name="l00215"></a>00215         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eaf23fa1fce7ad8ddb6f0cf792f1c9b7de">MaxBasket</a>,  <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>,  100.0, 100.0, 100.0, 0.00, 0.00, 0.05, 1.00, 0.30, 0.30, 0.50,  4.818, 1.0e-3},
<a name="l00216"></a>00216         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eaf23fa1fce7ad8ddb6f0cf792f1c9b7de">MaxBasket</a>,  <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>,  100.0, 100.0, 100.0, 0.00, 0.00, 0.05, 1.00, 0.30, 0.30, 0.30,  3.967, 1.1e-3},
<a name="l00217"></a>00217         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eaf23fa1fce7ad8ddb6f0cf792f1c9b7de">MaxBasket</a>,  <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>,  100.0, 100.0, 100.0, 0.00, 0.00, 0.05, 1.00, 0.30, 0.30, 0.10,  3.223, 1.0e-3},
<a name="l00218"></a>00218 
<a name="l00219"></a>00219         <span class="comment">//      basketType,   optionType, strike,    s1,    s2,   q1,   q2,    r,    t,   v1,   v2,  rho,  result, tol</span>
<a name="l00220"></a>00220         <span class="comment">// data from &quot;Option pricing formulas&quot; VB code + spreadsheet</span>
<a name="l00221"></a>00221         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eadc7ae8d9e7f369c3b721bbb4aab76c5e">MinBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>,   98.0, 100.0, 105.0, 0.00, 0.00, 0.05, 0.50, 0.11, 0.16, 0.63,  4.8177, 1.0e-4},
<a name="l00222"></a>00222         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eaf23fa1fce7ad8ddb6f0cf792f1c9b7de">MaxBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>,   98.0, 100.0, 105.0, 0.00, 0.00, 0.05, 0.50, 0.11, 0.16, 0.63, 11.6323, 1.0e-4},
<a name="l00223"></a>00223         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eadc7ae8d9e7f369c3b721bbb4aab76c5e">MinBasket</a>,  <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>,   98.0, 100.0, 105.0, 0.00, 0.00, 0.05, 0.50, 0.11, 0.16, 0.63,  2.0376, 1.0e-4},
<a name="l00224"></a>00224         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eaf23fa1fce7ad8ddb6f0cf792f1c9b7de">MaxBasket</a>,  <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>,   98.0, 100.0, 105.0, 0.00, 0.00, 0.05, 0.50, 0.11, 0.16, 0.63,  0.5731, 1.0e-4},
<a name="l00225"></a>00225         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eadc7ae8d9e7f369c3b721bbb4aab76c5e">MinBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>,   98.0, 100.0, 105.0, 0.06, 0.09, 0.05, 0.50, 0.11, 0.16, 0.63,  2.9340, 1.0e-4},
<a name="l00226"></a>00226         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eadc7ae8d9e7f369c3b721bbb4aab76c5e">MinBasket</a>,  <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>,   98.0, 100.0, 105.0, 0.06, 0.09, 0.05, 0.50, 0.11, 0.16, 0.63,  3.5224, 1.0e-4},
<a name="l00227"></a>00227         <span class="comment">// data from &quot;Option pricing formulas&quot;, E.G. Haug, McGraw-Hill 1998 pag 58</span>
<a name="l00228"></a>00228         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eaf23fa1fce7ad8ddb6f0cf792f1c9b7de">MaxBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>,   98.0, 100.0, 105.0, 0.06, 0.09, 0.05, 0.50, 0.11, 0.16, 0.63,  8.0701, 1.0e-4},
<a name="l00229"></a>00229         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eaf23fa1fce7ad8ddb6f0cf792f1c9b7de">MaxBasket</a>,  <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>,   98.0, 100.0, 105.0, 0.06, 0.09, 0.05, 0.50, 0.11, 0.16, 0.63,  1.2181, 1.0e-4},
<a name="l00230"></a>00230 
<a name="l00231"></a>00231         <span class="comment">/* &quot;Option pricing formulas&quot;, E.G. Haug, McGraw-Hill 1998 pag 59-60</span>
<a name="l00232"></a>00232 <span class="comment">            Kirk approx. for a european spread option on two futures*/</span>
<a name="l00233"></a>00233 
<a name="l00234"></a>00234         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04ea2e31e04ad3e4d01f2c488567c4251f76">SpreadBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>, 3.0,  122.0, 120.0, 0.0, 0.0, 0.10,  0.1, 0.20, 0.20, -0.5, 4.7530, 1.0e-3},
<a name="l00235"></a>00235         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04ea2e31e04ad3e4d01f2c488567c4251f76">SpreadBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>, 3.0,  122.0, 120.0, 0.0, 0.0, 0.10,  0.1, 0.20, 0.20,  0.0, 3.7970, 1.0e-3},
<a name="l00236"></a>00236         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04ea2e31e04ad3e4d01f2c488567c4251f76">SpreadBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>, 3.0,  122.0, 120.0, 0.0, 0.0, 0.10,  0.1, 0.20, 0.20,  0.5, 2.5537, 1.0e-3},
<a name="l00237"></a>00237         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04ea2e31e04ad3e4d01f2c488567c4251f76">SpreadBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>, 3.0,  122.0, 120.0, 0.0, 0.0, 0.10,  0.1, 0.25, 0.20, -0.5, 5.4275, 1.0e-3},
<a name="l00238"></a>00238         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04ea2e31e04ad3e4d01f2c488567c4251f76">SpreadBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>, 3.0,  122.0, 120.0, 0.0, 0.0, 0.10,  0.1, 0.25, 0.20,  0.0, 4.3712, 1.0e-3},
<a name="l00239"></a>00239         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04ea2e31e04ad3e4d01f2c488567c4251f76">SpreadBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>, 3.0,  122.0, 120.0, 0.0, 0.0, 0.10,  0.1, 0.25, 0.20,  0.5, 3.0086, 1.0e-3},
<a name="l00240"></a>00240         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04ea2e31e04ad3e4d01f2c488567c4251f76">SpreadBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>, 3.0,  122.0, 120.0, 0.0, 0.0, 0.10,  0.1, 0.20, 0.25, -0.5, 5.4061, 1.0e-3},
<a name="l00241"></a>00241         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04ea2e31e04ad3e4d01f2c488567c4251f76">SpreadBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>, 3.0,  122.0, 120.0, 0.0, 0.0, 0.10,  0.1, 0.20, 0.25,  0.0, 4.3451, 1.0e-3},
<a name="l00242"></a>00242         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04ea2e31e04ad3e4d01f2c488567c4251f76">SpreadBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>, 3.0,  122.0, 120.0, 0.0, 0.0, 0.10,  0.1, 0.20, 0.25,  0.5, 2.9723, 1.0e-3},
<a name="l00243"></a>00243         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04ea2e31e04ad3e4d01f2c488567c4251f76">SpreadBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>, 3.0,  122.0, 120.0, 0.0, 0.0, 0.10,  0.5, 0.20, 0.20, -0.5,10.7517, 1.0e-3},
<a name="l00244"></a>00244         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04ea2e31e04ad3e4d01f2c488567c4251f76">SpreadBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>, 3.0,  122.0, 120.0, 0.0, 0.0, 0.10,  0.5, 0.20, 0.20,  0.0, 8.7020, 1.0e-3},
<a name="l00245"></a>00245         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04ea2e31e04ad3e4d01f2c488567c4251f76">SpreadBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>, 3.0,  122.0, 120.0, 0.0, 0.0, 0.10,  0.5, 0.20, 0.20,  0.5, 6.0257, 1.0e-3},
<a name="l00246"></a>00246         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04ea2e31e04ad3e4d01f2c488567c4251f76">SpreadBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>, 3.0,  122.0, 120.0, 0.0, 0.0, 0.10,  0.5, 0.25, 0.20, -0.5,12.1941, 1.0e-3},
<a name="l00247"></a>00247         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04ea2e31e04ad3e4d01f2c488567c4251f76">SpreadBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>, 3.0,  122.0, 120.0, 0.0, 0.0, 0.10,  0.5, 0.25, 0.20,  0.0, 9.9340, 1.0e-3},
<a name="l00248"></a>00248         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04ea2e31e04ad3e4d01f2c488567c4251f76">SpreadBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>, 3.0,  122.0, 120.0, 0.0, 0.0, 0.10,  0.5, 0.25, 0.20,  0.5, 7.0067, 1.0e-3},
<a name="l00249"></a>00249         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04ea2e31e04ad3e4d01f2c488567c4251f76">SpreadBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>, 3.0,  122.0, 120.0, 0.0, 0.0, 0.10,  0.5, 0.20, 0.25, -0.5,12.1483, 1.0e-3},
<a name="l00250"></a>00250         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04ea2e31e04ad3e4d01f2c488567c4251f76">SpreadBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>, 3.0,  122.0, 120.0, 0.0, 0.0, 0.10,  0.5, 0.20, 0.25,  0.0, 9.8780, 1.0e-3},
<a name="l00251"></a>00251         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04ea2e31e04ad3e4d01f2c488567c4251f76">SpreadBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>, 3.0,  122.0, 120.0, 0.0, 0.0, 0.10,  0.5, 0.20, 0.25,  0.5, 6.9284, 1.0e-3}
<a name="l00252"></a>00252     };
<a name="l00253"></a>00253 
<a name="l00254"></a>00254     <a class="code" href="class_quant_lib_1_1_day_counter.html" title="day counter class">DayCounter</a> dc = <a class="code" href="class_quant_lib_1_1_actual360.html" title="Actual/360 day count convention.">Actual360</a>();
<a name="l00255"></a>00255     <a class="code" href="class_quant_lib_1_1_date.html" title="Concrete date class.">Date</a> today = <a class="code" href="namespaceanonymous__namespace_02marketmodel_8cpp_03.html#ae1b42c838cf0f4cf17262f0b22bac899">Date::todaysDate</a>();
<a name="l00256"></a>00256 
<a name="l00257"></a>00257     boost::shared_ptr&lt;SimpleQuote&gt; spot1(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value">SimpleQuote</a>(0.0));
<a name="l00258"></a>00258     boost::shared_ptr&lt;SimpleQuote&gt; spot2(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value">SimpleQuote</a>(0.0));
<a name="l00259"></a>00259 
<a name="l00260"></a>00260     boost::shared_ptr&lt;SimpleQuote&gt; qRate1(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value">SimpleQuote</a>(0.0));
<a name="l00261"></a>00261     boost::shared_ptr&lt;YieldTermStructure&gt; qTS1 = <a class="code" href="namespace_quant_lib.html#a1309465a856634dcd0caff78af7ca223">flatRate</a>(today, qRate1, dc);
<a name="l00262"></a>00262     boost::shared_ptr&lt;SimpleQuote&gt; qRate2(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value">SimpleQuote</a>(0.0));
<a name="l00263"></a>00263     boost::shared_ptr&lt;YieldTermStructure&gt; qTS2 = <a class="code" href="namespace_quant_lib.html#a1309465a856634dcd0caff78af7ca223">flatRate</a>(today, qRate2, dc);
<a name="l00264"></a>00264 
<a name="l00265"></a>00265     boost::shared_ptr&lt;SimpleQuote&gt; rRate(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value">SimpleQuote</a>(0.0));
<a name="l00266"></a>00266     boost::shared_ptr&lt;YieldTermStructure&gt; rTS = <a class="code" href="namespace_quant_lib.html#a1309465a856634dcd0caff78af7ca223">flatRate</a>(today, rRate, dc);
<a name="l00267"></a>00267 
<a name="l00268"></a>00268     boost::shared_ptr&lt;SimpleQuote&gt; vol1(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value">SimpleQuote</a>(0.0));
<a name="l00269"></a>00269     boost::shared_ptr&lt;BlackVolTermStructure&gt; volTS1 = <a class="code" href="namespace_quant_lib.html#a589d5c4b0b60b0bdd42ae07d820b2ed3">flatVol</a>(today, vol1, dc);
<a name="l00270"></a>00270     boost::shared_ptr&lt;SimpleQuote&gt; vol2(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value">SimpleQuote</a>(0.0));
<a name="l00271"></a>00271     boost::shared_ptr&lt;BlackVolTermStructure&gt; volTS2 = <a class="code" href="namespace_quant_lib.html#a589d5c4b0b60b0bdd42ae07d820b2ed3">flatVol</a>(today, vol2, dc);
<a name="l00272"></a>00272 
<a name="l00273"></a>00273     <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> mcRelativeErrorTolerance = 0.01;
<a name="l00274"></a>00274     <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> fdRelativeErrorTolerance = 0.01;
<a name="l00275"></a>00275 
<a name="l00276"></a>00276     <span class="keywordflow">for</span> (<a class="code" href="namespace_quant_lib.html#af4cc4ef40b52c17cc455ead2a97aedb3" title="size of a container">Size</a> i=0; i&lt;<a class="code" href="test-suite_2utilities_8hpp.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(values); i++) {
<a name="l00277"></a>00277 
<a name="l00278"></a>00278         boost::shared_ptr&lt;PlainVanillaPayoff&gt; payoff(<span class="keyword">new</span>
<a name="l00279"></a>00279             <a class="code" href="class_quant_lib_1_1_plain_vanilla_payoff.html" title="Plain-vanilla payoff.">PlainVanillaPayoff</a>(values[i].<a class="code" href="class_traits_1_1template_01curve_1_1type.html">type</a>, values[i].strike));
<a name="l00280"></a>00280 
<a name="l00281"></a>00281         <a class="code" href="class_quant_lib_1_1_date.html" title="Concrete date class.">Date</a> exDate = today + <a class="code" href="namespace_quant_lib.html#a8ac1a45a37d8d3dda438a2e59e222620" title="integer number">Integer</a>(values[i].<a class="code" href="namespaceanonymous__namespace_02quantlibbenchmark_8cpp_03.html#a7a969063fde0030bd36b46055e824c34">t</a>*360+0.5);
<a name="l00282"></a>00282         boost::shared_ptr&lt;Exercise&gt; exercise(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_european_exercise.html" title="European exercise.">EuropeanExercise</a>(exDate));
<a name="l00283"></a>00283 
<a name="l00284"></a>00284         spot1 -&gt;setValue(values[i].s1);
<a name="l00285"></a>00285         spot2 -&gt;setValue(values[i].s2);
<a name="l00286"></a>00286         qRate1-&gt;setValue(values[i].q1);
<a name="l00287"></a>00287         qRate2-&gt;setValue(values[i].q2);
<a name="l00288"></a>00288         rRate -&gt;setValue(values[i].r );
<a name="l00289"></a>00289         vol1  -&gt;setValue(values[i].v1);
<a name="l00290"></a>00290         vol2  -&gt;setValue(values[i].v2);
<a name="l00291"></a>00291 
<a name="l00292"></a>00292         
<a name="l00293"></a>00293         boost::shared_ptr&lt;PricingEngine&gt; analyticEngine;
<a name="l00294"></a>00294         boost::shared_ptr&lt;GeneralizedBlackScholesProcess&gt; p1, p2;
<a name="l00295"></a>00295         <span class="keywordflow">switch</span>(values[i].basketType) {
<a name="l00296"></a>00296           <span class="keywordflow">case</span> <a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eaf23fa1fce7ad8ddb6f0cf792f1c9b7de">MaxBasket</a>: 
<a name="l00297"></a>00297           <span class="keywordflow">case</span> <a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eadc7ae8d9e7f369c3b721bbb4aab76c5e">MinBasket</a>:
<a name="l00298"></a>00298             p1 = boost::shared_ptr&lt;GeneralizedBlackScholesProcess&gt;(
<a name="l00299"></a>00299                 <span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_black_scholes_merton_process.html" title="Merton (1973) extension to the Black-Scholes stochastic process.">BlackScholesMertonProcess</a>(
<a name="l00300"></a>00300                                         <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;Quote&gt;</a>(spot1),
<a name="l00301"></a>00301                                         <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;YieldTermStructure&gt;</a>(qTS1),
<a name="l00302"></a>00302                                         <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;YieldTermStructure&gt;</a>(rTS),
<a name="l00303"></a>00303                                         <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;BlackVolTermStructure&gt;</a>(volTS1)));
<a name="l00304"></a>00304             p2 = boost::shared_ptr&lt;GeneralizedBlackScholesProcess&gt;(
<a name="l00305"></a>00305                 <span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_black_scholes_merton_process.html" title="Merton (1973) extension to the Black-Scholes stochastic process.">BlackScholesMertonProcess</a>(
<a name="l00306"></a>00306                                         <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;Quote&gt;</a>(spot2),
<a name="l00307"></a>00307                                         <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;YieldTermStructure&gt;</a>(qTS2),
<a name="l00308"></a>00308                                         <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;YieldTermStructure&gt;</a>(rTS),
<a name="l00309"></a>00309                                         <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;BlackVolTermStructure&gt;</a>(volTS2)));
<a name="l00310"></a>00310             analyticEngine=boost::shared_ptr&lt;PricingEngine&gt;(
<a name="l00311"></a>00311                 <span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_stulz_engine.html" title="Pricing engine for 2D European Baskets.">StulzEngine</a>(p1, p2, values[i].rho));
<a name="l00312"></a>00312             <span class="keywordflow">break</span>;
<a name="l00313"></a>00313           <span class="keywordflow">case</span> <a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04ea2e31e04ad3e4d01f2c488567c4251f76">SpreadBasket</a>:
<a name="l00314"></a>00314               p1 = boost::shared_ptr&lt;GeneralizedBlackScholesProcess&gt;(
<a name="l00315"></a>00315                   <span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_black_process.html" title="Black (1976) stochastic process.">BlackProcess</a>(<a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;Quote&gt;</a>(spot1),
<a name="l00316"></a>00316                                    <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;YieldTermStructure&gt;</a>(rTS),
<a name="l00317"></a>00317                                    <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;BlackVolTermStructure&gt;</a>(volTS1)));
<a name="l00318"></a>00318               p2 = boost::shared_ptr&lt;GeneralizedBlackScholesProcess&gt;(
<a name="l00319"></a>00319                   <span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_black_process.html" title="Black (1976) stochastic process.">BlackProcess</a>(<a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;Quote&gt;</a>(spot2),
<a name="l00320"></a>00320                                    <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;YieldTermStructure&gt;</a>(rTS),
<a name="l00321"></a>00321                                    <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;BlackVolTermStructure&gt;</a>(volTS2)));
<a name="l00322"></a>00322               
<a name="l00323"></a>00323               analyticEngine=boost::shared_ptr&lt;PricingEngine&gt;(
<a name="l00324"></a>00324                   <span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_kirk_engine.html" title="Pricing engine for spread option on two futures.">KirkEngine</a>(boost::dynamic_pointer_cast&lt;BlackProcess&gt;(p1), 
<a name="l00325"></a>00325                                  boost::dynamic_pointer_cast&lt;BlackProcess&gt;(p2), 
<a name="l00326"></a>00326                                  values[i].rho));
<a name="l00327"></a>00327             <span class="keywordflow">break</span>;
<a name="l00328"></a>00328           <span class="keywordflow">default</span>:
<a name="l00329"></a>00329               <a class="code" href="errors_8hpp.html#a8efe9cb3e67c8d0585e57b4d53c5d2fe" title="throw an error (possibly with file and line information)">QL_FAIL</a>(<span class="stringliteral">&quot;unknown basket type&quot;</span>);
<a name="l00330"></a>00330         }
<a name="l00331"></a>00331         
<a name="l00332"></a>00332         std::vector&lt;boost::shared_ptr&lt;StochasticProcess1D&gt; &gt; procs;
<a name="l00333"></a>00333         procs.push_back(p1);
<a name="l00334"></a>00334         procs.push_back(p2);
<a name="l00335"></a>00335 
<a name="l00336"></a>00336         <a class="code" href="class_quant_lib_1_1_matrix.html" title="Matrix used in linear algebra.">Matrix</a> correlationMatrix(2,2, values[i].rho);
<a name="l00337"></a>00337         <span class="keywordflow">for</span> (Integer j=0; j &lt; 2; j++) {
<a name="l00338"></a>00338             correlationMatrix[j][j] = 1.0;
<a name="l00339"></a>00339         }
<a name="l00340"></a>00340 
<a name="l00341"></a>00341         boost::shared_ptr&lt;StochasticProcessArray&gt; process(
<a name="l00342"></a>00342                          <span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_stochastic_process_array.html" title="Array of correlated 1-D stochastic processes">StochasticProcessArray</a>(procs,correlationMatrix));
<a name="l00343"></a>00343 
<a name="l00344"></a>00344         boost::shared_ptr&lt;PricingEngine&gt; mcEngine =
<a name="l00345"></a>00345             <a class="code" href="class_quant_lib_1_1_make_m_c_european_basket_engine.html" title="Monte Carlo basket-option engine factory.">MakeMCEuropeanBasketEngine&lt;PseudoRandom, Statistics&gt;</a>(process)
<a name="l00346"></a>00346             .withStepsPerYear(1)
<a name="l00347"></a>00347             .<a class="code" href="class_quant_lib_1_1_make_m_c_european_basket_engine.html#a6b1c058e8d02921eea644673e502a258">withSamples</a>(10000)
<a name="l00348"></a>00348             .<a class="code" href="class_quant_lib_1_1_make_m_c_european_basket_engine.html#a01bdcb8f04436efe0c00ee1ef21aeeb3">withSeed</a>(42);
<a name="l00349"></a>00349 
<a name="l00350"></a>00350         boost::shared_ptr&lt;PricingEngine&gt; fdEngine(
<a name="l00351"></a>00351                     <span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_fd2d_black_scholes_vanilla_engine.html" title="Two dimensional finite-differences Black Scholes vanilla option engine.">Fd2dBlackScholesVanillaEngine</a>(p1, p2, values[i].rho,
<a name="l00352"></a>00352                                                       50, 50, 15));
<a name="l00353"></a>00353         
<a name="l00354"></a>00354         <a class="code" href="class_quant_lib_1_1_basket_option.html" title="Basket option on a number of assets.">BasketOption</a> basketOption(<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#a5bd9db29b92ca1ea60f16bd2e7e031bb">basketTypeToPayoff</a>(values[i].basketType,
<a name="l00355"></a>00355                                                      payoff),
<a name="l00356"></a>00356                                   exercise);
<a name="l00357"></a>00357 
<a name="l00358"></a>00358         <span class="comment">// analytic engine</span>
<a name="l00359"></a>00359         basketOption.<a class="code" href="class_quant_lib_1_1_instrument.html#ac3f954c0c65d5c9815deb3e398ba1fe9" title="set the pricing engine to be used.">setPricingEngine</a>(analyticEngine);
<a name="l00360"></a>00360         <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> calculated = basketOption.<a class="code" href="class_quant_lib_1_1_instrument.html#a7dfec8f05e4dffbec262cecb6a4bab68" title="returns the net present value of the instrument.">NPV</a>();
<a name="l00361"></a>00361         <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> expected = values[i].result;
<a name="l00362"></a>00362         <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> error = std::fabs(calculated-expected);
<a name="l00363"></a>00363         <span class="keywordflow">if</span> (error &gt; values[i].tol) {
<a name="l00364"></a>00364             <a class="code" href="test-suite_2basketoption_8cpp.html#a48e62a25d30b5d3af8ba1e50ef370b7d">REPORT_FAILURE_2</a>(<span class="stringliteral">&quot;value&quot;</span>, values[i].basketType, payoff, exercise,
<a name="l00365"></a>00365                              values[i].s1, values[i].s2, values[i].q1,
<a name="l00366"></a>00366                              values[i].q2, values[i].r, today, values[i].v1,
<a name="l00367"></a>00367                              values[i].v2, values[i].rho, values[i].result,
<a name="l00368"></a>00368                              calculated, error, values[i].tol);
<a name="l00369"></a>00369         }
<a name="l00370"></a>00370 
<a name="l00371"></a>00371         <span class="comment">// fd engine</span>
<a name="l00372"></a>00372         basketOption.<a class="code" href="class_quant_lib_1_1_instrument.html#ac3f954c0c65d5c9815deb3e398ba1fe9" title="set the pricing engine to be used.">setPricingEngine</a>(fdEngine);
<a name="l00373"></a>00373         calculated = basketOption.<a class="code" href="class_quant_lib_1_1_instrument.html#a7dfec8f05e4dffbec262cecb6a4bab68" title="returns the net present value of the instrument.">NPV</a>();
<a name="l00374"></a>00374         <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> relError = <a class="code" href="namespace_quant_lib.html#aafcda44785eaeebddfc54147a234d11a">relativeError</a>(calculated, expected, expected);
<a name="l00375"></a>00375         <span class="keywordflow">if</span> (relError &gt; mcRelativeErrorTolerance ) {
<a name="l00376"></a>00376             <a class="code" href="test-suite_2basketoption_8cpp.html#a48e62a25d30b5d3af8ba1e50ef370b7d">REPORT_FAILURE_2</a>(<span class="stringliteral">&quot;FD value&quot;</span>, values[i].basketType, payoff,
<a name="l00377"></a>00377                              exercise, values[i].s1, values[i].s2,
<a name="l00378"></a>00378                              values[i].q1, values[i].q2, values[i].r,
<a name="l00379"></a>00379                              today, values[i].v1, values[i].v2, values[i].rho,
<a name="l00380"></a>00380                              values[i].result, calculated, relError,
<a name="l00381"></a>00381                              fdRelativeErrorTolerance);
<a name="l00382"></a>00382         }
<a name="l00383"></a>00383 
<a name="l00384"></a>00384         <span class="comment">// mc engine</span>
<a name="l00385"></a>00385         basketOption.<a class="code" href="class_quant_lib_1_1_instrument.html#ac3f954c0c65d5c9815deb3e398ba1fe9" title="set the pricing engine to be used.">setPricingEngine</a>(mcEngine);
<a name="l00386"></a>00386         calculated = basketOption.<a class="code" href="class_quant_lib_1_1_instrument.html#a7dfec8f05e4dffbec262cecb6a4bab68" title="returns the net present value of the instrument.">NPV</a>();
<a name="l00387"></a>00387         relError = <a class="code" href="namespace_quant_lib.html#aafcda44785eaeebddfc54147a234d11a">relativeError</a>(calculated, expected, values[i].s1);
<a name="l00388"></a>00388         <span class="keywordflow">if</span> (relError &gt; mcRelativeErrorTolerance ) {
<a name="l00389"></a>00389             <a class="code" href="test-suite_2basketoption_8cpp.html#a48e62a25d30b5d3af8ba1e50ef370b7d">REPORT_FAILURE_2</a>(<span class="stringliteral">&quot;MC value&quot;</span>, values[i].basketType, payoff,
<a name="l00390"></a>00390                              exercise, values[i].s1, values[i].s2,
<a name="l00391"></a>00391                              values[i].q1, values[i].q2, values[i].r,
<a name="l00392"></a>00392                              today, values[i].v1, values[i].v2, values[i].rho,
<a name="l00393"></a>00393                              values[i].result, calculated, relError,
<a name="l00394"></a>00394                              mcRelativeErrorTolerance);
<a name="l00395"></a>00395         }
<a name="l00396"></a>00396 
<a name="l00397"></a>00397     }
<a name="l00398"></a>00398 }
<a name="l00399"></a>00399 
<a name="l00400"></a><a class="code" href="class_basket_option_test.html#affc28e6599e1018d6384e734b0ff5657">00400</a> <span class="keywordtype">void</span> <a class="code" href="class_basket_option_test.html#affc28e6599e1018d6384e734b0ff5657">BasketOptionTest::testBarraquandThreeValues</a>() {
<a name="l00401"></a>00401 
<a name="l00402"></a>00402     BOOST_MESSAGE(<span class="stringliteral">&quot;Testing three-asset basket options &quot;</span>
<a name="l00403"></a>00403                   <span class="stringliteral">&quot;against Barraquand&#39;s values...&quot;</span>);
<a name="l00404"></a>00404 
<a name="l00405"></a>00405     <a class="code" href="test-suite_2utilities_8hpp.html#a7643bb6665e558bd38d6924db7e3c379">QL_TEST_START_TIMING</a>
<a name="l00406"></a>00406 
<a name="l00407"></a>00407     <span class="comment">/*</span>
<a name="l00408"></a>00408 <span class="comment">        Data from:</span>
<a name="l00409"></a>00409 <span class="comment">        &quot;Numerical Valuation of High Dimensional American Securities&quot;</span>
<a name="l00410"></a>00410 <span class="comment">        Barraquand, J. and Martineau, D.</span>
<a name="l00411"></a>00411 <span class="comment">        Journal of Financial and Quantitative Analysis 1995 3(30) 383-405</span>
<a name="l00412"></a>00412 <span class="comment">    */</span>
<a name="l00413"></a>00413     BasketOptionThreeData  values[] = {
<a name="l00414"></a>00414         <span class="comment">// time in months is with 30 days to the month..</span>
<a name="l00415"></a>00415         <span class="comment">// basketType, optionType,       strike,    s1,    s2,   s3,    r,    t,   v1,   v2,  v3,  rho, euro, american,</span>
<a name="l00416"></a>00416         <span class="comment">// Table 2</span>
<a name="l00417"></a>00417         <span class="comment">// not using 4 month case to speed up test</span>
<a name="l00418"></a>00418 <span class="comment">/*</span>
<a name="l00419"></a>00419 <span class="comment">        {MaxBasket, Option::Call,  35.0,  40.0,  40.0, 40.0, 0.05, 1.00, 0.20, 0.30, 0.50, 0.0, 8.59, 8.59},</span>
<a name="l00420"></a>00420 <span class="comment">        {MaxBasket, Option::Call,  40.0,  40.0,  40.0, 40.0, 0.05, 1.00, 0.20, 0.30, 0.50, 0.0, 3.84, 3.84},</span>
<a name="l00421"></a>00421 <span class="comment">        {MaxBasket, Option::Call,  45.0,  40.0,  40.0, 40.0, 0.05, 1.00, 0.20, 0.30, 0.50, 0.0, 0.89, 0.89},</span>
<a name="l00422"></a>00422 <span class="comment">        {MaxBasket, Option::Call,  35.0,  40.0,  40.0, 40.0, 0.05, 4.00, 0.20, 0.30, 0.50, 0.0, 12.55, 12.55},</span>
<a name="l00423"></a>00423 <span class="comment">        {MaxBasket, Option::Call,  40.0,  40.0,  40.0, 40.0, 0.05, 4.00, 0.20, 0.30, 0.50, 0.0, 7.87, 7.87},</span>
<a name="l00424"></a>00424 <span class="comment">        {MaxBasket, Option::Call,  45.0,  40.0,  40.0, 40.0, 0.05, 4.00, 0.20, 0.30, 0.50, 0.0, 4.26, 4.26},</span>
<a name="l00425"></a>00425 <span class="comment">        {MaxBasket, Option::Call,  35.0,  40.0,  40.0, 40.0, 0.05, 7.00, 0.20, 0.30, 0.50, 0.0, 15.29, 15.29},</span>
<a name="l00426"></a>00426 <span class="comment">        {MaxBasket, Option::Call,  40.0,  40.0,  40.0, 40.0, 0.05, 7.00, 0.20, 0.30, 0.50, 0.0, 10.72, 10.72},</span>
<a name="l00427"></a>00427 <span class="comment">        {MaxBasket, Option::Call,  45.0,  40.0,  40.0, 40.0, 0.05, 7.00, 0.20, 0.30, 0.50, 0.0, 6.96, 6.96},</span>
<a name="l00428"></a>00428 <span class="comment">*/</span>
<a name="l00429"></a>00429 <span class="comment">/*</span>
<a name="l00430"></a>00430 <span class="comment">        {MaxBasket, Option::Call,  35.0,  40.0,  40.0, 40.0, 0.05, 1.00, 0.20, 0.30, 0.50, 0.5, 7.78, 7.78},</span>
<a name="l00431"></a>00431 <span class="comment">        {MaxBasket, Option::Call,  40.0,  40.0,  40.0, 40.0, 0.05, 1.00, 0.20, 0.30, 0.50, 0.5, 3.18, 3.18},</span>
<a name="l00432"></a>00432 <span class="comment">        {MaxBasket, Option::Call,  45.0,  40.0,  40.0, 40.0, 0.05, 1.00, 0.20, 0.30, 0.50, 0.5, 0.82, 0.82},</span>
<a name="l00433"></a>00433 <span class="comment">        {MaxBasket, Option::Call,  35.0,  40.0,  40.0, 40.0, 0.05, 4.00, 0.20, 0.30, 0.50, 0.5, 10.97, 10.97},</span>
<a name="l00434"></a>00434 <span class="comment">        {MaxBasket, Option::Call,  40.0,  40.0,  40.0, 40.0, 0.05, 4.00, 0.20, 0.30, 0.50, 0.5, 6.69, 6.69},</span>
<a name="l00435"></a>00435 <span class="comment">        {MaxBasket, Option::Call,  45.0,  40.0,  40.0, 40.0, 0.05, 4.00, 0.20, 0.30, 0.50, 0.5, 3.70, 3.70},</span>
<a name="l00436"></a>00436 <span class="comment">        {MaxBasket, Option::Call,  35.0,  40.0,  40.0, 40.0, 0.05, 7.00, 0.20, 0.30, 0.50, 0.5, 13.23, 13.23},</span>
<a name="l00437"></a>00437 <span class="comment">        {MaxBasket, Option::Call,  40.0,  40.0,  40.0, 40.0, 0.05, 7.00, 0.20, 0.30, 0.50, 0.5, 9.11, 9.11},</span>
<a name="l00438"></a>00438 <span class="comment">        {MaxBasket, Option::Call,  45.0,  40.0,  40.0, 40.0, 0.05, 7.00, 0.20, 0.30, 0.50, 0.5, 5.98, 5.98},</span>
<a name="l00439"></a>00439 <span class="comment">*/</span>
<a name="l00440"></a>00440 <span class="comment">/*</span>
<a name="l00441"></a>00441 <span class="comment">        {MaxBasket, Option::Call,  35.0,  40.0,  40.0, 40.0, 0.05, 1.00, 0.20, 0.30, 0.50, 1.0, 6.53, 6.53},</span>
<a name="l00442"></a>00442 <span class="comment">        {MaxBasket, Option::Call,  40.0,  40.0,  40.0, 40.0, 0.05, 1.00, 0.20, 0.30, 0.50, 1.0, 2.38, 2.38},</span>
<a name="l00443"></a>00443 <span class="comment">        {MaxBasket, Option::Call,  45.0,  40.0,  40.0, 40.0, 0.05, 1.00, 0.20, 0.30, 0.50, 1.0, 0.74, 0.74},</span>
<a name="l00444"></a>00444 <span class="comment">        {MaxBasket, Option::Call,  35.0,  40.0,  40.0, 40.0, 0.05, 4.00, 0.20, 0.30, 0.50, 1.0, 8.51, 8.51},</span>
<a name="l00445"></a>00445 <span class="comment">        {MaxBasket, Option::Call,  40.0,  40.0,  40.0, 40.0, 0.05, 4.00, 0.20, 0.30, 0.50, 1.0, 4.92, 4.92},</span>
<a name="l00446"></a>00446 <span class="comment">        {MaxBasket, Option::Call,  45.0,  40.0,  40.0, 40.0, 0.05, 4.00, 0.20, 0.30, 0.50, 1.0, 2.97, 2.97},</span>
<a name="l00447"></a>00447 <span class="comment">        {MaxBasket, Option::Call,  35.0,  40.0,  40.0, 40.0, 0.05, 7.00, 0.20, 0.30, 0.50, 1.0, 10.04, 10.04},</span>
<a name="l00448"></a>00448 <span class="comment">        {MaxBasket, Option::Call,  40.0,  40.0,  40.0, 40.0, 0.05, 7.00, 0.20, 0.30, 0.50, 1.0, 6.64, 6.64},</span>
<a name="l00449"></a>00449 <span class="comment">        {MaxBasket, Option::Call,  45.0,  40.0,  40.0, 40.0, 0.05, 7.00, 0.20, 0.30, 0.50, 1.0, 4.61, 4.61},</span>
<a name="l00450"></a>00450 <span class="comment">*/</span>
<a name="l00451"></a>00451         <span class="comment">// Table 3</span>
<a name="l00452"></a>00452 
<a name="l00453"></a>00453         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eaf23fa1fce7ad8ddb6f0cf792f1c9b7de">MaxBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>,  35.0,  40.0,  40.0, 40.0, 0.05, 1.00, 0.20, 0.30, 0.50, 0.0, 0.00, 0.00},
<a name="l00454"></a>00454         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eaf23fa1fce7ad8ddb6f0cf792f1c9b7de">MaxBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>,  40.0,  40.0,  40.0, 40.0, 0.05, 1.00, 0.20, 0.30, 0.50, 0.0, 0.13, 0.23},
<a name="l00455"></a>00455         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eaf23fa1fce7ad8ddb6f0cf792f1c9b7de">MaxBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>,  45.0,  40.0,  40.0, 40.0, 0.05, 1.00, 0.20, 0.30, 0.50, 0.0, 2.26, 5.00},
<a name="l00456"></a>00456         <span class="comment">//{MaxBasket, Option::Put,  35.0,  40.0,  40.0, 40.0, 0.05, 4.00, 0.20, 0.30, 0.50, 0.0, 0.01, 0.01},</span>
<a name="l00457"></a>00457         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eaf23fa1fce7ad8ddb6f0cf792f1c9b7de">MaxBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>,  40.0,  40.0,  40.0, 40.0, 0.05, 4.00, 0.20, 0.30, 0.50, 0.0, 0.25, 0.44},
<a name="l00458"></a>00458         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eaf23fa1fce7ad8ddb6f0cf792f1c9b7de">MaxBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>,  45.0,  40.0,  40.0, 40.0, 0.05, 4.00, 0.20, 0.30, 0.50, 0.0, 1.55, 5.00},
<a name="l00459"></a>00459         <span class="comment">//{MaxBasket, Option::Put,  35.0,  40.0,  40.0, 40.0, 0.05, 7.00, 0.20, 0.30, 0.50, 0.0, 0.03, 0.04},</span>
<a name="l00460"></a>00460         <span class="comment">//{MaxBasket, Option::Put,  40.0,  40.0,  40.0, 40.0, 0.05, 7.00, 0.20, 0.30, 0.50, 0.0, 0.31, 0.57},</span>
<a name="l00461"></a>00461         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eaf23fa1fce7ad8ddb6f0cf792f1c9b7de">MaxBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>,  45.0,  40.0,  40.0, 40.0, 0.05, 7.00, 0.20, 0.30, 0.50, 0.0, 1.41, 5.00},
<a name="l00462"></a>00462 
<a name="l00463"></a>00463 <span class="comment">/*</span>
<a name="l00464"></a>00464 <span class="comment">        {MaxBasket, Option::Put,  35.0,  40.0,  40.0, 40.0, 0.05, 1.00, 0.20, 0.30, 0.50, 0.5, 0.00, 0.00},</span>
<a name="l00465"></a>00465 <span class="comment">        {MaxBasket, Option::Put,  40.0,  40.0,  40.0, 40.0, 0.05, 1.00, 0.20, 0.30, 0.50, 0.5, 0.38, 0.48},</span>
<a name="l00466"></a>00466 <span class="comment">        {MaxBasket, Option::Put,  45.0,  40.0,  40.0, 40.0, 0.05, 1.00, 0.20, 0.30, 0.50, 0.5, 3.00, 5.00},</span>
<a name="l00467"></a>00467 <span class="comment">        {MaxBasket, Option::Put,  35.0,  40.0,  40.0, 40.0, 0.05, 4.00, 0.20, 0.30, 0.50, 0.5, 0.07, 0.09},</span>
<a name="l00468"></a>00468 <span class="comment">        {MaxBasket, Option::Put,  40.0,  40.0,  40.0, 40.0, 0.05, 4.00, 0.20, 0.30, 0.50, 0.5, 0.72, 0.93},</span>
<a name="l00469"></a>00469 <span class="comment">        {MaxBasket, Option::Put,  45.0,  40.0,  40.0, 40.0, 0.05, 4.00, 0.20, 0.30, 0.50, 0.5, 2.65, 5.00},</span>
<a name="l00470"></a>00470 <span class="comment">        {MaxBasket, Option::Put,  35.0,  40.0,  40.0, 40.0, 0.05, 7.00, 0.20, 0.30, 0.50, 0.5, 0.17, 0.20},</span>
<a name="l00471"></a>00471 <span class="comment">*/</span>
<a name="l00472"></a>00472         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eaf23fa1fce7ad8ddb6f0cf792f1c9b7de">MaxBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>,  40.0,  40.0,  40.0, 40.0, 0.05, 7.00, 0.20, 0.30, 0.50, 0.5, 0.91, 1.19},
<a name="l00473"></a>00473 <span class="comment">/*</span>
<a name="l00474"></a>00474 <span class="comment">        {MaxBasket, Option::Put,  45.0,  40.0,  40.0, 40.0, 0.05, 7.00, 0.20, 0.30, 0.50, 0.5, 2.63, 5.00},</span>
<a name="l00475"></a>00475 <span class="comment"></span>
<a name="l00476"></a>00476 <span class="comment">        {MaxBasket, Option::Put,  35.0,  40.0,  40.0, 40.0, 0.05, 1.00, 0.20, 0.30, 0.50, 1.0, 0.01, 0.01},</span>
<a name="l00477"></a>00477 <span class="comment">        {MaxBasket, Option::Put,  40.0,  40.0,  40.0, 40.0, 0.05, 1.00, 0.20, 0.30, 0.50, 1.0, 0.84, 0.08},</span>
<a name="l00478"></a>00478 <span class="comment">        {MaxBasket, Option::Put,  45.0,  40.0,  40.0, 40.0, 0.05, 1.00, 0.20, 0.30, 0.50, 1.0, 4.18, 5.00},</span>
<a name="l00479"></a>00479 <span class="comment">        {MaxBasket, Option::Put,  35.0,  40.0,  40.0, 40.0, 0.05, 4.00, 0.20, 0.30, 0.50, 1.0, 0.19, 0.19},</span>
<a name="l00480"></a>00480 <span class="comment">        {MaxBasket, Option::Put,  40.0,  40.0,  40.0, 40.0, 0.05, 4.00, 0.20, 0.30, 0.50, 1.0, 1.51, 1.56},</span>
<a name="l00481"></a>00481 <span class="comment">        {MaxBasket, Option::Put,  45.0,  40.0,  40.0, 40.0, 0.05, 4.00, 0.20, 0.30, 0.50, 1.0, 4.49, 5.00},</span>
<a name="l00482"></a>00482 <span class="comment">        {MaxBasket, Option::Put,  35.0,  40.0,  40.0, 40.0, 0.05, 7.00, 0.20, 0.30, 0.50, 1.0, 0.41, 0.42},</span>
<a name="l00483"></a>00483 <span class="comment">        {MaxBasket, Option::Put,  40.0,  40.0,  40.0, 40.0, 0.05, 7.00, 0.20, 0.30, 0.50, 1.0, 1.87, 1.96},</span>
<a name="l00484"></a>00484 <span class="comment">        {MaxBasket, Option::Put,  45.0,  40.0,  40.0, 40.0, 0.05, 7.00, 0.20, 0.30, 0.50, 1.0, 4.70, 5.20}</span>
<a name="l00485"></a>00485 <span class="comment">*/</span>
<a name="l00486"></a>00486     };
<a name="l00487"></a>00487 
<a name="l00488"></a>00488     <a class="code" href="class_quant_lib_1_1_day_counter.html" title="day counter class">DayCounter</a> dc = <a class="code" href="class_quant_lib_1_1_actual360.html" title="Actual/360 day count convention.">Actual360</a>();
<a name="l00489"></a>00489     <a class="code" href="class_quant_lib_1_1_date.html" title="Concrete date class.">Date</a> today = <a class="code" href="namespaceanonymous__namespace_02marketmodel_8cpp_03.html#ae1b42c838cf0f4cf17262f0b22bac899">Date::todaysDate</a>();
<a name="l00490"></a>00490 
<a name="l00491"></a>00491     boost::shared_ptr&lt;SimpleQuote&gt; spot1(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value">SimpleQuote</a>(0.0));
<a name="l00492"></a>00492     boost::shared_ptr&lt;SimpleQuote&gt; spot2(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value">SimpleQuote</a>(0.0));
<a name="l00493"></a>00493     boost::shared_ptr&lt;SimpleQuote&gt; spot3(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value">SimpleQuote</a>(0.0));
<a name="l00494"></a>00494 
<a name="l00495"></a>00495     boost::shared_ptr&lt;SimpleQuote&gt; qRate(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value">SimpleQuote</a>(0.0));
<a name="l00496"></a>00496     boost::shared_ptr&lt;YieldTermStructure&gt; qTS = <a class="code" href="namespace_quant_lib.html#a1309465a856634dcd0caff78af7ca223">flatRate</a>(today, qRate, dc);
<a name="l00497"></a>00497 
<a name="l00498"></a>00498     boost::shared_ptr&lt;SimpleQuote&gt; rRate(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value">SimpleQuote</a>(0.0));
<a name="l00499"></a>00499     boost::shared_ptr&lt;YieldTermStructure&gt; rTS = <a class="code" href="namespace_quant_lib.html#a1309465a856634dcd0caff78af7ca223">flatRate</a>(today, rRate, dc);
<a name="l00500"></a>00500 
<a name="l00501"></a>00501     boost::shared_ptr&lt;SimpleQuote&gt; vol1(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value">SimpleQuote</a>(0.0));
<a name="l00502"></a>00502     boost::shared_ptr&lt;BlackVolTermStructure&gt; volTS1 = <a class="code" href="namespace_quant_lib.html#a589d5c4b0b60b0bdd42ae07d820b2ed3">flatVol</a>(today, vol1, dc);
<a name="l00503"></a>00503     boost::shared_ptr&lt;SimpleQuote&gt; vol2(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value">SimpleQuote</a>(0.0));
<a name="l00504"></a>00504     boost::shared_ptr&lt;BlackVolTermStructure&gt; volTS2 = <a class="code" href="namespace_quant_lib.html#a589d5c4b0b60b0bdd42ae07d820b2ed3">flatVol</a>(today, vol2, dc);
<a name="l00505"></a>00505     boost::shared_ptr&lt;SimpleQuote&gt; vol3(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value">SimpleQuote</a>(0.0));
<a name="l00506"></a>00506     boost::shared_ptr&lt;BlackVolTermStructure&gt; volTS3 = <a class="code" href="namespace_quant_lib.html#a589d5c4b0b60b0bdd42ae07d820b2ed3">flatVol</a>(today, vol3, dc);
<a name="l00507"></a>00507 
<a name="l00508"></a>00508     <span class="keywordflow">for</span> (<a class="code" href="namespace_quant_lib.html#af4cc4ef40b52c17cc455ead2a97aedb3" title="size of a container">Size</a> i=0; i&lt;<a class="code" href="test-suite_2utilities_8hpp.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(values); i++) {
<a name="l00509"></a>00509 
<a name="l00510"></a>00510         boost::shared_ptr&lt;PlainVanillaPayoff&gt; payoff(<span class="keyword">new</span>
<a name="l00511"></a>00511             <a class="code" href="class_quant_lib_1_1_plain_vanilla_payoff.html" title="Plain-vanilla payoff.">PlainVanillaPayoff</a>(values[i].<a class="code" href="class_traits_1_1template_01curve_1_1type.html">type</a>, values[i].strike));
<a name="l00512"></a>00512 
<a name="l00513"></a>00513         <a class="code" href="class_quant_lib_1_1_date.html" title="Concrete date class.">Date</a> exDate = today + <a class="code" href="namespace_quant_lib.html#a8ac1a45a37d8d3dda438a2e59e222620" title="integer number">Integer</a>(values[i].<a class="code" href="namespaceanonymous__namespace_02quantlibbenchmark_8cpp_03.html#a7a969063fde0030bd36b46055e824c34">t</a>)*30;
<a name="l00514"></a>00514         boost::shared_ptr&lt;Exercise&gt; exercise(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_european_exercise.html" title="European exercise.">EuropeanExercise</a>(exDate));
<a name="l00515"></a>00515         boost::shared_ptr&lt;Exercise&gt; amExercise(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_american_exercise.html" title="American exercise.">AmericanExercise</a>(today,
<a name="l00516"></a>00516                                                                     exDate));
<a name="l00517"></a>00517 
<a name="l00518"></a>00518         spot1 -&gt;setValue(values[i].s1);
<a name="l00519"></a>00519         spot2 -&gt;setValue(values[i].s2);
<a name="l00520"></a>00520         spot3 -&gt;setValue(values[i].s3);
<a name="l00521"></a>00521         rRate -&gt;setValue(values[i].r );
<a name="l00522"></a>00522         vol1  -&gt;setValue(values[i].v1);
<a name="l00523"></a>00523         vol2  -&gt;setValue(values[i].v2);
<a name="l00524"></a>00524         vol3  -&gt;setValue(values[i].v3);
<a name="l00525"></a>00525 
<a name="l00526"></a>00526         boost::shared_ptr&lt;StochasticProcess1D&gt; stochProcess1(<span class="keyword">new</span>
<a name="l00527"></a>00527             <a class="code" href="class_quant_lib_1_1_black_scholes_merton_process.html" title="Merton (1973) extension to the Black-Scholes stochastic process.">BlackScholesMertonProcess</a>(<a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;Quote&gt;</a>(spot1),
<a name="l00528"></a>00528                                       <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;YieldTermStructure&gt;</a>(qTS),
<a name="l00529"></a>00529                                       <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;YieldTermStructure&gt;</a>(rTS),
<a name="l00530"></a>00530                                       <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;BlackVolTermStructure&gt;</a>(volTS1)));
<a name="l00531"></a>00531 
<a name="l00532"></a>00532         boost::shared_ptr&lt;StochasticProcess1D&gt; stochProcess2(<span class="keyword">new</span>
<a name="l00533"></a>00533             <a class="code" href="class_quant_lib_1_1_black_scholes_merton_process.html" title="Merton (1973) extension to the Black-Scholes stochastic process.">BlackScholesMertonProcess</a>(<a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;Quote&gt;</a>(spot2),
<a name="l00534"></a>00534                                       <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;YieldTermStructure&gt;</a>(qTS),
<a name="l00535"></a>00535                                       <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;YieldTermStructure&gt;</a>(rTS),
<a name="l00536"></a>00536                                       <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;BlackVolTermStructure&gt;</a>(volTS2)));
<a name="l00537"></a>00537 
<a name="l00538"></a>00538         boost::shared_ptr&lt;StochasticProcess1D&gt; stochProcess3(<span class="keyword">new</span>
<a name="l00539"></a>00539             <a class="code" href="class_quant_lib_1_1_black_scholes_merton_process.html" title="Merton (1973) extension to the Black-Scholes stochastic process.">BlackScholesMertonProcess</a>(<a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;Quote&gt;</a>(spot3),
<a name="l00540"></a>00540                                       <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;YieldTermStructure&gt;</a>(qTS),
<a name="l00541"></a>00541                                       <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;YieldTermStructure&gt;</a>(rTS),
<a name="l00542"></a>00542                                       <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;BlackVolTermStructure&gt;</a>(volTS3)));
<a name="l00543"></a>00543 
<a name="l00544"></a>00544         std::vector&lt;boost::shared_ptr&lt;StochasticProcess1D&gt; &gt; procs;
<a name="l00545"></a>00545         procs.push_back(stochProcess1);
<a name="l00546"></a>00546         procs.push_back(stochProcess2);
<a name="l00547"></a>00547         procs.push_back(stochProcess3);
<a name="l00548"></a>00548 
<a name="l00549"></a>00549         <a class="code" href="class_quant_lib_1_1_matrix.html" title="Matrix used in linear algebra.">Matrix</a> correlation(3,3, values[i].rho);
<a name="l00550"></a>00550         <span class="keywordflow">for</span> (<a class="code" href="namespace_quant_lib.html#a8ac1a45a37d8d3dda438a2e59e222620" title="integer number">Integer</a> j=0; j &lt; 3; j++) {
<a name="l00551"></a>00551             correlation[j][j] = 1.0;
<a name="l00552"></a>00552         }
<a name="l00553"></a>00553 
<a name="l00554"></a>00554         <span class="comment">// FLOATING_POINT_EXCEPTION</span>
<a name="l00555"></a>00555         boost::shared_ptr&lt;StochasticProcessArray&gt; process(
<a name="l00556"></a>00556                                <span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_stochastic_process_array.html" title="Array of correlated 1-D stochastic processes">StochasticProcessArray</a>(procs,correlation));
<a name="l00557"></a>00557 
<a name="l00558"></a>00558         <span class="comment">// use a 3D sobol sequence...</span>
<a name="l00559"></a>00559         <span class="comment">// Think long and hard before moving to more than 1 timestep....</span>
<a name="l00560"></a>00560         boost::shared_ptr&lt;PricingEngine&gt; mcQuasiEngine =
<a name="l00561"></a>00561             <a class="code" href="class_quant_lib_1_1_make_m_c_european_basket_engine.html" title="Monte Carlo basket-option engine factory.">MakeMCEuropeanBasketEngine&lt;LowDiscrepancy&gt;</a>(process)
<a name="l00562"></a>00562             .withStepsPerYear(1)
<a name="l00563"></a>00563             .<a class="code" href="class_quant_lib_1_1_make_m_c_european_basket_engine.html#a6b1c058e8d02921eea644673e502a258">withSamples</a>(8091)
<a name="l00564"></a>00564             .<a class="code" href="class_quant_lib_1_1_make_m_c_european_basket_engine.html#a01bdcb8f04436efe0c00ee1ef21aeeb3">withSeed</a>(42);
<a name="l00565"></a>00565 
<a name="l00566"></a>00566         <a class="code" href="class_quant_lib_1_1_basket_option.html" title="Basket option on a number of assets.">BasketOption</a> euroBasketOption(<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#a5bd9db29b92ca1ea60f16bd2e7e031bb">basketTypeToPayoff</a>(values[i].basketType,
<a name="l00567"></a>00567                                                          payoff),
<a name="l00568"></a>00568                                       exercise);
<a name="l00569"></a>00569         euroBasketOption.<a class="code" href="class_quant_lib_1_1_instrument.html#ac3f954c0c65d5c9815deb3e398ba1fe9" title="set the pricing engine to be used.">setPricingEngine</a>(mcQuasiEngine);
<a name="l00570"></a>00570 
<a name="l00571"></a>00571         <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> expected = values[i].euroValue;
<a name="l00572"></a>00572         <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> calculated = euroBasketOption.<a class="code" href="class_quant_lib_1_1_instrument.html#a7dfec8f05e4dffbec262cecb6a4bab68" title="returns the net present value of the instrument.">NPV</a>();
<a name="l00573"></a>00573         <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> relError = <a class="code" href="namespace_quant_lib.html#aafcda44785eaeebddfc54147a234d11a">relativeError</a>(calculated, expected, values[i].s1);
<a name="l00574"></a>00574         <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> mcRelativeErrorTolerance = 0.01;
<a name="l00575"></a>00575         <span class="keywordflow">if</span> (relError &gt; mcRelativeErrorTolerance ) {
<a name="l00576"></a>00576             <a class="code" href="test-suite_2basketoption_8cpp.html#a9882a11ea70bc069cf54f748cf3d43de">REPORT_FAILURE_3</a>(<span class="stringliteral">&quot;MC Quasi value&quot;</span>, values[i].basketType, payoff,
<a name="l00577"></a>00577                              exercise, values[i].s1, values[i].s2,
<a name="l00578"></a>00578                              values[i].s3, values[i].r, today, values[i].v1,
<a name="l00579"></a>00579                              values[i].v2, values[i].v3, values[i].rho,
<a name="l00580"></a>00580                              values[i].euroValue, calculated, relError,
<a name="l00581"></a>00581                              mcRelativeErrorTolerance);
<a name="l00582"></a>00582         }
<a name="l00583"></a>00583 
<a name="l00584"></a>00584 
<a name="l00585"></a>00585         <a class="code" href="namespace_quant_lib.html#af4cc4ef40b52c17cc455ead2a97aedb3" title="size of a container">Size</a> requiredSamples = 1000;
<a name="l00586"></a>00586         <a class="code" href="namespace_quant_lib.html#af4cc4ef40b52c17cc455ead2a97aedb3" title="size of a container">Size</a> timeSteps = 500;
<a name="l00587"></a>00587         <a class="code" href="namespace_quant_lib.html#a9fbc8c414c2b597d214cca2f9e914740" title="large positive integer">BigNatural</a> seed = 1;
<a name="l00588"></a>00588         boost::shared_ptr&lt;PricingEngine&gt; mcLSMCEngine =
<a name="l00589"></a>00589             <a class="code" href="class_quant_lib_1_1_make_m_c_american_basket_engine.html" title="Monte Carlo American basket-option engine factory.">MakeMCAmericanBasketEngine&lt;&gt;</a>(process)
<a name="l00590"></a>00590             .withSteps(timeSteps)
<a name="l00591"></a>00591             .<a class="code" href="class_quant_lib_1_1_make_m_c_american_basket_engine.html#ab2fe62e25f242f6d5144738c9da552a5">withAntitheticVariate</a>()
<a name="l00592"></a>00592             .<a class="code" href="class_quant_lib_1_1_make_m_c_american_basket_engine.html#afb17129367cf99ad01626491a16a24c8">withSamples</a>(requiredSamples)
<a name="l00593"></a>00593             .<a class="code" href="class_quant_lib_1_1_make_m_c_american_basket_engine.html#ac7027fdb761a8d016c9ef8a7f9abf8d3">withCalibrationSamples</a>(requiredSamples/4)
<a name="l00594"></a>00594             .<a class="code" href="class_quant_lib_1_1_make_m_c_american_basket_engine.html#abc40345bb871b86127e6017cfd457bcd">withSeed</a>(seed);
<a name="l00595"></a>00595 
<a name="l00596"></a>00596         <a class="code" href="class_quant_lib_1_1_basket_option.html" title="Basket option on a number of assets.">BasketOption</a> amBasketOption(<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#a5bd9db29b92ca1ea60f16bd2e7e031bb">basketTypeToPayoff</a>(values[i].basketType,
<a name="l00597"></a>00597                                                        payoff),
<a name="l00598"></a>00598                                     amExercise);
<a name="l00599"></a>00599         amBasketOption.<a class="code" href="class_quant_lib_1_1_instrument.html#ac3f954c0c65d5c9815deb3e398ba1fe9" title="set the pricing engine to be used.">setPricingEngine</a>(mcLSMCEngine);
<a name="l00600"></a>00600 
<a name="l00601"></a>00601         expected = values[i].amValue;
<a name="l00602"></a>00602         calculated = amBasketOption.<a class="code" href="class_quant_lib_1_1_instrument.html#a7dfec8f05e4dffbec262cecb6a4bab68" title="returns the net present value of the instrument.">NPV</a>();
<a name="l00603"></a>00603         relError = <a class="code" href="namespace_quant_lib.html#aafcda44785eaeebddfc54147a234d11a">relativeError</a>(calculated, expected, values[i].s1);
<a name="l00604"></a>00604         <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> mcAmericanRelativeErrorTolerance = 0.01;
<a name="l00605"></a>00605         <span class="keywordflow">if</span> (relError &gt; mcAmericanRelativeErrorTolerance) {
<a name="l00606"></a>00606             <a class="code" href="test-suite_2basketoption_8cpp.html#a9882a11ea70bc069cf54f748cf3d43de">REPORT_FAILURE_3</a>(<span class="stringliteral">&quot;MC LSMC Value&quot;</span>, values[i].basketType, payoff,
<a name="l00607"></a>00607                              exercise, values[i].s1, values[i].s2,
<a name="l00608"></a>00608                              values[i].s3, values[i].r, today, values[i].v1,
<a name="l00609"></a>00609                              values[i].v2, values[i].v3, values[i].rho,
<a name="l00610"></a>00610                              values[i].amValue, calculated, relError,
<a name="l00611"></a>00611                              mcRelativeErrorTolerance);
<a name="l00612"></a>00612         }
<a name="l00613"></a>00613 
<a name="l00614"></a>00614     }
<a name="l00615"></a>00615 }
<a name="l00616"></a>00616 
<a name="l00617"></a><a class="code" href="class_basket_option_test.html#a194ab5f951f26b624943d2e36bbf7320">00617</a> <span class="keywordtype">void</span> <a class="code" href="class_basket_option_test.html#a194ab5f951f26b624943d2e36bbf7320">BasketOptionTest::testTavellaValues</a>() {
<a name="l00618"></a>00618 
<a name="l00619"></a>00619     BOOST_MESSAGE(<span class="stringliteral">&quot;Testing three-asset American basket options &quot;</span>
<a name="l00620"></a>00620                   <span class="stringliteral">&quot;against Tavella&#39;s values...&quot;</span>);
<a name="l00621"></a>00621 
<a name="l00622"></a>00622     <a class="code" href="test-suite_2utilities_8hpp.html#a7643bb6665e558bd38d6924db7e3c379">QL_TEST_START_TIMING</a>
<a name="l00623"></a>00623 
<a name="l00624"></a>00624     <span class="comment">/*</span>
<a name="l00625"></a>00625 <span class="comment">        Data from:</span>
<a name="l00626"></a>00626 <span class="comment">        &quot;Quantitative Methods in Derivatives Pricing&quot;</span>
<a name="l00627"></a>00627 <span class="comment">        Tavella, D. A.   -   Wiley (2002)</span>
<a name="l00628"></a>00628 <span class="comment">    */</span>
<a name="l00629"></a>00629     BasketOptionThreeData  values[] = {
<a name="l00630"></a>00630         <span class="comment">// time in months is with 30 days to the month..</span>
<a name="l00631"></a>00631         <span class="comment">// basketType, optionType,       strike,    s1,    s2,   s3,    r,    t,   v1,   v2,  v3,  rho, euroValue, american Value,</span>
<a name="l00632"></a>00632         {<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eaf23fa1fce7ad8ddb6f0cf792f1c9b7de">MaxBasket</a>, <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>,  100,    100,   100, 100,  0.05, 3.00, 0.20, 0.20, 0.20, 0.0, -999, 18.082}
<a name="l00633"></a>00633     };
<a name="l00634"></a>00634 
<a name="l00635"></a>00635     <a class="code" href="class_quant_lib_1_1_day_counter.html" title="day counter class">DayCounter</a> dc = <a class="code" href="class_quant_lib_1_1_actual360.html" title="Actual/360 day count convention.">Actual360</a>();
<a name="l00636"></a>00636     <a class="code" href="class_quant_lib_1_1_date.html" title="Concrete date class.">Date</a> today = <a class="code" href="namespaceanonymous__namespace_02marketmodel_8cpp_03.html#ae1b42c838cf0f4cf17262f0b22bac899">Date::todaysDate</a>();
<a name="l00637"></a>00637 
<a name="l00638"></a>00638     boost::shared_ptr&lt;SimpleQuote&gt; spot1(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value">SimpleQuote</a>(0.0));
<a name="l00639"></a>00639     boost::shared_ptr&lt;SimpleQuote&gt; spot2(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value">SimpleQuote</a>(0.0));
<a name="l00640"></a>00640     boost::shared_ptr&lt;SimpleQuote&gt; spot3(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value">SimpleQuote</a>(0.0));
<a name="l00641"></a>00641 
<a name="l00642"></a>00642     boost::shared_ptr&lt;SimpleQuote&gt; qRate(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value">SimpleQuote</a>(0.1));
<a name="l00643"></a>00643     boost::shared_ptr&lt;YieldTermStructure&gt; qTS = <a class="code" href="namespace_quant_lib.html#a1309465a856634dcd0caff78af7ca223">flatRate</a>(today, qRate, dc);
<a name="l00644"></a>00644 
<a name="l00645"></a>00645     boost::shared_ptr&lt;SimpleQuote&gt; rRate(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value">SimpleQuote</a>(0.05));
<a name="l00646"></a>00646     boost::shared_ptr&lt;YieldTermStructure&gt; rTS = <a class="code" href="namespace_quant_lib.html#a1309465a856634dcd0caff78af7ca223">flatRate</a>(today, rRate, dc);
<a name="l00647"></a>00647 
<a name="l00648"></a>00648     boost::shared_ptr&lt;SimpleQuote&gt; vol1(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value">SimpleQuote</a>(0.0));
<a name="l00649"></a>00649     boost::shared_ptr&lt;BlackVolTermStructure&gt; volTS1 = <a class="code" href="namespace_quant_lib.html#a589d5c4b0b60b0bdd42ae07d820b2ed3">flatVol</a>(today, vol1, dc);
<a name="l00650"></a>00650     boost::shared_ptr&lt;SimpleQuote&gt; vol2(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value">SimpleQuote</a>(0.0));
<a name="l00651"></a>00651     boost::shared_ptr&lt;BlackVolTermStructure&gt; volTS2 = <a class="code" href="namespace_quant_lib.html#a589d5c4b0b60b0bdd42ae07d820b2ed3">flatVol</a>(today, vol2, dc);
<a name="l00652"></a>00652     boost::shared_ptr&lt;SimpleQuote&gt; vol3(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value">SimpleQuote</a>(0.0));
<a name="l00653"></a>00653     boost::shared_ptr&lt;BlackVolTermStructure&gt; volTS3 = <a class="code" href="namespace_quant_lib.html#a589d5c4b0b60b0bdd42ae07d820b2ed3">flatVol</a>(today, vol3, dc);
<a name="l00654"></a>00654 
<a name="l00655"></a>00655     <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> mcRelativeErrorTolerance = 0.01;
<a name="l00656"></a>00656     <a class="code" href="namespace_quant_lib.html#af4cc4ef40b52c17cc455ead2a97aedb3" title="size of a container">Size</a> requiredSamples = 10000;
<a name="l00657"></a>00657     <a class="code" href="namespace_quant_lib.html#af4cc4ef40b52c17cc455ead2a97aedb3" title="size of a container">Size</a> timeSteps = 20;
<a name="l00658"></a>00658     <a class="code" href="namespace_quant_lib.html#a9fbc8c414c2b597d214cca2f9e914740" title="large positive integer">BigNatural</a> seed = 0;
<a name="l00659"></a>00659 
<a name="l00660"></a>00660 
<a name="l00661"></a>00661     boost::shared_ptr&lt;PlainVanillaPayoff&gt; payoff(<span class="keyword">new</span>
<a name="l00662"></a>00662         <a class="code" href="class_quant_lib_1_1_plain_vanilla_payoff.html" title="Plain-vanilla payoff.">PlainVanillaPayoff</a>(values[0].<a class="code" href="class_traits_1_1template_01curve_1_1type.html">type</a>, values[0].strike));
<a name="l00663"></a>00663 
<a name="l00664"></a>00664     <a class="code" href="class_quant_lib_1_1_date.html" title="Concrete date class.">Date</a> exDate = today + <a class="code" href="namespace_quant_lib.html#a8ac1a45a37d8d3dda438a2e59e222620" title="integer number">Integer</a>(values[0].<a class="code" href="namespaceanonymous__namespace_02quantlibbenchmark_8cpp_03.html#a7a969063fde0030bd36b46055e824c34">t</a>*360+0.5);
<a name="l00665"></a>00665     boost::shared_ptr&lt;Exercise&gt; exercise(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_american_exercise.html" title="American exercise.">AmericanExercise</a>(today, exDate));
<a name="l00666"></a>00666 
<a name="l00667"></a>00667     spot1 -&gt;setValue(values[0].s1);
<a name="l00668"></a>00668     spot2 -&gt;setValue(values[0].s2);
<a name="l00669"></a>00669     spot3 -&gt;setValue(values[0].s3);
<a name="l00670"></a>00670     vol1  -&gt;setValue(values[0].v1);
<a name="l00671"></a>00671     vol2  -&gt;setValue(values[0].v2);
<a name="l00672"></a>00672     vol3  -&gt;setValue(values[0].v3);
<a name="l00673"></a>00673 
<a name="l00674"></a>00674     boost::shared_ptr&lt;StochasticProcess1D&gt; stochProcess1(<span class="keyword">new</span>
<a name="l00675"></a>00675         <a class="code" href="class_quant_lib_1_1_black_scholes_merton_process.html" title="Merton (1973) extension to the Black-Scholes stochastic process.">BlackScholesMertonProcess</a>(<a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;Quote&gt;</a>(spot1),
<a name="l00676"></a>00676                                   <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;YieldTermStructure&gt;</a>(qTS),
<a name="l00677"></a>00677                                   <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;YieldTermStructure&gt;</a>(rTS),
<a name="l00678"></a>00678                                   <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;BlackVolTermStructure&gt;</a>(volTS1)));
<a name="l00679"></a>00679 
<a name="l00680"></a>00680     boost::shared_ptr&lt;StochasticProcess1D&gt; stochProcess2(<span class="keyword">new</span>
<a name="l00681"></a>00681         <a class="code" href="class_quant_lib_1_1_black_scholes_merton_process.html" title="Merton (1973) extension to the Black-Scholes stochastic process.">BlackScholesMertonProcess</a>(<a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;Quote&gt;</a>(spot2),
<a name="l00682"></a>00682                                   <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;YieldTermStructure&gt;</a>(qTS),
<a name="l00683"></a>00683                                   <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;YieldTermStructure&gt;</a>(rTS),
<a name="l00684"></a>00684                                   <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;BlackVolTermStructure&gt;</a>(volTS2)));
<a name="l00685"></a>00685 
<a name="l00686"></a>00686     boost::shared_ptr&lt;StochasticProcess1D&gt; stochProcess3(<span class="keyword">new</span>
<a name="l00687"></a>00687         <a class="code" href="class_quant_lib_1_1_black_scholes_merton_process.html" title="Merton (1973) extension to the Black-Scholes stochastic process.">BlackScholesMertonProcess</a>(<a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;Quote&gt;</a>(spot3),
<a name="l00688"></a>00688                                   <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;YieldTermStructure&gt;</a>(qTS),
<a name="l00689"></a>00689                                   <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;YieldTermStructure&gt;</a>(rTS),
<a name="l00690"></a>00690                                   <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;BlackVolTermStructure&gt;</a>(volTS3)));
<a name="l00691"></a>00691 
<a name="l00692"></a>00692     std::vector&lt;boost::shared_ptr&lt;StochasticProcess1D&gt; &gt; procs;
<a name="l00693"></a>00693     procs.push_back(stochProcess1);
<a name="l00694"></a>00694     procs.push_back(stochProcess2);
<a name="l00695"></a>00695     procs.push_back(stochProcess3);
<a name="l00696"></a>00696 
<a name="l00697"></a>00697     <a class="code" href="class_quant_lib_1_1_matrix.html" title="Matrix used in linear algebra.">Matrix</a> correlation(3,3, 0.0);
<a name="l00698"></a>00698     <span class="keywordflow">for</span> (Integer j=0; j &lt; 3; j++) {
<a name="l00699"></a>00699         correlation[j][j] = 1.0;
<a name="l00700"></a>00700     }
<a name="l00701"></a>00701     correlation[1][0] = -0.25;
<a name="l00702"></a>00702     correlation[0][1] = -0.25;
<a name="l00703"></a>00703     correlation[2][0] = 0.25;
<a name="l00704"></a>00704     correlation[0][2] = 0.25;
<a name="l00705"></a>00705     correlation[2][1] = 0.3;
<a name="l00706"></a>00706     correlation[1][2] = 0.3;
<a name="l00707"></a>00707 
<a name="l00708"></a>00708     boost::shared_ptr&lt;StochasticProcessArray&gt; process(
<a name="l00709"></a>00709                                <span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_stochastic_process_array.html" title="Array of correlated 1-D stochastic processes">StochasticProcessArray</a>(procs,correlation));
<a name="l00710"></a>00710     boost::shared_ptr&lt;PricingEngine&gt; mcLSMCEngine =
<a name="l00711"></a>00711         <a class="code" href="class_quant_lib_1_1_make_m_c_american_basket_engine.html" title="Monte Carlo American basket-option engine factory.">MakeMCAmericanBasketEngine&lt;&gt;</a>(process)
<a name="l00712"></a>00712         .withSteps(timeSteps)
<a name="l00713"></a>00713         .<a class="code" href="class_quant_lib_1_1_make_m_c_american_basket_engine.html#ab2fe62e25f242f6d5144738c9da552a5">withAntitheticVariate</a>()
<a name="l00714"></a>00714         .<a class="code" href="class_quant_lib_1_1_make_m_c_american_basket_engine.html#afb17129367cf99ad01626491a16a24c8">withSamples</a>(requiredSamples)
<a name="l00715"></a>00715         .<a class="code" href="class_quant_lib_1_1_make_m_c_american_basket_engine.html#ac7027fdb761a8d016c9ef8a7f9abf8d3">withCalibrationSamples</a>(requiredSamples/4)
<a name="l00716"></a>00716         .<a class="code" href="class_quant_lib_1_1_make_m_c_american_basket_engine.html#abc40345bb871b86127e6017cfd457bcd">withSeed</a>(seed);
<a name="l00717"></a>00717 
<a name="l00718"></a>00718     <a class="code" href="class_quant_lib_1_1_basket_option.html" title="Basket option on a number of assets.">BasketOption</a> basketOption(<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#a5bd9db29b92ca1ea60f16bd2e7e031bb">basketTypeToPayoff</a>(values[0].basketType,
<a name="l00719"></a>00719                                                  payoff),
<a name="l00720"></a>00720                               exercise);
<a name="l00721"></a>00721     basketOption.<a class="code" href="class_quant_lib_1_1_instrument.html#ac3f954c0c65d5c9815deb3e398ba1fe9" title="set the pricing engine to be used.">setPricingEngine</a>(mcLSMCEngine);
<a name="l00722"></a>00722 
<a name="l00723"></a>00723     <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> calculated = basketOption.<a class="code" href="class_quant_lib_1_1_instrument.html#a7dfec8f05e4dffbec262cecb6a4bab68" title="returns the net present value of the instrument.">NPV</a>();
<a name="l00724"></a>00724     <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> expected = values[0].amValue;
<a name="l00725"></a>00725     <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> errorEstimate = basketOption.<a class="code" href="class_quant_lib_1_1_instrument.html#ada8c62ad5a0f65c2c55ac67651689aa9" title="returns the error estimate on the NPV when available.">errorEstimate</a>();
<a name="l00726"></a>00726     <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> relError = <a class="code" href="namespace_quant_lib.html#aafcda44785eaeebddfc54147a234d11a">relativeError</a>(calculated, expected, values[0].s1);
<a name="l00727"></a>00727     <span class="keywordflow">if</span> (relError &gt; mcRelativeErrorTolerance ) {
<a name="l00728"></a>00728         <a class="code" href="test-suite_2basketoption_8cpp.html#a9882a11ea70bc069cf54f748cf3d43de">REPORT_FAILURE_3</a>(<span class="stringliteral">&quot;MC LSMC Tavella value&quot;</span>, values[0].basketType,
<a name="l00729"></a>00729                          payoff, exercise, values[0].s1, values[0].s2,
<a name="l00730"></a>00730                          values[0].s3, values[0].r, today, values[0].v1,
<a name="l00731"></a>00731                          values[0].v2, values[0].v3, values[0].rho,
<a name="l00732"></a>00732                          values[0].amValue, calculated, errorEstimate,
<a name="l00733"></a>00733                          mcRelativeErrorTolerance);
<a name="l00734"></a>00734     }
<a name="l00735"></a>00735 }
<a name="l00736"></a>00736 
<a name="l00737"></a><a class="code" href="class_basket_option_test.html#a4f05777b31be1f8684df81727699620b">00737</a> <span class="keywordtype">void</span> <a class="code" href="class_basket_option_test.html#a4f05777b31be1f8684df81727699620b">BasketOptionTest::testOneDAmericanValues</a>() {
<a name="l00738"></a>00738 
<a name="l00739"></a>00739     BOOST_MESSAGE(<span class="stringliteral">&quot;Testing basket American options against 1-D case...&quot;</span>);
<a name="l00740"></a>00740 
<a name="l00741"></a>00741     <a class="code" href="test-suite_2utilities_8hpp.html#a7643bb6665e558bd38d6924db7e3c379">QL_TEST_START_TIMING</a>
<a name="l00742"></a>00742 
<a name="l00743"></a>00743     BasketOptionOneData values[] = {
<a name="l00744"></a>00744         <span class="comment">//        type, strike,   spot,    q,    r,    t,  vol,   value, tol</span>
<a name="l00745"></a>00745         { <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>, 100.00,  80.00,   0.0, 0.06,   0.5, 0.4,  21.6059, 1e-2 },
<a name="l00746"></a>00746         { <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>, 100.00,  85.00,   0.0, 0.06,   0.5, 0.4,  18.0374, 1e-2 },
<a name="l00747"></a>00747         { <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>, 100.00,  90.00,   0.0, 0.06,   0.5, 0.4,  14.9187, 1e-2 },
<a name="l00748"></a>00748         { <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>, 100.00,  95.00,   0.0, 0.06,   0.5, 0.4,  12.2314, 1e-2 },
<a name="l00749"></a>00749         { <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>, 100.00, 100.00,   0.0, 0.06,   0.5, 0.4,  9.9458, 1e-2 },
<a name="l00750"></a>00750         { <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>, 100.00, 105.00,   0.0, 0.06,   0.5, 0.4,  8.0281, 1e-2 },
<a name="l00751"></a>00751         { <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>, 100.00, 110.00,   0.0, 0.06,   0.5, 0.4,  6.4352, 1e-2 },
<a name="l00752"></a>00752         { <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>, 100.00, 115.00,   0.0, 0.06,   0.5, 0.4,  5.1265, 1e-2 },
<a name="l00753"></a>00753         { <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>, 100.00, 120.00,   0.0, 0.06,   0.5, 0.4,  4.0611, 1e-2 },
<a name="l00754"></a>00754 
<a name="l00755"></a>00755         <span class="comment">// Longstaff Schwartz 1D example</span>
<a name="l00756"></a>00756         <span class="comment">// use constant and three Laguerre polynomials</span>
<a name="l00757"></a>00757         <span class="comment">// 100,000 paths and 50 timesteps per year</span>
<a name="l00758"></a>00758         { <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>, 40.00, 36.00,   0.0, 0.06,   1.0, 0.2,  4.478, 1e-2 },
<a name="l00759"></a>00759         { <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>, 40.00, 36.00,   0.0, 0.06,   2.0, 0.2,  4.840, 1e-2 },
<a name="l00760"></a>00760         { <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>, 40.00, 36.00,   0.0, 0.06,   1.0, 0.4,  7.101, 1e-2 },
<a name="l00761"></a>00761         { <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>, 40.00, 36.00,   0.0, 0.06,   2.0, 0.4,  8.508, 1e-2 },
<a name="l00762"></a>00762 
<a name="l00763"></a>00763         { <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>, 40.00, 38.00,   0.0, 0.06,   1.0, 0.2,  3.250, 1e-2 },
<a name="l00764"></a>00764         { <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>, 40.00, 38.00,   0.0, 0.06,   2.0, 0.2,  3.745, 1e-2 },
<a name="l00765"></a>00765         { <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>, 40.00, 38.00,   0.0, 0.06,   1.0, 0.4,  6.148, 1e-2 },
<a name="l00766"></a>00766         { <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>, 40.00, 38.00,   0.0, 0.06,   2.0, 0.4,  7.670, 1e-2 },
<a name="l00767"></a>00767 
<a name="l00768"></a>00768         { <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>, 40.00, 40.00,   0.0, 0.06,   1.0, 0.2,  2.314, 1e-2 },
<a name="l00769"></a>00769         { <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>, 40.00, 40.00,   0.0, 0.06,   2.0, 0.2,  2.885, 1e-2 },
<a name="l00770"></a>00770         { <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>, 40.00, 40.00,   0.0, 0.06,   1.0, 0.4,  5.312, 1e-2 },
<a name="l00771"></a>00771         { <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>, 40.00, 40.00,   0.0, 0.06,   2.0, 0.4,  6.920, 1e-2 },
<a name="l00772"></a>00772 
<a name="l00773"></a>00773         { <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>, 40.00, 42.00,   0.0, 0.06,   1.0, 0.2,  1.617, 1e-2 },
<a name="l00774"></a>00774         { <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>, 40.00, 42.00,   0.0, 0.06,   2.0, 0.2,  2.212, 1e-2 },
<a name="l00775"></a>00775         { <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>, 40.00, 42.00,   0.0, 0.06,   1.0, 0.4,  4.582, 1e-2 },
<a name="l00776"></a>00776         { <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>, 40.00, 42.00,   0.0, 0.06,   2.0, 0.4,  6.248, 1e-2 },
<a name="l00777"></a>00777 
<a name="l00778"></a>00778         { <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>, 40.00, 44.00,   0.0, 0.06,   1.0, 0.2,  1.110, 1e-2 },
<a name="l00779"></a>00779         { <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>, 40.00, 44.00,   0.0, 0.06,   2.0, 0.2,  1.690, 1e-2 },
<a name="l00780"></a>00780         { <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>, 40.00, 44.00,   0.0, 0.06,   1.0, 0.4,  3.948, 1e-2 },
<a name="l00781"></a>00781         { <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>, 40.00, 44.00,   0.0, 0.06,   2.0, 0.4,  5.647, 1e-2 }
<a name="l00782"></a>00782     };
<a name="l00783"></a>00783 
<a name="l00784"></a>00784 
<a name="l00785"></a>00785     <a class="code" href="class_quant_lib_1_1_day_counter.html" title="day counter class">DayCounter</a> dc = <a class="code" href="class_quant_lib_1_1_actual360.html" title="Actual/360 day count convention.">Actual360</a>();
<a name="l00786"></a>00786     <a class="code" href="class_quant_lib_1_1_date.html" title="Concrete date class.">Date</a> today = <a class="code" href="namespaceanonymous__namespace_02marketmodel_8cpp_03.html#ae1b42c838cf0f4cf17262f0b22bac899">Date::todaysDate</a>();
<a name="l00787"></a>00787 
<a name="l00788"></a>00788     boost::shared_ptr&lt;SimpleQuote&gt; spot1(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value">SimpleQuote</a>(0.0));
<a name="l00789"></a>00789 
<a name="l00790"></a>00790     boost::shared_ptr&lt;SimpleQuote&gt; qRate(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value">SimpleQuote</a>(0.0));
<a name="l00791"></a>00791     boost::shared_ptr&lt;YieldTermStructure&gt; qTS = <a class="code" href="namespace_quant_lib.html#a1309465a856634dcd0caff78af7ca223">flatRate</a>(today, qRate, dc);
<a name="l00792"></a>00792 
<a name="l00793"></a>00793     boost::shared_ptr&lt;SimpleQuote&gt; rRate(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value">SimpleQuote</a>(0.05));
<a name="l00794"></a>00794     boost::shared_ptr&lt;YieldTermStructure&gt; rTS = <a class="code" href="namespace_quant_lib.html#a1309465a856634dcd0caff78af7ca223">flatRate</a>(today, rRate, dc);
<a name="l00795"></a>00795 
<a name="l00796"></a>00796     boost::shared_ptr&lt;SimpleQuote&gt; vol1(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value">SimpleQuote</a>(0.0));
<a name="l00797"></a>00797     boost::shared_ptr&lt;BlackVolTermStructure&gt; volTS1 = <a class="code" href="namespace_quant_lib.html#a589d5c4b0b60b0bdd42ae07d820b2ed3">flatVol</a>(today, vol1, dc);
<a name="l00798"></a>00798 
<a name="l00799"></a>00799     <a class="code" href="namespace_quant_lib.html#af4cc4ef40b52c17cc455ead2a97aedb3" title="size of a container">Size</a> requiredSamples = 10000;
<a name="l00800"></a>00800     <a class="code" href="namespace_quant_lib.html#af4cc4ef40b52c17cc455ead2a97aedb3" title="size of a container">Size</a> timeSteps = 52;
<a name="l00801"></a>00801     <a class="code" href="namespace_quant_lib.html#a9fbc8c414c2b597d214cca2f9e914740" title="large positive integer">BigNatural</a> seed = 0;
<a name="l00802"></a>00802 
<a name="l00803"></a>00803     boost::shared_ptr&lt;StochasticProcess1D&gt; stochProcess1(<span class="keyword">new</span>
<a name="l00804"></a>00804         <a class="code" href="class_quant_lib_1_1_black_scholes_merton_process.html" title="Merton (1973) extension to the Black-Scholes stochastic process.">BlackScholesMertonProcess</a>(<a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;Quote&gt;</a>(spot1),
<a name="l00805"></a>00805                                   <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;YieldTermStructure&gt;</a>(qTS),
<a name="l00806"></a>00806                                   <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;YieldTermStructure&gt;</a>(rTS),
<a name="l00807"></a>00807                                   <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;BlackVolTermStructure&gt;</a>(volTS1)));
<a name="l00808"></a>00808 
<a name="l00809"></a>00809     std::vector&lt;boost::shared_ptr&lt;StochasticProcess1D&gt; &gt; procs;
<a name="l00810"></a>00810     procs.push_back(stochProcess1);
<a name="l00811"></a>00811 
<a name="l00812"></a>00812     <a class="code" href="class_quant_lib_1_1_matrix.html" title="Matrix used in linear algebra.">Matrix</a> correlation(1, 1, 1.0);
<a name="l00813"></a>00813 
<a name="l00814"></a>00814     boost::shared_ptr&lt;StochasticProcessArray&gt; process(
<a name="l00815"></a>00815                                <span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_stochastic_process_array.html" title="Array of correlated 1-D stochastic processes">StochasticProcessArray</a>(procs,correlation));
<a name="l00816"></a>00816 
<a name="l00817"></a>00817     boost::shared_ptr&lt;PricingEngine&gt; mcLSMCEngine =
<a name="l00818"></a>00818         <a class="code" href="class_quant_lib_1_1_make_m_c_american_basket_engine.html" title="Monte Carlo American basket-option engine factory.">MakeMCAmericanBasketEngine&lt;&gt;</a>(process)
<a name="l00819"></a>00819         .withSteps(timeSteps)
<a name="l00820"></a>00820         .<a class="code" href="class_quant_lib_1_1_make_m_c_american_basket_engine.html#ab2fe62e25f242f6d5144738c9da552a5">withAntitheticVariate</a>()
<a name="l00821"></a>00821         .<a class="code" href="class_quant_lib_1_1_make_m_c_american_basket_engine.html#afb17129367cf99ad01626491a16a24c8">withSamples</a>(requiredSamples)
<a name="l00822"></a>00822         .<a class="code" href="class_quant_lib_1_1_make_m_c_american_basket_engine.html#ac7027fdb761a8d016c9ef8a7f9abf8d3">withCalibrationSamples</a>(requiredSamples/4)
<a name="l00823"></a>00823         .<a class="code" href="class_quant_lib_1_1_make_m_c_american_basket_engine.html#abc40345bb871b86127e6017cfd457bcd">withSeed</a>(seed);
<a name="l00824"></a>00824 
<a name="l00825"></a>00825     <span class="keywordflow">for</span> (<a class="code" href="namespace_quant_lib.html#af4cc4ef40b52c17cc455ead2a97aedb3" title="size of a container">Size</a> i=0; i&lt;<a class="code" href="test-suite_2utilities_8hpp.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(values); i++) {
<a name="l00826"></a>00826         boost::shared_ptr&lt;PlainVanillaPayoff&gt; payoff(<span class="keyword">new</span>
<a name="l00827"></a>00827             <a class="code" href="class_quant_lib_1_1_plain_vanilla_payoff.html" title="Plain-vanilla payoff.">PlainVanillaPayoff</a>(values[i].<a class="code" href="class_traits_1_1template_01curve_1_1type.html">type</a>, values[i].strike));
<a name="l00828"></a>00828 
<a name="l00829"></a>00829         <a class="code" href="class_quant_lib_1_1_date.html" title="Concrete date class.">Date</a> exDate = today + <a class="code" href="namespace_quant_lib.html#a8ac1a45a37d8d3dda438a2e59e222620" title="integer number">Integer</a>(values[i].<a class="code" href="namespaceanonymous__namespace_02quantlibbenchmark_8cpp_03.html#a7a969063fde0030bd36b46055e824c34">t</a>*360+0.5);
<a name="l00830"></a>00830         boost::shared_ptr&lt;Exercise&gt; exercise(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_american_exercise.html" title="American exercise.">AmericanExercise</a>(today,
<a name="l00831"></a>00831                                                                   exDate));
<a name="l00832"></a>00832 
<a name="l00833"></a>00833         spot1 -&gt;setValue(values[i].s);
<a name="l00834"></a>00834         vol1  -&gt;setValue(values[i].<a class="code" href="namespaceanonymous__namespace_02perturbativebarrieroptionengine_8cpp_03.html#a1c6cf95dc58d77fbce730d3c1f8ccda7">v</a>);
<a name="l00835"></a>00835         rRate -&gt;setValue(values[i].r);
<a name="l00836"></a>00836         qRate -&gt;setValue(values[i].q);
<a name="l00837"></a>00837 
<a name="l00838"></a>00838         <a class="code" href="class_quant_lib_1_1_basket_option.html" title="Basket option on a number of assets.">BasketOption</a> basketOption(<span class="comment">// process,</span>
<a name="l00839"></a>00839                                   <a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#a5bd9db29b92ca1ea60f16bd2e7e031bb">basketTypeToPayoff</a>(<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eaf23fa1fce7ad8ddb6f0cf792f1c9b7de">MaxBasket</a>, payoff),
<a name="l00840"></a>00840                                   exercise);
<a name="l00841"></a>00841         basketOption.<a class="code" href="class_quant_lib_1_1_instrument.html#ac3f954c0c65d5c9815deb3e398ba1fe9" title="set the pricing engine to be used.">setPricingEngine</a>(mcLSMCEngine);
<a name="l00842"></a>00842 
<a name="l00843"></a>00843         <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> calculated = basketOption.<a class="code" href="class_quant_lib_1_1_instrument.html#a7dfec8f05e4dffbec262cecb6a4bab68" title="returns the net present value of the instrument.">NPV</a>();
<a name="l00844"></a>00844         <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> expected = values[i].result;
<a name="l00845"></a>00845         <span class="comment">// Real errorEstimate = basketOption.errorEstimate();</span>
<a name="l00846"></a>00846         <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> relError = <a class="code" href="namespace_quant_lib.html#aafcda44785eaeebddfc54147a234d11a">relativeError</a>(calculated, expected, values[i].s);
<a name="l00847"></a>00847         <span class="comment">// Real error = std::fabs(calculated-expected);</span>
<a name="l00848"></a>00848 
<a name="l00849"></a>00849         <span class="keywordflow">if</span> (relError &gt; values[i].tol) {
<a name="l00850"></a>00850             BOOST_FAIL(<span class="stringliteral">&quot;expected value: &quot;</span> &lt;&lt; values[i].result &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>
<a name="l00851"></a>00851                        &lt;&lt; <span class="stringliteral">&quot;calculated:     &quot;</span> &lt;&lt; calculated);
<a name="l00852"></a>00852         }
<a name="l00853"></a>00853 
<a name="l00854"></a>00854     }
<a name="l00855"></a>00855 }
<a name="l00856"></a>00856 
<a name="l00857"></a>00857 <span class="comment">/* This unit test is a a regression test to check for a crash in</span>
<a name="l00858"></a>00858 <span class="comment">   monte carlo if the required sample is odd.  The crash occurred</span>
<a name="l00859"></a>00859 <span class="comment">   because the samples array size was off by one when antithetic</span>
<a name="l00860"></a>00860 <span class="comment">   paths were added.</span>
<a name="l00861"></a>00861 <span class="comment">*/</span>
<a name="l00862"></a><a class="code" href="class_basket_option_test.html#a4c7f53a5d08db0190e4063da5d55c911">00862</a> <span class="keywordtype">void</span> <a class="code" href="class_basket_option_test.html#a4c7f53a5d08db0190e4063da5d55c911">BasketOptionTest::testOddSamples</a>() {
<a name="l00863"></a>00863 
<a name="l00864"></a>00864     BOOST_MESSAGE(<span class="stringliteral">&quot;Testing antithetic engine using odd sample number...&quot;</span>);
<a name="l00865"></a>00865 
<a name="l00866"></a>00866     <a class="code" href="test-suite_2utilities_8hpp.html#a7643bb6665e558bd38d6924db7e3c379">QL_TEST_START_TIMING</a>
<a name="l00867"></a>00867     <a class="code" href="namespace_quant_lib.html#af4cc4ef40b52c17cc455ead2a97aedb3" title="size of a container">Size</a> requiredSamples = 10001; <span class="comment">// The important line</span>
<a name="l00868"></a>00868     <a class="code" href="namespace_quant_lib.html#af4cc4ef40b52c17cc455ead2a97aedb3" title="size of a container">Size</a> timeSteps = 53;
<a name="l00869"></a>00869     BasketOptionOneData values[] = {
<a name="l00870"></a>00870         <span class="comment">//        type, strike,   spot,    q,    r,    t,  vol,   value, tol</span>
<a name="l00871"></a>00871         { <a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845aa96ffa37e51c7bbea13951f106dbd3c0">Option::Put</a>, 100.00,  80.00,   0.0, 0.06,   0.5, 0.4,  21.6059, 1e-2 }
<a name="l00872"></a>00872     };
<a name="l00873"></a>00873 
<a name="l00874"></a>00874     <a class="code" href="class_quant_lib_1_1_day_counter.html" title="day counter class">DayCounter</a> dc = <a class="code" href="class_quant_lib_1_1_actual360.html" title="Actual/360 day count convention.">Actual360</a>();
<a name="l00875"></a>00875     <a class="code" href="class_quant_lib_1_1_date.html" title="Concrete date class.">Date</a> today = <a class="code" href="namespaceanonymous__namespace_02marketmodel_8cpp_03.html#ae1b42c838cf0f4cf17262f0b22bac899">Date::todaysDate</a>();
<a name="l00876"></a>00876 
<a name="l00877"></a>00877     boost::shared_ptr&lt;SimpleQuote&gt; spot1(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value">SimpleQuote</a>(0.0));
<a name="l00878"></a>00878 
<a name="l00879"></a>00879     boost::shared_ptr&lt;SimpleQuote&gt; qRate(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value">SimpleQuote</a>(0.0));
<a name="l00880"></a>00880     boost::shared_ptr&lt;YieldTermStructure&gt; qTS = <a class="code" href="namespace_quant_lib.html#a1309465a856634dcd0caff78af7ca223">flatRate</a>(today, qRate, dc);
<a name="l00881"></a>00881 
<a name="l00882"></a>00882     boost::shared_ptr&lt;SimpleQuote&gt; rRate(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value">SimpleQuote</a>(0.05));
<a name="l00883"></a>00883     boost::shared_ptr&lt;YieldTermStructure&gt; rTS = <a class="code" href="namespace_quant_lib.html#a1309465a856634dcd0caff78af7ca223">flatRate</a>(today, rRate, dc);
<a name="l00884"></a>00884 
<a name="l00885"></a>00885     boost::shared_ptr&lt;SimpleQuote&gt; vol1(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_simple_quote.html" title="market element returning a stored value">SimpleQuote</a>(0.0));
<a name="l00886"></a>00886     boost::shared_ptr&lt;BlackVolTermStructure&gt; volTS1 = <a class="code" href="namespace_quant_lib.html#a589d5c4b0b60b0bdd42ae07d820b2ed3">flatVol</a>(today, vol1, dc);
<a name="l00887"></a>00887 
<a name="l00888"></a>00888 
<a name="l00889"></a>00889 
<a name="l00890"></a>00890     <a class="code" href="namespace_quant_lib.html#a9fbc8c414c2b597d214cca2f9e914740" title="large positive integer">BigNatural</a> seed = 0;
<a name="l00891"></a>00891 
<a name="l00892"></a>00892     boost::shared_ptr&lt;StochasticProcess1D&gt; stochProcess1(<span class="keyword">new</span>
<a name="l00893"></a>00893         <a class="code" href="class_quant_lib_1_1_black_scholes_merton_process.html" title="Merton (1973) extension to the Black-Scholes stochastic process.">BlackScholesMertonProcess</a>(<a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;Quote&gt;</a>(spot1),
<a name="l00894"></a>00894                                   <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;YieldTermStructure&gt;</a>(qTS),
<a name="l00895"></a>00895                                   <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;YieldTermStructure&gt;</a>(rTS),
<a name="l00896"></a>00896                                   <a class="code" href="class_quant_lib_1_1_handle.html">Handle&lt;BlackVolTermStructure&gt;</a>(volTS1)));
<a name="l00897"></a>00897 
<a name="l00898"></a>00898     std::vector&lt;boost::shared_ptr&lt;StochasticProcess1D&gt; &gt; procs;
<a name="l00899"></a>00899     procs.push_back(stochProcess1);
<a name="l00900"></a>00900 
<a name="l00901"></a>00901     <a class="code" href="class_quant_lib_1_1_matrix.html" title="Matrix used in linear algebra.">Matrix</a> correlation(1, 1, 1.0);
<a name="l00902"></a>00902 
<a name="l00903"></a>00903     boost::shared_ptr&lt;StochasticProcessArray&gt; process(
<a name="l00904"></a>00904                                <span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_stochastic_process_array.html" title="Array of correlated 1-D stochastic processes">StochasticProcessArray</a>(procs,correlation));
<a name="l00905"></a>00905 
<a name="l00906"></a>00906     boost::shared_ptr&lt;PricingEngine&gt; mcLSMCEngine =
<a name="l00907"></a>00907         <a class="code" href="class_quant_lib_1_1_make_m_c_american_basket_engine.html" title="Monte Carlo American basket-option engine factory.">MakeMCAmericanBasketEngine&lt;&gt;</a>(process)
<a name="l00908"></a>00908         .withSteps(timeSteps)
<a name="l00909"></a>00909         .<a class="code" href="class_quant_lib_1_1_make_m_c_american_basket_engine.html#ab2fe62e25f242f6d5144738c9da552a5">withAntitheticVariate</a>()
<a name="l00910"></a>00910         .<a class="code" href="class_quant_lib_1_1_make_m_c_american_basket_engine.html#afb17129367cf99ad01626491a16a24c8">withSamples</a>(requiredSamples)
<a name="l00911"></a>00911         .<a class="code" href="class_quant_lib_1_1_make_m_c_american_basket_engine.html#ac7027fdb761a8d016c9ef8a7f9abf8d3">withCalibrationSamples</a>(requiredSamples/4)
<a name="l00912"></a>00912         .<a class="code" href="class_quant_lib_1_1_make_m_c_american_basket_engine.html#abc40345bb871b86127e6017cfd457bcd">withSeed</a>(seed);
<a name="l00913"></a>00913 
<a name="l00914"></a>00914     <span class="keywordflow">for</span> (<a class="code" href="namespace_quant_lib.html#af4cc4ef40b52c17cc455ead2a97aedb3" title="size of a container">Size</a> i=0; i&lt;<a class="code" href="test-suite_2utilities_8hpp.html#ad0e13d94164219be2d5bbd4d65e71d1e">LENGTH</a>(values); i++) {
<a name="l00915"></a>00915         boost::shared_ptr&lt;PlainVanillaPayoff&gt; payoff(<span class="keyword">new</span>
<a name="l00916"></a>00916             <a class="code" href="class_quant_lib_1_1_plain_vanilla_payoff.html" title="Plain-vanilla payoff.">PlainVanillaPayoff</a>(values[i].<a class="code" href="class_traits_1_1template_01curve_1_1type.html">type</a>, values[i].strike));
<a name="l00917"></a>00917 
<a name="l00918"></a>00918         <a class="code" href="class_quant_lib_1_1_date.html" title="Concrete date class.">Date</a> exDate = today + <a class="code" href="namespace_quant_lib.html#a8ac1a45a37d8d3dda438a2e59e222620" title="integer number">Integer</a>(values[i].<a class="code" href="namespaceanonymous__namespace_02quantlibbenchmark_8cpp_03.html#a7a969063fde0030bd36b46055e824c34">t</a>*360+0.5);
<a name="l00919"></a>00919         boost::shared_ptr&lt;Exercise&gt; exercise(<span class="keyword">new</span> <a class="code" href="class_quant_lib_1_1_american_exercise.html" title="American exercise.">AmericanExercise</a>(today,
<a name="l00920"></a>00920                                                                   exDate));
<a name="l00921"></a>00921 
<a name="l00922"></a>00922         spot1 -&gt;setValue(values[i].s);
<a name="l00923"></a>00923         vol1  -&gt;setValue(values[i].<a class="code" href="namespaceanonymous__namespace_02perturbativebarrieroptionengine_8cpp_03.html#a1c6cf95dc58d77fbce730d3c1f8ccda7">v</a>);
<a name="l00924"></a>00924         rRate -&gt;setValue(values[i].r);
<a name="l00925"></a>00925         qRate -&gt;setValue(values[i].q);
<a name="l00926"></a>00926 
<a name="l00927"></a>00927         <a class="code" href="class_quant_lib_1_1_basket_option.html" title="Basket option on a number of assets.">BasketOption</a> basketOption(<span class="comment">// process,</span>
<a name="l00928"></a>00928                                   <a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#a5bd9db29b92ca1ea60f16bd2e7e031bb">basketTypeToPayoff</a>(<a class="code" href="namespaceanonymous__namespace_02basketoption_8cpp_03.html#ae24a727204173fc92c5a99f61e19c04eaf23fa1fce7ad8ddb6f0cf792f1c9b7de">MaxBasket</a>, payoff),
<a name="l00929"></a>00929                                   exercise);
<a name="l00930"></a>00930         basketOption.<a class="code" href="class_quant_lib_1_1_instrument.html#ac3f954c0c65d5c9815deb3e398ba1fe9" title="set the pricing engine to be used.">setPricingEngine</a>(mcLSMCEngine);
<a name="l00931"></a>00931 
<a name="l00932"></a>00932         <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> calculated = basketOption.<a class="code" href="class_quant_lib_1_1_instrument.html#a7dfec8f05e4dffbec262cecb6a4bab68" title="returns the net present value of the instrument.">NPV</a>();
<a name="l00933"></a>00933         <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> expected = values[i].result;
<a name="l00934"></a>00934         <span class="comment">// Real errorEstimate = basketOption.errorEstimate();</span>
<a name="l00935"></a>00935         <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> relError = <a class="code" href="namespace_quant_lib.html#aafcda44785eaeebddfc54147a234d11a">relativeError</a>(calculated, expected, values[i].s);
<a name="l00936"></a>00936         <span class="comment">// Real error = std::fabs(calculated-expected);</span>
<a name="l00937"></a>00937 
<a name="l00938"></a>00938         <span class="keywordflow">if</span> (relError &gt; values[i].tol) {
<a name="l00939"></a>00939             BOOST_FAIL(<span class="stringliteral">&quot;expected value: &quot;</span> &lt;&lt; values[i].result &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>
<a name="l00940"></a>00940                        &lt;&lt; <span class="stringliteral">&quot;calculated:     &quot;</span> &lt;&lt; calculated);
<a name="l00941"></a>00941         }
<a name="l00942"></a>00942 
<a name="l00943"></a>00943     }
<a name="l00944"></a>00944 }
<a name="l00945"></a>00945 
<a name="l00946"></a><a class="code" href="class_basket_option_test.html#a018c6d7dd740d5333406e31121d26b43">00946</a> test_suite* <a class="code" href="class_basket_option_test.html#a018c6d7dd740d5333406e31121d26b43">BasketOptionTest::suite</a>() {
<a name="l00947"></a>00947     test_suite* suite = BOOST_TEST_SUITE(<span class="stringliteral">&quot;Basket option tests&quot;</span>);
<a name="l00948"></a>00948     suite-&gt;add(<a class="code" href="test-suite_2utilities_8hpp.html#a80550c9c9a7264738072a40a2fc8fd8d">QUANTLIB_TEST_CASE</a>(&amp;<a class="code" href="class_basket_option_test.html#aab0dc7bd0acadc2018a33b1eab64615b">BasketOptionTest::testEuroTwoValues</a>));
<a name="l00949"></a>00949     <span class="comment">// FLOATING_POINT_EXCEPTION</span>
<a name="l00950"></a>00950     suite-&gt;add(<a class="code" href="test-suite_2utilities_8hpp.html#a80550c9c9a7264738072a40a2fc8fd8d">QUANTLIB_TEST_CASE</a>(
<a name="l00951"></a>00951                                &amp;<a class="code" href="class_basket_option_test.html#affc28e6599e1018d6384e734b0ff5657">BasketOptionTest::testBarraquandThreeValues</a>));
<a name="l00952"></a>00952     suite-&gt;add(<a class="code" href="test-suite_2utilities_8hpp.html#a80550c9c9a7264738072a40a2fc8fd8d">QUANTLIB_TEST_CASE</a>(&amp;<a class="code" href="class_basket_option_test.html#a194ab5f951f26b624943d2e36bbf7320">BasketOptionTest::testTavellaValues</a>));
<a name="l00953"></a>00953     suite-&gt;add(<a class="code" href="test-suite_2utilities_8hpp.html#a80550c9c9a7264738072a40a2fc8fd8d">QUANTLIB_TEST_CASE</a>(&amp;<a class="code" href="class_basket_option_test.html#a4f05777b31be1f8684df81727699620b">BasketOptionTest::testOneDAmericanValues</a>));
<a name="l00954"></a>00954     suite-&gt;add(<a class="code" href="test-suite_2utilities_8hpp.html#a80550c9c9a7264738072a40a2fc8fd8d">QUANTLIB_TEST_CASE</a>(&amp;<a class="code" href="class_basket_option_test.html#a4c7f53a5d08db0190e4063da5d55c911">BasketOptionTest::testOddSamples</a>));
<a name="l00955"></a>00955 
<a name="l00956"></a>00956     <span class="keywordflow">return</span> suite;
<a name="l00957"></a>00957 }
</pre></div></div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="test-suite_2basketoption_8cpp.html">basketoption.cpp</a>      </li>

    <li class="footer">Generated on Sat Aug 25 2012 13:50:44 for QuantLib by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
