<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>QuantLib: QuantLib::RangeAccrualPricerByBgm Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">QuantLib
   &#160;<span id="projectnumber">1.3</span>
   </div>
   <div id="projectbrief">ql1-3</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_quant_lib_1_1_range_accrual_pricer_by_bgm.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">QuantLib::RangeAccrualPricerByBgm Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="QuantLib::RangeAccrualPricerByBgm" --><!-- doxytag: inherits="QuantLib::RangeAccrualPricer" -->
<p><code>#include &lt;<a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html">rangeaccrual.hpp</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for QuantLib::RangeAccrualPricerByBgm:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_quant_lib_1_1_range_accrual_pricer_by_bgm__inherit__graph.png" border="0" usemap="#_quant_lib_1_1_range_accrual_pricer_by_bgm_inherit__map" alt="Inheritance graph"/></div>
<map name="_quant_lib_1_1_range_accrual_pricer_by_bgm_inherit__map" id="_quant_lib_1_1_range_accrual_pricer_by_bgm_inherit__map">
<area shape="rect" id="node2" href="class_quant_lib_1_1_range_accrual_pricer.html" title="{QuantLib::RangeAccrualPricer\n|# coupon_\l# startTime_\l# endTime_\l# accrualFactor_\l# observationTimeLags_\l# observationTimes_\l# initialValues_\l# observationsNo_\l# lowerTrigger_\l# upperTrigger_\l# discount_\l# gearing_\l# spread_\l# spreadLegValue_\l|+ swapletRate()\l+ capletPrice()\l+ capletRate()\l+ floorletPrice()\l+ floorletRate()\l+ initialize()\l* swapletRate()\l* capletPrice()\l* capletRate()\l* floorletPrice()\l* floorletRate()\l* initialize()\l}" alt="" coords="55,653,252,1155"/><area shape="rect" id="node4" href="class_quant_lib_1_1_floating_rate_coupon_pricer.html" title="generic pricer for floating&#45;rate coupons" alt="" coords="36,243,271,605"/><area shape="rect" id="node6" href="class_quant_lib_1_1_observer.html" title="Object that gets notified when a given observable changes." alt="" coords="5,5,139,195"/><area shape="rect" id="node8" href="class_quant_lib_1_1_observable.html" title="Object that notifies its changes to a set of observers." alt="" coords="163,5,309,195"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Collaboration diagram for QuantLib::RangeAccrualPricerByBgm:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_quant_lib_1_1_range_accrual_pricer_by_bgm__coll__graph.png" border="0" usemap="#_quant_lib_1_1_range_accrual_pricer_by_bgm_coll__map" alt="Collaboration graph"/></div>
<map name="_quant_lib_1_1_range_accrual_pricer_by_bgm_coll__map" id="_quant_lib_1_1_range_accrual_pricer_by_bgm_coll__map">
<area shape="rect" id="node2" href="class_quant_lib_1_1_range_accrual_pricer.html" title="{QuantLib::RangeAccrualPricer\n|# coupon_\l# startTime_\l# endTime_\l# accrualFactor_\l# observationTimeLags_\l# observationTimes_\l# initialValues_\l# observationsNo_\l# lowerTrigger_\l# upperTrigger_\l# discount_\l# gearing_\l# spread_\l# spreadLegValue_\l|+ swapletRate()\l+ capletPrice()\l+ capletRate()\l+ floorletPrice()\l+ floorletRate()\l+ initialize()\l* swapletRate()\l* capletPrice()\l* capletRate()\l* floorletPrice()\l* floorletRate()\l* initialize()\l}" alt="" coords="1416,4989,1613,5491"/><area shape="rect" id="node4" href="class_quant_lib_1_1_floating_rate_coupon_pricer.html" title="generic pricer for floating&#45;rate coupons" alt="" coords="1191,1109,1425,1472"/><area shape="rect" id="node6" href="class_quant_lib_1_1_observer.html" title="Object that gets notified when a given observable changes." alt="" coords="1172,461,1305,651"/><area shape="rect" id="node36" href="class_quant_lib_1_1_floating_rate_coupon.html" title="base floating&#45;rate coupon class" alt="" coords="1009,3646,1209,4442"/><area shape="rect" id="node12" title="STL class." alt="" coords="1100,157,1199,243"/><area shape="rect" id="node16" href="class_quant_lib_1_1_observable.html" title="Object that notifies its changes to a set of observers." alt="" coords="1100,869,1247,1059"/><area shape="rect" id="node42" href="class_quant_lib_1_1_event.html" title="Base class for event." alt="" coords="1052,1196,1167,1385"/><area shape="rect" id="node34" href="class_quant_lib_1_1_range_accrual_floaters_coupon.html" title="{QuantLib::RangeAccrualFloatersCoupon\n|&#45; startTime_\l&#45; endTime_\l&#45; observationsSchedule_\l&#45; observationDates_\l&#45; observationTimes_\l&#45; observationsNo_\l&#45; lowerTrigger_\l&#45; upperTrigger_\l|+ RangeAccrualFloatersCoupon()\l+ startTime()\l+ endTime()\l+ lowerTrigger()\l+ upperTrigger()\l+ observationsNo()\l+ observationDates()\l+ observationTimes()\l+ observationsSchedule()\l+ priceWithoutOptionality()\l+ accept()\l* accept()\l}" alt="" coords="981,4525,1237,4923"/><area shape="rect" id="node26" title="STL class." alt="" coords="99,3156,213,3241"/><area shape="rect" id="node38" href="class_quant_lib_1_1_coupon.html" title="coupon accruing over a fixed period" alt="" coords="1029,2870,1189,3527"/><area shape="rect" id="node40" href="class_quant_lib_1_1_cash_flow.html" title="Base class for cash flows." alt="" coords="1039,2024,1180,2248"/><area shape="rect" id="node46" href="class_quant_lib_1_1_date.html" title="Concrete date class." alt="" coords="413,1539,587,2733"/><area shape="rect" id="node53" href="class_quant_lib_1_1_day_counter.html" title="day counter class" alt="" coords="1344,3078,1496,3319"/><area shape="rect" id="node58" href="classbool.html" title="{bool\n||}" alt="" coords="1656,3156,1701,3241"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="class_quant_lib_1_1_range_accrual_pricer_by_bgm-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a3f721c624aa91d57498359c7cec3e710">RangeAccrualPricerByBgm</a> (<a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> correlation, const boost::shared_ptr&lt; <a class="el" href="class_quant_lib_1_1_smile_section.html">SmileSection</a> &gt; &amp;smilesOnExpiry, const boost::shared_ptr&lt; <a class="el" href="class_quant_lib_1_1_smile_section.html">SmileSection</a> &gt; &amp;smilesOnPayment, <a class="el" href="classbool.html">bool</a> withSmile, <a class="el" href="classbool.html">bool</a> byCallSpread)</td></tr>
<tr><td colspan="2"><div class="groupHeader">Observer interface</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#abe4eb12dbf8444ee95dbb9a0ccf1e9e3">swapletPrice</a> () const </td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#adf963c5fcf607c12ce66bb58db77a9c7">drift</a> (<a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> U, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> lambdaS, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> lambdaT, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> correlation) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a9b13dbb2e2d733c367c25f3c3d202789">derDriftDerLambdaS</a> (<a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> U, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> lambdaS, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> lambdaT, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> correlation) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#af6973bb5d06b5d54cc6d09e446811d89">derDriftDerLambdaT</a> (<a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> U, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> lambdaS, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> lambdaT, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> correlation) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a52bf48d2291b9abda2636bbe57e0629b">lambda</a> (<a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> U, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> lambdaS, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> lambdaT) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a3b8479fe039f82f972e0cbf9ef868bbf">derLambdaDerLambdaS</a> (<a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> U) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#ab1ce42bdc07c1179bea417beac014e4f">derLambdaDerLambdaT</a> (<a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> U) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a378fb532c09718efb2da82f465b348d5">driftsOverPeriod</a> (<a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> U, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> lambdaS, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> lambdaT, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> correlation) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#adabd110fbd2b68545490f60fbb9218cc">lambdasOverPeriod</a> (<a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> U, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> lambdaS, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> lambdaT) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#afd928d41a52b9cd0bd838f6caa7f6e78">digitalRangePrice</a> (<a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> lowerTrigger, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> upperTrigger, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> initialValue, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> expiry, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> deflator) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a5ea1211be98b0ed00994cf1043879299">digitalPrice</a> (<a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> strike, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> initialValue, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> expiry, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> deflator) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a06d777bbb939efc2f7d69c343baf8d46">digitalPriceWithoutSmile</a> (<a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> strike, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> initialValue, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> expiry, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> deflator) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a7f209e8e559825427bffa8f1328d6000">digitalPriceWithSmile</a> (<a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> strike, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> initialValue, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> expiry, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> deflator) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#ae0d9c14581e27f4b6c2497fac2cb190b">callSpreadPrice</a> (<a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> previousInitialValue, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> nextInitialValue, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> previousStrike, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> nextStrike, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> deflator, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> previousVariance, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> nextVariance) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a92ffcb23682c12d50d093e5a1ecfee14">smileCorrection</a> (<a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> strike, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> initialValue, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> expiry, <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> deflator) const </td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a56cdbe2f7c3510d346144d0b1c95bb4d">correlation_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#ae668f25289e96c45aa6993a7bbe0036d">withSmile_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a84e9d481237e38f5f9483b199945c58a">byCallSpread_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">boost::shared_ptr&lt; <a class="el" href="class_quant_lib_1_1_smile_section.html">SmileSection</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a32c2aba3a90ea107add441f702cfb983">smilesOnExpiry_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">boost::shared_ptr&lt; <a class="el" href="class_quant_lib_1_1_smile_section.html">SmileSection</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#ae872459833709e8fb0f93d4bb7ee4798">smilesOnPayment_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#acdad23bef98f7dd81206dd5397df6741">eps_</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00125">125</a> of file <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html">rangeaccrual.hpp</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a3f721c624aa91d57498359c7cec3e710"></a><!-- doxytag: member="QuantLib::RangeAccrualPricerByBgm::RangeAccrualPricerByBgm" ref="a3f721c624aa91d57498359c7cec3e710" args="(Real correlation, const boost::shared_ptr&lt; SmileSection &gt; &amp;smilesOnExpiry, const boost::shared_ptr&lt; SmileSection &gt; &amp;smilesOnPayment, bool withSmile, bool byCallSpread)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a3f721c624aa91d57498359c7cec3e710">QuantLib::RangeAccrualPricerByBgm::RangeAccrualPricerByBgm</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>correlation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="el" href="class_quant_lib_1_1_smile_section.html">SmileSection</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>smilesOnExpiry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="el" href="class_quant_lib_1_1_smile_section.html">SmileSection</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>smilesOnPayment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>withSmile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>byCallSpread</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00168">168</a> of file <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html">rangeaccrual.cpp</a>.</p>
<div class="fragment"><pre class="fragment">    : <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a56cdbe2f7c3510d346144d0b1c95bb4d">correlation_</a>(correlation),
      <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#ae668f25289e96c45aa6993a7bbe0036d">withSmile_</a>(withSmile),
      <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a84e9d481237e38f5f9483b199945c58a">byCallSpread_</a>(byCallSpread),
      <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a32c2aba3a90ea107add441f702cfb983">smilesOnExpiry_</a>(smilesOnExpiry),
      <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#ae872459833709e8fb0f93d4bb7ee4798">smilesOnPayment_</a>(smilesOnPayment),
      <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#acdad23bef98f7dd81206dd5397df6741">eps_</a>(1.0e-8) {

    }
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ae0d9c14581e27f4b6c2497fac2cb190b"></a><!-- doxytag: member="QuantLib::RangeAccrualPricerByBgm::callSpreadPrice" ref="ae0d9c14581e27f4b6c2497fac2cb190b" args="(Real previousInitialValue, Real nextInitialValue, Real previousStrike, Real nextStrike, Real deflator, Real previousVariance, Real nextVariance) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> <a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#ae0d9c14581e27f4b6c2497fac2cb190b">QuantLib::RangeAccrualPricerByBgm::callSpreadPrice</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>previousInitialValue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>nextInitialValue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>previousStrike</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>nextStrike</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>deflator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>previousVariance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>nextVariance</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00503">503</a> of file <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html">rangeaccrual.cpp</a>.</p>

<p>References <a class="el" href="blackformula_8cpp_source.html#l00045">QuantLib::blackFormula()</a>, <a class="el" href="option_8hpp_source.html#l00039">QuantLib::Option::Call</a>, and <a class="el" href="errors_8hpp_source.html#l00098">QL_ENSURE</a>.</p>

<p>Referenced by <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00391">digitalPriceWithSmile()</a>.</p>
<div class="fragment"><pre class="fragment">                                                                    {
         <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> nextCall =
            <a class="code" href="namespace_quant_lib.html#a3389f4064f58cfc2d4a160d84e992c4f">blackFormula</a>(<a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>, nextStrike, nextForward, std::sqrt(nextVariance), deflator);
         <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> previousCall =
            <a class="code" href="namespace_quant_lib.html#a3389f4064f58cfc2d4a160d84e992c4f">blackFormula</a>(<a class="code" href="class_quant_lib_1_1_option.html#abaee7fc605354c444867545492cd5845a4f872c1ba3286c1af60485c2f4a4d3c1">Option::Call</a>, previousStrike, previousForward, std::sqrt(previousVariance), deflator);

         <a class="code" href="errors_8hpp.html#a394b39aa396098345f86d243f207f7af" title="throw an error if the given post-condition is not verified">QL_ENSURE</a>(nextCall &lt;previousCall,&quot;RangeAccrualPricerByBgm::callSpreadPrice: nextCall &gt; previousCall<span class="stringliteral">&quot;</span>
<span class="stringliteral">            &quot;</span>\n nextCall: strike :<span class="stringliteral">&quot; &lt;&lt; nextStrike &lt;&lt; &quot;</span>; variance: <span class="stringliteral">&quot; &lt;&lt; nextVariance &lt;&lt;</span>
<span class="stringliteral">            &quot;</span> adjusted initial value <span class="stringliteral">&quot; &lt;&lt; nextForward &lt;&lt;</span>
<span class="stringliteral">            &quot;</span>\n previousCall: strike :<span class="stringliteral">&quot; &lt;&lt; previousStrike &lt;&lt; &quot;</span>; variance: <span class="stringliteral">&quot; &lt;&lt; previousVariance &lt;&lt;</span>
<span class="stringliteral">            &quot;</span> adjusted initial value <span class="stringliteral">&quot; &lt;&lt; previousForward );</span>
<span class="stringliteral"></span>
<span class="stringliteral">         const Real result = (previousCall-nextCall)/(nextStrike-previousStrike);</span>
<span class="stringliteral"></span>
<span class="stringliteral">         return result;</span>
<span class="stringliteral">    }</span>
</pre></div>
</div>
</div>
<a class="anchor" id="a9b13dbb2e2d733c367c25f3c3d202789"></a><!-- doxytag: member="QuantLib::RangeAccrualPricerByBgm::derDriftDerLambdaS" ref="a9b13dbb2e2d733c367c25f3c3d202789" args="(Real U, Real lambdaS, Real lambdaT, Real correlation) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> <a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a9b13dbb2e2d733c367c25f3c3d202789">QuantLib::RangeAccrualPricerByBgm::derDriftDerLambdaS</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>U</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>lambdaS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>lambdaT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>correlation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00268">268</a> of file <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html">rangeaccrual.cpp</a>.</p>

<p>References <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00111">QuantLib::RangeAccrualPricer::accrualFactor_</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00110">QuantLib::RangeAccrualPricer::endTime_</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00114">QuantLib::RangeAccrualPricer::initialValues_</a>, and <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00109">QuantLib::RangeAccrualPricer::startTime_</a>.</p>
<div class="fragment"><pre class="fragment">                                                                               {
        <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> result;

        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> p = (U-<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a5a9f3757d09c24acc9889b3e9c1b9623">startTime_</a>)/<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a1dee98bb69432b9b0417f6f31e1f0b4f">accrualFactor_</a>;
        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> q = (<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a939232704e47fc5e5276f4f07ef8c83a">endTime_</a>-U)/<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a1dee98bb69432b9b0417f6f31e1f0b4f">accrualFactor_</a>;
        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> L0T = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#ab76cfbee77357562d26e279ded909981">initialValues_</a>.back();

        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> driftBeforeFixing =
                p*<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a1dee98bb69432b9b0417f6f31e1f0b4f">accrualFactor_</a>*L0T/(1.+L0T*<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a1dee98bb69432b9b0417f6f31e1f0b4f">accrualFactor_</a>)*(q*lambdaT*correlation) +
                2*q*lambdaS + p*lambdaT*correlation;
        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> driftAfterFixing = 0.;

        <span class="keywordflow">if</span>(<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a5a9f3757d09c24acc9889b3e9c1b9623">startTime_</a> &gt; 0){result = driftBeforeFixing;}
        <span class="keywordflow">else</span> {result = driftAfterFixing;}

        <span class="keywordflow">return</span> result;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="af6973bb5d06b5d54cc6d09e446811d89"></a><!-- doxytag: member="QuantLib::RangeAccrualPricerByBgm::derDriftDerLambdaT" ref="af6973bb5d06b5d54cc6d09e446811d89" args="(Real U, Real lambdaS, Real lambdaT, Real correlation) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> <a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#af6973bb5d06b5d54cc6d09e446811d89">QuantLib::RangeAccrualPricerByBgm::derDriftDerLambdaT</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>U</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>lambdaS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>lambdaT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>correlation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00299">299</a> of file <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html">rangeaccrual.cpp</a>.</p>

<p>References <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00111">QuantLib::RangeAccrualPricer::accrualFactor_</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00110">QuantLib::RangeAccrualPricer::endTime_</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00114">QuantLib::RangeAccrualPricer::initialValues_</a>, and <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00109">QuantLib::RangeAccrualPricer::startTime_</a>.</p>
<div class="fragment"><pre class="fragment">                                                                               {
        <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> result;

        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> p = (U-<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a5a9f3757d09c24acc9889b3e9c1b9623">startTime_</a>)/<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a1dee98bb69432b9b0417f6f31e1f0b4f">accrualFactor_</a>;
        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> q = (<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a939232704e47fc5e5276f4f07ef8c83a">endTime_</a>-U)/<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a1dee98bb69432b9b0417f6f31e1f0b4f">accrualFactor_</a>;
        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> L0T = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#ab76cfbee77357562d26e279ded909981">initialValues_</a>.back();

        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> driftBeforeFixing =
                p*<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a1dee98bb69432b9b0417f6f31e1f0b4f">accrualFactor_</a>*L0T/(1.+L0T*<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a1dee98bb69432b9b0417f6f31e1f0b4f">accrualFactor_</a>)*(2*p*lambdaT + q*lambdaS*correlation) +
                + p*lambdaS*correlation;
        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> driftAfterFixing = (p*<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a1dee98bb69432b9b0417f6f31e1f0b4f">accrualFactor_</a>*L0T/(1.+L0T*<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a1dee98bb69432b9b0417f6f31e1f0b4f">accrualFactor_</a>)-0.5)*2*lambdaT;

        <span class="keywordflow">if</span>(<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a5a9f3757d09c24acc9889b3e9c1b9623">startTime_</a> &gt; 0){result = driftBeforeFixing;}
        <span class="keywordflow">else</span> {result = driftAfterFixing;}

        <span class="keywordflow">return</span> result;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a3b8479fe039f82f972e0cbf9ef868bbf"></a><!-- doxytag: member="QuantLib::RangeAccrualPricerByBgm::derLambdaDerLambdaS" ref="a3b8479fe039f82f972e0cbf9ef868bbf" args="(Real U) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> <a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a3b8479fe039f82f972e0cbf9ef868bbf">QuantLib::RangeAccrualPricerByBgm::derLambdaDerLambdaS</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>U</em></td><td>)</td>
          <td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00289">289</a> of file <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html">rangeaccrual.cpp</a>.</p>

<p>References <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00111">QuantLib::RangeAccrualPricer::accrualFactor_</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00110">QuantLib::RangeAccrualPricer::endTime_</a>, and <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00109">QuantLib::RangeAccrualPricer::startTime_</a>.</p>

<p>Referenced by <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00447">smileCorrection()</a>.</p>
<div class="fragment"><pre class="fragment">                                                                  {

        <span class="keywordflow">if</span> (<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a5a9f3757d09c24acc9889b3e9c1b9623">startTime_</a>&gt;0) {
            <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> q = (<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a939232704e47fc5e5276f4f07ef8c83a">endTime_</a>-U)/<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a1dee98bb69432b9b0417f6f31e1f0b4f">accrualFactor_</a>;
            <span class="keywordflow">return</span> q;
        } <span class="keywordflow">else</span>
            <span class="keywordflow">return</span> 0.0;

    }
</pre></div>
</div>
</div>
<a class="anchor" id="ab1ce42bdc07c1179bea417beac014e4f"></a><!-- doxytag: member="QuantLib::RangeAccrualPricerByBgm::derLambdaDerLambdaT" ref="ab1ce42bdc07c1179bea417beac014e4f" args="(Real U) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> <a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#ab1ce42bdc07c1179bea417beac014e4f">QuantLib::RangeAccrualPricerByBgm::derLambdaDerLambdaT</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>U</em></td><td>)</td>
          <td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00320">320</a> of file <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html">rangeaccrual.cpp</a>.</p>

<p>References <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00111">QuantLib::RangeAccrualPricer::accrualFactor_</a>, and <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00109">QuantLib::RangeAccrualPricer::startTime_</a>.</p>

<p>Referenced by <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00447">smileCorrection()</a>.</p>
<div class="fragment"><pre class="fragment">                                                                  {

        <span class="keywordflow">if</span> (<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a5a9f3757d09c24acc9889b3e9c1b9623">startTime_</a>&gt;0) {
            <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> p = (U-<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a5a9f3757d09c24acc9889b3e9c1b9623">startTime_</a>)/<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a1dee98bb69432b9b0417f6f31e1f0b4f">accrualFactor_</a>;
            <span class="keywordflow">return</span> p;
        } <span class="keywordflow">else</span>
            <span class="keywordflow">return</span> 0.0;

    }
</pre></div>
</div>
</div>
<a class="anchor" id="a5ea1211be98b0ed00994cf1043879299"></a><!-- doxytag: member="QuantLib::RangeAccrualPricerByBgm::digitalPrice" ref="a5ea1211be98b0ed00994cf1043879299" args="(Real strike, Real initialValue, Real expiry, Real deflator) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> <a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a5ea1211be98b0ed00994cf1043879299">QuantLib::RangeAccrualPricerByBgm::digitalPrice</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>strike</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>initialValue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>expiry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>deflator</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00344">344</a> of file <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html">rangeaccrual.cpp</a>.</p>

<p>References <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00358">digitalPriceWithoutSmile()</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00391">digitalPriceWithSmile()</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00197">eps_</a>, and <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00192">withSmile_</a>.</p>

<p>Referenced by <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00330">digitalRangePrice()</a>.</p>
<div class="fragment"><pre class="fragment">                                                             {
        <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> result = deflator;
        <span class="keywordflow">if</span>(strike&gt;<a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#acdad23bef98f7dd81206dd5397df6741">eps_</a>/2){
            <span class="keywordflow">if</span>(<a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#ae668f25289e96c45aa6993a7bbe0036d">withSmile_</a>)
                result = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a7f209e8e559825427bffa8f1328d6000">digitalPriceWithSmile</a>(strike, initialValue, expiry, deflator);
            <span class="keywordflow">else</span>
                result = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a06d777bbb939efc2f7d69c343baf8d46">digitalPriceWithoutSmile</a>(strike, initialValue, expiry, deflator);
        }
        <span class="keywordflow">return</span> result;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a06d777bbb939efc2f7d69c343baf8d46"></a><!-- doxytag: member="QuantLib::RangeAccrualPricerByBgm::digitalPriceWithoutSmile" ref="a06d777bbb939efc2f7d69c343baf8d46" args="(Real strike, Real initialValue, Real expiry, Real deflator) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> <a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a06d777bbb939efc2f7d69c343baf8d46">QuantLib::RangeAccrualPricerByBgm::digitalPriceWithoutSmile</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>strike</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>initialValue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>expiry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>deflator</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00358">358</a> of file <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html">rangeaccrual.cpp</a>.</p>

<p>References <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00191">correlation_</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00194">driftsOverPeriod()</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00216">lambdasOverPeriod()</a>, <a class="el" href="bjerksundstenslandengine_8cpp_source.html#l00032">QuantLib::anonymous_namespace{bjerksundstenslandengine.cpp}::phi()</a>, <a class="el" href="errors_8hpp_source.html#l00086">QL_REQUIRE</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00195">smilesOnExpiry_</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00196">smilesOnPayment_</a>, and <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00109">QuantLib::RangeAccrualPricer::startTime_</a>.</p>

<p>Referenced by <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00344">digitalPrice()</a>, and <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00391">digitalPriceWithSmile()</a>.</p>
<div class="fragment"><pre class="fragment">                                                             {

        <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> lambdaS = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a32c2aba3a90ea107add441f702cfb983">smilesOnExpiry_</a>-&gt;volatility(strike);
        <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> lambdaT = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#ae872459833709e8fb0f93d4bb7ee4798">smilesOnPayment_</a>-&gt;volatility(strike);

        std::vector&lt;Real&gt; lambdaU = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#adabd110fbd2b68545490f60fbb9218cc">lambdasOverPeriod</a>(expiry, lambdaS, lambdaT);
        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> variance =
            <a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a5a9f3757d09c24acc9889b3e9c1b9623">startTime_</a>*lambdaU[0]*lambdaU[0]+(expiry-<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a5a9f3757d09c24acc9889b3e9c1b9623">startTime_</a>)*lambdaU[1]*lambdaU[1];

        <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> lambdaSATM = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a32c2aba3a90ea107add441f702cfb983">smilesOnExpiry_</a>-&gt;volatility(initialValue);
        <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> lambdaTATM = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#ae872459833709e8fb0f93d4bb7ee4798">smilesOnPayment_</a>-&gt;volatility(initialValue);
        <span class="comment">//drift of Lognormal process (of Libor) &quot;a_U()&quot; nel paper</span>
        std::vector&lt;Real&gt; muU = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a378fb532c09718efb2da82f465b348d5">driftsOverPeriod</a>(expiry, lambdaSATM, lambdaTATM, <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a56cdbe2f7c3510d346144d0b1c95bb4d">correlation_</a>);
        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> adjustment = (<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a5a9f3757d09c24acc9889b3e9c1b9623">startTime_</a>*muU[0]+(expiry-<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a5a9f3757d09c24acc9889b3e9c1b9623">startTime_</a>)*muU[1]);


       <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> d2 = (std::log(initialValue/strike) + adjustment - 0.5*variance)/std::sqrt(variance);

       CumulativeNormalDistribution <a class="code" href="namespace_quant_lib_1_1anonymous__namespace_02bjerksundstenslandengine_8cpp_03.html#a1258e6594fd6114d941f3f90147f6c82">phi</a>;
       <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> result = deflator*<a class="code" href="namespace_quant_lib_1_1anonymous__namespace_02bjerksundstenslandengine_8cpp_03.html#a1258e6594fd6114d941f3f90147f6c82">phi</a>(d2);

       <a class="code" href="errors_8hpp.html#a7a9bcab8006882bc7d5302a0861ab1a6" title="throw an error if the given pre-condition is not verified">QL_REQUIRE</a>(result &gt; 0.,
           <span class="stringliteral">&quot;RangeAccrualPricerByBgm::digitalPriceWithoutSmile: result&lt; 0. Result:&quot;</span>&lt;&lt;result);
       <a class="code" href="errors_8hpp.html#a7a9bcab8006882bc7d5302a0861ab1a6" title="throw an error if the given pre-condition is not verified">QL_REQUIRE</a>(result/deflator &lt;= 1.,
            <span class="stringliteral">&quot;RangeAccrualPricerByBgm::digitalPriceWithoutSmile: result/deflator &gt; 1. Ratio: &quot;</span>
            &lt;&lt; result/deflator &lt;&lt; <span class="stringliteral">&quot; result: &quot;</span> &lt;&lt; result&lt;&lt; <span class="stringliteral">&quot; deflator: &quot;</span> &lt;&lt; deflator);

        <span class="keywordflow">return</span> result;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a7f209e8e559825427bffa8f1328d6000"></a><!-- doxytag: member="QuantLib::RangeAccrualPricerByBgm::digitalPriceWithSmile" ref="a7f209e8e559825427bffa8f1328d6000" args="(Real strike, Real initialValue, Real expiry, Real deflator) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> <a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a7f209e8e559825427bffa8f1328d6000">QuantLib::RangeAccrualPricerByBgm::digitalPriceWithSmile</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>strike</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>initialValue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>expiry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>deflator</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00391">391</a> of file <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html">rangeaccrual.cpp</a>.</p>

<p>References <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00193">byCallSpread_</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00503">callSpreadPrice()</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00191">correlation_</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00358">digitalPriceWithoutSmile()</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00194">driftsOverPeriod()</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00197">eps_</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00216">lambdasOverPeriod()</a>, <a class="el" href="analyticgjrgarchengine_8cpp_source.html#l00040">QuantLib::anonymous_namespace{analyticgjrgarchengine.cpp}::pow()</a>, <a class="el" href="errors_8hpp_source.html#l00086">QL_REQUIRE</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00447">smileCorrection()</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00195">smilesOnExpiry_</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00196">smilesOnPayment_</a>, and <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00109">QuantLib::RangeAccrualPricer::startTime_</a>.</p>

<p>Referenced by <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00344">digitalPrice()</a>.</p>
<div class="fragment"><pre class="fragment">                                                             {
        <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> result;
        <span class="keywordflow">if</span> (<a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a84e9d481237e38f5f9483b199945c58a">byCallSpread_</a>) {

            <span class="comment">// Previous strike</span>
            <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> previousStrike = strike - <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#acdad23bef98f7dd81206dd5397df6741">eps_</a>/2;
            <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> lambdaS = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a32c2aba3a90ea107add441f702cfb983">smilesOnExpiry_</a>-&gt;volatility(previousStrike);
            <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> lambdaT = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#ae872459833709e8fb0f93d4bb7ee4798">smilesOnPayment_</a>-&gt;volatility(previousStrike);

            <span class="comment">//drift of Lognormal process (of Libor) &quot;a_U()&quot; nel paper</span>
            std::vector&lt;Real&gt; lambdaU = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#adabd110fbd2b68545490f60fbb9218cc">lambdasOverPeriod</a>(expiry, lambdaS, lambdaT);
            <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> previousVariance = std::max(<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a5a9f3757d09c24acc9889b3e9c1b9623">startTime_</a>, 0.)*lambdaU[0]*lambdaU[0]+
                         std::min(expiry-<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a5a9f3757d09c24acc9889b3e9c1b9623">startTime_</a>, expiry)*lambdaU[1]*lambdaU[1];

            <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> lambdaSATM = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a32c2aba3a90ea107add441f702cfb983">smilesOnExpiry_</a>-&gt;volatility(initialValue);
            <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> lambdaTATM = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#ae872459833709e8fb0f93d4bb7ee4798">smilesOnPayment_</a>-&gt;volatility(initialValue);
            std::vector&lt;Real&gt; muU = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a378fb532c09718efb2da82f465b348d5">driftsOverPeriod</a>(expiry, lambdaSATM, lambdaTATM, <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a56cdbe2f7c3510d346144d0b1c95bb4d">correlation_</a>);
            <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> previousAdjustment = std::exp(std::max(<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a5a9f3757d09c24acc9889b3e9c1b9623">startTime_</a>, 0.)*muU[0] +
                                         std::min(expiry-<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a5a9f3757d09c24acc9889b3e9c1b9623">startTime_</a>, expiry)*muU[1]);
            <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> previousForward = initialValue * previousAdjustment ;

            <span class="comment">// Next strike</span>
            <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> nextStrike = strike + <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#acdad23bef98f7dd81206dd5397df6741">eps_</a>/2;
            lambdaS = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a32c2aba3a90ea107add441f702cfb983">smilesOnExpiry_</a>-&gt;volatility(nextStrike);
            lambdaT = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#ae872459833709e8fb0f93d4bb7ee4798">smilesOnPayment_</a>-&gt;volatility(nextStrike);

            lambdaU = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#adabd110fbd2b68545490f60fbb9218cc">lambdasOverPeriod</a>(expiry, lambdaS, lambdaT);
            <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> nextVariance = std::max(<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a5a9f3757d09c24acc9889b3e9c1b9623">startTime_</a>, 0.)*lambdaU[0]*lambdaU[0]+
                         std::min(expiry-<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a5a9f3757d09c24acc9889b3e9c1b9623">startTime_</a>, expiry)*lambdaU[1]*lambdaU[1];
            <span class="comment">//drift of Lognormal process (of Libor) &quot;a_U()&quot; nel paper</span>
            muU = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a378fb532c09718efb2da82f465b348d5">driftsOverPeriod</a>(expiry, lambdaSATM, lambdaTATM, <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a56cdbe2f7c3510d346144d0b1c95bb4d">correlation_</a>);
            <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> nextAdjustment = std::exp(std::max(<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a5a9f3757d09c24acc9889b3e9c1b9623">startTime_</a>, 0.)*muU[0] +
                                         std::min(expiry-<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a5a9f3757d09c24acc9889b3e9c1b9623">startTime_</a>, expiry)*muU[1]);
            <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> nextForward = initialValue * nextAdjustment ;

            result = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#ae0d9c14581e27f4b6c2497fac2cb190b">callSpreadPrice</a>(previousForward,nextForward,previousStrike, nextStrike,
                                                    deflator, previousVariance, nextVariance);

        }
        <span class="keywordflow">else</span>{
            result = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a06d777bbb939efc2f7d69c343baf8d46">digitalPriceWithoutSmile</a>(strike, initialValue, expiry, deflator)+
                     <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a92ffcb23682c12d50d093e5a1ecfee14">smileCorrection</a>(strike, initialValue, expiry, deflator);
        }

        <a class="code" href="errors_8hpp.html#a7a9bcab8006882bc7d5302a0861ab1a6" title="throw an error if the given pre-condition is not verified">QL_REQUIRE</a>(result &gt; -<a class="code" href="namespace_quant_lib_1_1anonymous__namespace_02analyticgjrgarchengine_8cpp_03.html#a3011339a7df8a9688c1a29a9b6cff359">std::pow</a>(<a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#acdad23bef98f7dd81206dd5397df6741">eps_</a>,.5),
            <span class="stringliteral">&quot;RangeAccrualPricerByBgm::digitalPriceWithSmile: result&lt; 0 Result:&quot;</span>&lt;&lt;result);
        <a class="code" href="errors_8hpp.html#a7a9bcab8006882bc7d5302a0861ab1a6" title="throw an error if the given pre-condition is not verified">QL_REQUIRE</a>(result/deflator &lt;=  1.0 + <a class="code" href="namespace_quant_lib_1_1anonymous__namespace_02analyticgjrgarchengine_8cpp_03.html#a3011339a7df8a9688c1a29a9b6cff359">std::pow</a>(<a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#acdad23bef98f7dd81206dd5397df6741">eps_</a>,.2),
            <span class="stringliteral">&quot;RangeAccrualPricerByBgm::digitalPriceWithSmile: result/deflator &gt; 1. Ratio: &quot;</span>
            &lt;&lt; result/deflator &lt;&lt; <span class="stringliteral">&quot; result: &quot;</span> &lt;&lt; result&lt;&lt; <span class="stringliteral">&quot; deflator: &quot;</span> &lt;&lt; deflator);

        <span class="keywordflow">return</span> result;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="afd928d41a52b9cd0bd838f6caa7f6e78"></a><!-- doxytag: member="QuantLib::RangeAccrualPricerByBgm::digitalRangePrice" ref="afd928d41a52b9cd0bd838f6caa7f6e78" args="(Real lowerTrigger, Real upperTrigger, Real initialValue, Real expiry, Real deflator) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> <a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#afd928d41a52b9cd0bd838f6caa7f6e78">QuantLib::RangeAccrualPricerByBgm::digitalRangePrice</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>lowerTrigger</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>upperTrigger</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>initialValue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>expiry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>deflator</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00330">330</a> of file <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html">rangeaccrual.cpp</a>.</p>

<p>References <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00344">digitalPrice()</a>, and <a class="el" href="errors_8hpp_source.html#l00086">QL_REQUIRE</a>.</p>

<p>Referenced by <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00182">swapletPrice()</a>.</p>
<div class="fragment"><pre class="fragment">                                                                          {
            <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> lowerPrice = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a5ea1211be98b0ed00994cf1043879299">digitalPrice</a>(lowerTrigger, initialValue, expiry, deflator);
            <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> upperPrice = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a5ea1211be98b0ed00994cf1043879299">digitalPrice</a>(upperTrigger, initialValue, expiry, deflator);
            <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> result =  lowerPrice - upperPrice;
            <a class="code" href="errors_8hpp.html#a7a9bcab8006882bc7d5302a0861ab1a6" title="throw an error if the given pre-condition is not verified">QL_REQUIRE</a>(result &gt;0.,
                <span class="stringliteral">&quot;RangeAccrualPricerByBgm::digitalRangePrice:\n digitalPrice(&quot;</span>&lt;&lt;upperTrigger&lt;&lt;
                <span class="stringliteral">&quot;): &quot;</span>&lt;&lt;upperPrice&lt;&lt;<span class="stringliteral">&quot; &gt;  digitalPrice(&quot;</span>&lt;&lt;lowerTrigger&lt;&lt;<span class="stringliteral">&quot;): &quot;</span>&lt;&lt;lowerPrice);
            <span class="keywordflow">return</span> result;

    }
</pre></div>
</div>
</div>
<a class="anchor" id="adf963c5fcf607c12ce66bb58db77a9c7"></a><!-- doxytag: member="QuantLib::RangeAccrualPricerByBgm::drift" ref="adf963c5fcf607c12ce66bb58db77a9c7" args="(Real U, Real lambdaS, Real lambdaT, Real correlation) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> <a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#adf963c5fcf607c12ce66bb58db77a9c7">QuantLib::RangeAccrualPricerByBgm::drift</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>U</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>lambdaS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>lambdaT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>correlation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00232">232</a> of file <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html">rangeaccrual.cpp</a>.</p>

<p>References <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00111">QuantLib::RangeAccrualPricer::accrualFactor_</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00110">QuantLib::RangeAccrualPricer::endTime_</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00114">QuantLib::RangeAccrualPricer::initialValues_</a>, and <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00109">QuantLib::RangeAccrualPricer::startTime_</a>.</p>
<div class="fragment"><pre class="fragment">                                                                 {
        <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> result;

        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> p = (U-<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a5a9f3757d09c24acc9889b3e9c1b9623">startTime_</a>)/<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a1dee98bb69432b9b0417f6f31e1f0b4f">accrualFactor_</a>;
        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> q = (<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a939232704e47fc5e5276f4f07ef8c83a">endTime_</a>-U)/<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a1dee98bb69432b9b0417f6f31e1f0b4f">accrualFactor_</a>;
        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> L0T = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#ab76cfbee77357562d26e279ded909981">initialValues_</a>.back();

        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> driftBeforeFixing =
                p*<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a1dee98bb69432b9b0417f6f31e1f0b4f">accrualFactor_</a>*L0T/(1.+L0T*<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a1dee98bb69432b9b0417f6f31e1f0b4f">accrualFactor_</a>)*(p*lambdaT*lambdaT + q*lambdaS*lambdaT*correlation) +
                q*lambdaS*lambdaS + p*lambdaS*lambdaT*correlation;
        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> driftAfterFixing = (p*<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a1dee98bb69432b9b0417f6f31e1f0b4f">accrualFactor_</a>*L0T/(1.+L0T*<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a1dee98bb69432b9b0417f6f31e1f0b4f">accrualFactor_</a>)-0.5)*lambdaT*lambdaT;

        <span class="keywordflow">if</span>(<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a5a9f3757d09c24acc9889b3e9c1b9623">startTime_</a> &gt; 0){result = driftBeforeFixing;}
        <span class="keywordflow">else</span> {result = driftAfterFixing;}

        <span class="keywordflow">return</span> result;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a378fb532c09718efb2da82f465b348d5"></a><!-- doxytag: member="QuantLib::RangeAccrualPricerByBgm::driftsOverPeriod" ref="a378fb532c09718efb2da82f465b348d5" args="(Real U, Real lambdaS, Real lambdaT, Real correlation) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> &gt; <a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a378fb532c09718efb2da82f465b348d5">QuantLib::RangeAccrualPricerByBgm::driftsOverPeriod</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>U</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>lambdaS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>lambdaT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>correlation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00194">194</a> of file <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html">rangeaccrual.cpp</a>.</p>

<p>References <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00111">QuantLib::RangeAccrualPricer::accrualFactor_</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00110">QuantLib::RangeAccrualPricer::endTime_</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00114">QuantLib::RangeAccrualPricer::initialValues_</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00253">lambda()</a>, and <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00109">QuantLib::RangeAccrualPricer::startTime_</a>.</p>

<p>Referenced by <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00358">digitalPriceWithoutSmile()</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00391">digitalPriceWithSmile()</a>, and <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00447">smileCorrection()</a>.</p>
<div class="fragment"><pre class="fragment">                                                                                       {
        std::vector&lt;Real&gt; result;

        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> p = (U-<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a5a9f3757d09c24acc9889b3e9c1b9623">startTime_</a>)/<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a1dee98bb69432b9b0417f6f31e1f0b4f">accrualFactor_</a>;
        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> q = (<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a939232704e47fc5e5276f4f07ef8c83a">endTime_</a>-U)/<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a1dee98bb69432b9b0417f6f31e1f0b4f">accrualFactor_</a>;
        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> L0T = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#ab76cfbee77357562d26e279ded909981">initialValues_</a>.back();

        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> driftBeforeFixing =
                p*<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a1dee98bb69432b9b0417f6f31e1f0b4f">accrualFactor_</a>*L0T/(1.+L0T*<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a1dee98bb69432b9b0417f6f31e1f0b4f">accrualFactor_</a>)*(p*lambdaT*lambdaT + q*lambdaS*lambdaT*correlation) +
                q*lambdaS*lambdaS + p*lambdaS*lambdaT*correlation
                -0.5*<a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a52bf48d2291b9abda2636bbe57e0629b">lambda</a>(U,lambdaS,lambdaT)*<a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a52bf48d2291b9abda2636bbe57e0629b">lambda</a>(U,lambdaS,lambdaT);
        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> driftAfterFixing = (p*<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a1dee98bb69432b9b0417f6f31e1f0b4f">accrualFactor_</a>*L0T/(1.+L0T*<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a1dee98bb69432b9b0417f6f31e1f0b4f">accrualFactor_</a>)-0.5)*lambdaT*lambdaT;

        result.push_back(driftBeforeFixing);
        result.push_back(driftAfterFixing);

        <span class="keywordflow">return</span> result;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a52bf48d2291b9abda2636bbe57e0629b"></a><!-- doxytag: member="QuantLib::RangeAccrualPricerByBgm::lambda" ref="a52bf48d2291b9abda2636bbe57e0629b" args="(Real U, Real lambdaS, Real lambdaT) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> <a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a52bf48d2291b9abda2636bbe57e0629b">QuantLib::RangeAccrualPricerByBgm::lambda</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>U</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>lambdaS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>lambdaT</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00253">253</a> of file <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html">rangeaccrual.cpp</a>.</p>

<p>References <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00111">QuantLib::RangeAccrualPricer::accrualFactor_</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00110">QuantLib::RangeAccrualPricer::endTime_</a>, and <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00109">QuantLib::RangeAccrualPricer::startTime_</a>.</p>

<p>Referenced by <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00194">driftsOverPeriod()</a>.</p>
<div class="fragment"><pre class="fragment">                                                              {
        <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> result;

        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> p = (U-<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a5a9f3757d09c24acc9889b3e9c1b9623">startTime_</a>)/<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a1dee98bb69432b9b0417f6f31e1f0b4f">accrualFactor_</a>;
        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> q = (<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a939232704e47fc5e5276f4f07ef8c83a">endTime_</a>-U)/<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a1dee98bb69432b9b0417f6f31e1f0b4f">accrualFactor_</a>;

        <span class="keywordflow">if</span>(<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a5a9f3757d09c24acc9889b3e9c1b9623">startTime_</a> &gt; 0){result = q*lambdaS + p*lambdaT;}
        <span class="keywordflow">else</span> {result = lambdaT;}

        <span class="keywordflow">return</span> result;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="adabd110fbd2b68545490f60fbb9218cc"></a><!-- doxytag: member="QuantLib::RangeAccrualPricerByBgm::lambdasOverPeriod" ref="adabd110fbd2b68545490f60fbb9218cc" args="(Real U, Real lambdaS, Real lambdaT) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> &gt; <a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#adabd110fbd2b68545490f60fbb9218cc">QuantLib::RangeAccrualPricerByBgm::lambdasOverPeriod</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>U</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>lambdaS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>lambdaT</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00216">216</a> of file <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html">rangeaccrual.cpp</a>.</p>

<p>References <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00111">QuantLib::RangeAccrualPricer::accrualFactor_</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00110">QuantLib::RangeAccrualPricer::endTime_</a>, and <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00109">QuantLib::RangeAccrualPricer::startTime_</a>.</p>

<p>Referenced by <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00358">digitalPriceWithoutSmile()</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00391">digitalPriceWithSmile()</a>, and <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00447">smileCorrection()</a>.</p>
<div class="fragment"><pre class="fragment">                                                                                      {
        std::vector&lt;Real&gt; result;

        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> p = (U-<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a5a9f3757d09c24acc9889b3e9c1b9623">startTime_</a>)/<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a1dee98bb69432b9b0417f6f31e1f0b4f">accrualFactor_</a>;
        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> q = (<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a939232704e47fc5e5276f4f07ef8c83a">endTime_</a>-U)/<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a1dee98bb69432b9b0417f6f31e1f0b4f">accrualFactor_</a>;

        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> lambdaBeforeFixing = q*lambdaS + p*lambdaT;
        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> lambdaAfterFixing = lambdaT;

        result.push_back(lambdaBeforeFixing);
        result.push_back(lambdaAfterFixing);

        <span class="keywordflow">return</span> result;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a92ffcb23682c12d50d093e5a1ecfee14"></a><!-- doxytag: member="QuantLib::RangeAccrualPricerByBgm::smileCorrection" ref="a92ffcb23682c12d50d093e5a1ecfee14" args="(Real strike, Real initialValue, Real expiry, Real deflator) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> <a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a92ffcb23682c12d50d093e5a1ecfee14">QuantLib::RangeAccrualPricerByBgm::smileCorrection</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>strike</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>initialValue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>expiry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a>&#160;</td>
          <td class="paramname"><em>deflator</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00447">447</a> of file <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html">rangeaccrual.cpp</a>.</p>

<p>References <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00191">correlation_</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00289">derLambdaDerLambdaS()</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00320">derLambdaDerLambdaT()</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00194">driftsOverPeriod()</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00197">eps_</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00216">lambdasOverPeriod()</a>, <a class="el" href="bjerksundstenslandengine_8cpp_source.html#l00032">QuantLib::anonymous_namespace{bjerksundstenslandengine.cpp}::phi()</a>, <a class="el" href="analyticgjrgarchengine_8cpp_source.html#l00040">QuantLib::anonymous_namespace{analyticgjrgarchengine.cpp}::pow()</a>, <a class="el" href="errors_8hpp_source.html#l00086">QL_REQUIRE</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00195">smilesOnExpiry_</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00196">smilesOnPayment_</a>, and <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00109">QuantLib::RangeAccrualPricer::startTime_</a>.</p>

<p>Referenced by <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00391">digitalPriceWithSmile()</a>.</p>
<div class="fragment"><pre class="fragment">                                                             {

        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> previousStrike = strike - <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#acdad23bef98f7dd81206dd5397df6741">eps_</a>/2;
        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> nextStrike = strike + <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#acdad23bef98f7dd81206dd5397df6741">eps_</a>/2;

        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> derSmileS = (<a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a32c2aba3a90ea107add441f702cfb983">smilesOnExpiry_</a>-&gt;volatility(nextStrike)-
                                 <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a32c2aba3a90ea107add441f702cfb983">smilesOnExpiry_</a>-&gt;volatility(previousStrike))/<a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#acdad23bef98f7dd81206dd5397df6741">eps_</a>;
        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> derSmileT = (<a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#ae872459833709e8fb0f93d4bb7ee4798">smilesOnPayment_</a>-&gt;volatility(nextStrike)-
                                 <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#ae872459833709e8fb0f93d4bb7ee4798">smilesOnPayment_</a>-&gt;volatility(previousStrike))/<a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#acdad23bef98f7dd81206dd5397df6741">eps_</a>;

        <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> lambdaS = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a32c2aba3a90ea107add441f702cfb983">smilesOnExpiry_</a>-&gt;volatility(strike);
        <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> lambdaT = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#ae872459833709e8fb0f93d4bb7ee4798">smilesOnPayment_</a>-&gt;volatility(strike);
        <span class="comment">//Real lambdaU = lambda(expiry, lambdaS, lambdaT);</span>

        <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> derLambdaDerK = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a3b8479fe039f82f972e0cbf9ef868bbf">derLambdaDerLambdaS</a>(expiry) * derSmileS +
                             <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#ab1ce42bdc07c1179bea417beac014e4f">derLambdaDerLambdaT</a>(expiry) * derSmileT;
        <span class="comment">//Real derDriftDerK = derDriftDerLambdaS(expiry, lambdaS, lambdaT, correlation_)*derSmileS +</span>
        <span class="comment">//                      derDriftDerLambdaT(expiry, lambdaS, lambdaT, correlation_)*derSmileT +</span>
        <span class="comment">//                      lambdaU * derLambdaDerK;</span>

        <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> lambdaSATM = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a32c2aba3a90ea107add441f702cfb983">smilesOnExpiry_</a>-&gt;volatility(forward);
        <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> lambdaTATM = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#ae872459833709e8fb0f93d4bb7ee4798">smilesOnPayment_</a>-&gt;volatility(forward);
        std::vector&lt;Real&gt; lambdasOverPeriodU = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#adabd110fbd2b68545490f60fbb9218cc">lambdasOverPeriod</a>(expiry, lambdaS, lambdaT);
        <span class="comment">//drift of Lognormal process (of Libor) &quot;a_U()&quot; nel paper</span>
        std::vector&lt;Real&gt; muU = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a378fb532c09718efb2da82f465b348d5">driftsOverPeriod</a>(expiry, lambdaSATM, lambdaTATM, <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a56cdbe2f7c3510d346144d0b1c95bb4d">correlation_</a>);

        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> variance = std::max(<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a5a9f3757d09c24acc9889b3e9c1b9623">startTime_</a>, 0.)*lambdasOverPeriodU[0]*lambdasOverPeriodU[0] +
                       std::min(expiry-<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a5a9f3757d09c24acc9889b3e9c1b9623">startTime_</a>, expiry)*lambdasOverPeriodU[1]*lambdasOverPeriodU[1];

        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> forwardAdjustment = std::exp(std::max(<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a5a9f3757d09c24acc9889b3e9c1b9623">startTime_</a>, 0.)*muU[0] +
                                         std::min(expiry-<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a5a9f3757d09c24acc9889b3e9c1b9623">startTime_</a>, expiry)*muU[1]);
        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> forwardAdjusted = forward * forwardAdjustment;

        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> d1 = (std::log(forwardAdjusted/strike)+0.5*variance)/std::sqrt(variance);

        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> sqrtOfTimeToExpiry = (std::max(<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a5a9f3757d09c24acc9889b3e9c1b9623">startTime_</a>, 0.)*lambdasOverPeriodU[0] +
                                std::min(expiry-<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a5a9f3757d09c24acc9889b3e9c1b9623">startTime_</a>, expiry)*lambdasOverPeriodU[1])*
                                (1./std::sqrt(variance));

        CumulativeNormalDistribution <a class="code" href="namespace_quant_lib_1_1anonymous__namespace_02bjerksundstenslandengine_8cpp_03.html#a1258e6594fd6114d941f3f90147f6c82">phi</a>;
        NormalDistribution psi;
        <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> result = - forwardAdjusted*psi(d1)*sqrtOfTimeToExpiry*derLambdaDerK ;
                       <span class="comment">// - forwardAdjusted*phi(d1)*expiry*derDriftDerK;</span>

        result *= deflator;

        <a class="code" href="errors_8hpp.html#a7a9bcab8006882bc7d5302a0861ab1a6" title="throw an error if the given pre-condition is not verified">QL_REQUIRE</a>(std::fabs(result/deflator) &lt;= 1.0 + <a class="code" href="namespace_quant_lib_1_1anonymous__namespace_02analyticgjrgarchengine_8cpp_03.html#a3011339a7df8a9688c1a29a9b6cff359">std::pow</a>(<a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#acdad23bef98f7dd81206dd5397df6741">eps_</a>,.2),
            <span class="stringliteral">&quot;RangeAccrualPricerByBgm::smileCorrection: abs(result/deflator) &gt; 1. Ratio: &quot;</span>
            &lt;&lt; result/deflator &lt;&lt; <span class="stringliteral">&quot; result: &quot;</span> &lt;&lt; result&lt;&lt; <span class="stringliteral">&quot; deflator: &quot;</span> &lt;&lt; deflator);

        <span class="keywordflow">return</span> result;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="abe4eb12dbf8444ee95dbb9a0ccf1e9e3"></a><!-- doxytag: member="QuantLib::RangeAccrualPricerByBgm::swapletPrice" ref="abe4eb12dbf8444ee95dbb9a0ccf1e9e3" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> <a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#abe4eb12dbf8444ee95dbb9a0ccf1e9e3">QuantLib::RangeAccrualPricerByBgm::swapletPrice</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implements <a class="el" href="class_quant_lib_1_1_floating_rate_coupon_pricer.html#a30dad486d36c708d9cfe35e72a69d9fa">QuantLib::FloatingRateCouponPricer</a>.</p>

<p>Definition at line <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00182">182</a> of file <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html">rangeaccrual.cpp</a>.</p>

<p>References <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00111">QuantLib::RangeAccrualPricer::accrualFactor_</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00330">digitalRangePrice()</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00118">QuantLib::RangeAccrualPricer::discount_</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00119">QuantLib::RangeAccrualPricer::gearing_</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00114">QuantLib::RangeAccrualPricer::initialValues_</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00116">QuantLib::RangeAccrualPricer::lowerTrigger_</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00115">QuantLib::RangeAccrualPricer::observationsNo_</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00113">QuantLib::RangeAccrualPricer::observationTimes_</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00121">QuantLib::RangeAccrualPricer::spreadLegValue_</a>, and <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00117">QuantLib::RangeAccrualPricer::upperTrigger_</a>.</p>
<div class="fragment"><pre class="fragment">                                                    {

        <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> result = 0.;
        <span class="keyword">const</span> <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> deflator = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a773d6b3ca1c45816a7d6098a3b40af37">discount_</a>*<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#ab76cfbee77357562d26e279ded909981">initialValues_</a>[0];
        <span class="keywordflow">for</span>(<a class="code" href="namespace_quant_lib.html#af4cc4ef40b52c17cc455ead2a97aedb3" title="size of a container">Size</a> i=0;i&lt;<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a02840098c1c01d00a52099fc123b0ad6">observationsNo_</a>;i++){
            <a class="code" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50" title="real number">Real</a> digitalFloater = <a class="code" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#afd928d41a52b9cd0bd838f6caa7f6e78">digitalRangePrice</a>(<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a5fdd6f19c0569baa7516be4b772c2ddc">lowerTrigger_</a>, <a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#ac6d7c0e9864b8e0e7959ac5ace4afa9f">upperTrigger_</a>,initialValues_[i+1],
                                                     <a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#aa6a81891df3800b7a79a20ec8f8427a0">observationTimes_</a>[i], deflator);
            result += digitalFloater;
        }
        <span class="keywordflow">return</span> <a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a96ba4a17f74871d54ab2d825a78cdc92">gearing_</a> *(result*<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a1dee98bb69432b9b0417f6f31e1f0b4f">accrualFactor_</a>/<a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#a02840098c1c01d00a52099fc123b0ad6">observationsNo_</a>)+ <a class="code" href="class_quant_lib_1_1_range_accrual_pricer.html#ac4a1c142339a76ea4c70edc50ed587f8">spreadLegValue_</a>;
    }
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a84e9d481237e38f5f9483b199945c58a"></a><!-- doxytag: member="QuantLib::RangeAccrualPricerByBgm::byCallSpread_" ref="a84e9d481237e38f5f9483b199945c58a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> <a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a84e9d481237e38f5f9483b199945c58a">QuantLib::RangeAccrualPricerByBgm::byCallSpread_</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00193">193</a> of file <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html">rangeaccrual.hpp</a>.</p>

<p>Referenced by <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00391">digitalPriceWithSmile()</a>.</p>

</div>
</div>
<a class="anchor" id="a56cdbe2f7c3510d346144d0b1c95bb4d"></a><!-- doxytag: member="QuantLib::RangeAccrualPricerByBgm::correlation_" ref="a56cdbe2f7c3510d346144d0b1c95bb4d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> <a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a56cdbe2f7c3510d346144d0b1c95bb4d">QuantLib::RangeAccrualPricerByBgm::correlation_</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00191">191</a> of file <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html">rangeaccrual.hpp</a>.</p>

<p>Referenced by <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00358">digitalPriceWithoutSmile()</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00391">digitalPriceWithSmile()</a>, and <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00447">smileCorrection()</a>.</p>

</div>
</div>
<a class="anchor" id="acdad23bef98f7dd81206dd5397df6741"></a><!-- doxytag: member="QuantLib::RangeAccrualPricerByBgm::eps_" ref="acdad23bef98f7dd81206dd5397df6741" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_quant_lib.html#a372ac5c1a422a6b276fe0552d4d83f50">Real</a> <a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#acdad23bef98f7dd81206dd5397df6741">QuantLib::RangeAccrualPricerByBgm::eps_</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00197">197</a> of file <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html">rangeaccrual.hpp</a>.</p>

<p>Referenced by <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00344">digitalPrice()</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00391">digitalPriceWithSmile()</a>, and <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00447">smileCorrection()</a>.</p>

</div>
</div>
<a class="anchor" id="a32c2aba3a90ea107add441f702cfb983"></a><!-- doxytag: member="QuantLib::RangeAccrualPricerByBgm::smilesOnExpiry_" ref="a32c2aba3a90ea107add441f702cfb983" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt;<a class="el" href="class_quant_lib_1_1_smile_section.html">SmileSection</a>&gt; <a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#a32c2aba3a90ea107add441f702cfb983">QuantLib::RangeAccrualPricerByBgm::smilesOnExpiry_</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00195">195</a> of file <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html">rangeaccrual.hpp</a>.</p>

<p>Referenced by <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00358">digitalPriceWithoutSmile()</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00391">digitalPriceWithSmile()</a>, and <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00447">smileCorrection()</a>.</p>

</div>
</div>
<a class="anchor" id="ae872459833709e8fb0f93d4bb7ee4798"></a><!-- doxytag: member="QuantLib::RangeAccrualPricerByBgm::smilesOnPayment_" ref="ae872459833709e8fb0f93d4bb7ee4798" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt;<a class="el" href="class_quant_lib_1_1_smile_section.html">SmileSection</a>&gt; <a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#ae872459833709e8fb0f93d4bb7ee4798">QuantLib::RangeAccrualPricerByBgm::smilesOnPayment_</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00196">196</a> of file <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html">rangeaccrual.hpp</a>.</p>

<p>Referenced by <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00358">digitalPriceWithoutSmile()</a>, <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00391">digitalPriceWithSmile()</a>, and <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00447">smileCorrection()</a>.</p>

</div>
</div>
<a class="anchor" id="ae668f25289e96c45aa6993a7bbe0036d"></a><!-- doxytag: member="QuantLib::RangeAccrualPricerByBgm::withSmile_" ref="ae668f25289e96c45aa6993a7bbe0036d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> <a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html#ae668f25289e96c45aa6993a7bbe0036d">QuantLib::RangeAccrualPricerByBgm::withSmile_</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html#l00192">192</a> of file <a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html">rangeaccrual.hpp</a>.</p>

<p>Referenced by <a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html#l00344">digitalPrice()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/deriversatile/QuantLib/QuantLibQt/ql/cashflows/<a class="el" href="ql_2cashflows_2rangeaccrual_8hpp_source.html">rangeaccrual.hpp</a></li>
<li>/home/deriversatile/QuantLib/QuantLibQt/ql/cashflows/<a class="el" href="ql_2cashflows_2rangeaccrual_8cpp_source.html">rangeaccrual.cpp</a></li>
</ul>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespace_quant_lib.html">QuantLib</a>      </li>
      <li class="navelem"><a class="el" href="class_quant_lib_1_1_range_accrual_pricer_by_bgm.html">RangeAccrualPricerByBgm</a>      </li>

    <li class="footer">Generated on Sat Aug 25 2012 13:51:04 for QuantLib by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
